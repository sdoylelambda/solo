if (self.CavalryLogger) { CavalryLogger.start_js(["qzVGN"]); }

__d("InstagramMessageGraphQLThreadItemFetcher",["Promise","BanzaiODS","InstagramMessageThreadItemWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadItemFetcher"}),function(a){b("BanzaiODS").bumpEntityKey(2966,"Instagram_message_webgraphql","InstagramMessageGraphQLThreadItemFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"Instagram_message_webgraphql","InstagramMessageGraphQLThreadItemFetcher.failure");e(a)})})}}}),null);
__d("InstagramMessageGraphQLThreadItemsFetcher",["Promise","BanzaiODS","InstagramMessageThreadItemsWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemsWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadItemsFetcher"}),function(a){b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.failure");e(a)})})},fetchFromUser:function(a){return new(b("Promise"))(function(c,d){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemsWebGraphQLQuery"))(a)),function(a){b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.success"),c(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.failure");d(a)})})}}}),null);
__d("InstagramMessageGraphQLThreadsFetcher",["Promise","BanzaiODS","InstagramBusinessMessageInboxQueryWebGraphQLQuery","InstagramMessageThreadsWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadsWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadsFetcher"}),function(a){b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadsFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadsFetcher.failure");e(a)})})},fetchFromUser:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramBusinessMessageInboxQueryWebGraphQLQuery"))({inbox_id:a,limit:c.limit,after:c.after,folder:c.folder,is_follow_up:c.is_follow_up,is_unread:c.is_unread,loadThreads:c.loadThreads,assigned_admin_id:c.assigned_admin_id})),function(a){var c;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramDirectMessageGraphQLThreadsFetcher.success");d({viewer:{instagram_message_threads:{sync_sequence_id:(c=a.instagram_business_message_inbox)==null?void 0:c.sync_sequence_id,unseen_count:(c=a.instagram_business_message_inbox)==null?void 0:c.unseen_count,nodes:(c=a.instagram_business_message_inbox)==null?void 0:(a=c.instagram_direct_message_threads)==null?void 0:a.nodes,ig_user:{instagram_user_id:"",profile_picture:{uri:""}}}}})},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramDirectMessageGraphQLThreadsFetcher.failure");e(a)})})}}}),null);
__d("IGMessageInboxStore",["invariant","FBLogger","FluxLoadObjectStore","IGMessageDataDispatcher","IGMessageDataMutateActionTypes","InstagramMessageGraphQLThreadItemFetcher","InstagramMessageGraphQLThreadItemsFetcher","InstagramMessageGraphQLThreadsFetcher","LoadObject","PagesManagerInboxUnifiedThreadlistAction","immutable","keyMirror","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="1",i="IGMessageID",j={INBOX:"INBOX",THREAD:"THREAD",ITEM:"ITEM"},k=b("keyMirror")({LOADED:""});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$IGMessageInboxStore1=new Map(),c.$IGMessageInboxStore2=new Map(),c.$IGMessageInboxStore3=!0,c.$IGMessageInboxStore4=null,c.$IGMessageInboxStore5=null,c.$IGMessageInboxStore6=null,c.$IGMessageInboxStore7=null,c.$IGMessageInboxStore8=void 0,c.$IGMessageInboxStore9=void 0,c.$IGMessageInboxStore10=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getItemToken=function(a,b,c){a=[h,i,a,b,c];return a.join(":")};d.getInboxFromUser=function(a,b,c,d,e,f,g){return this.getInbox(a,b,c,d,e,f,g,!0)};d.getInbox=function(a,c,d,e,f,h,i,k){__p&&__p();var l,m;k===void 0&&(k=!1);if(!a){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").empty()}this.$IGMessageInboxStore3===!1&&b("PagesManagerInboxUnifiedThreadlistAction").setIsLoadingInbox(!1);l=(l=c)!=null?l:1;l>=1||g(0,11872);var n=this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:l,cursor:d,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,fetch_from_user:k});this.$IGMessageInboxStore5=a;this.$IGMessageInboxStore6=c;this.$IGMessageInboxStore7=e;this.$IGMessageInboxStore8=f;this.$IGMessageInboxStore9=h;c=this.get(n);if(c.isDeleting()){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").deleting()}else if(!c.hasValue()){if(c.hasError()){b("FBLogger")("pages_messaging_www").mustfix("Encounter error when loading IG inbox: %s",a);this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:l,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,fetch_from_user:k}));b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);b("PagesManagerInboxUnifiedThreadlistAction").setInstagramLoadingError(!0);return b("LoadObject").loading().setError(c.getError())}d&&g(0,3361);b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").loading()}m=(m=c.value)!=null?m:{};m=m.inbox;if(m===null||m===void 0){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").withValue(null)}var o=this.$IGMessageInboxStore1.get(n);if(o&&o.stateData.inbox===m){o.isLoading!==c.isLoading()&&(o={stateData:b("nullthrows")(c.value),returnedData:o.returnedData,isLoading:c.isLoading(),error:c.getError()},this.$IGMessageInboxStore1.set(n,o));if(o.isLoading){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(o.returnedData.inbox);return b("LoadObject").withValue(o.returnedData.inbox).loading().setError(o.error)}else if(!(o.error instanceof Error)){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(o.returnedData.inbox);return b("LoadObject").withValue(o.returnedData.inbox)}}o=(o=m.nodes)!=null?o:[];var p=0;if(d!==null&&d!==void 0){var q=-1;for(var r=o.length-1;r>=0;r--)if(o[r].token===d.lastEntityToken){q=r;break}else if(this.largeNumberCompare(d.lastEntityTime,b("nullthrows")(o[r].last_activity_at))===-1)break;if(q===-1){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").withValue(null)}p=q+1}d=Object.assign({},m);r=!1;if(p+l<=o.length)d.nodes=o.slice(p,p+l),d.page_info={has_next_page:p+l<o.length||m.page_info&&m.page_info.has_next_page};else if(!m.page_info&&!m.nodes)this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:l,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,fetch_from_user:k})),r=!0;else if(!m.page_info||!b("nullthrows")(m.page_info).has_next_page)d.nodes=o.slice(p,o.length),d.page_info={has_next_page:!1};else{q=null;o.length>0&&(q={lastEntityTime:b("nullthrows")(o[o.length-1].last_activity_at),lastEntityToken:b("nullthrows")(o[o.length-1].token)});this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:p+l-o.length,cursor:q,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,graphqlCursor:b("nullthrows")(m.page_info).end_cursor,fetch_from_user:k}));d.nodes=o.slice(p,o.length);d.page_info={has_next_page:!0};r=!0}this.$IGMessageInboxStore1.set(n,{stateData:b("nullthrows")(c.value),returnedData:{inbox:d},isLoading:r,error:c.getError()});if(r){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(d);return b("LoadObject").withValue(d).loading().setError(c.getError())}else{b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(d);return b("LoadObject").withValue(d).setError(c.getError())}};d.getThreadFromUser=function(a,b,c,d){return this.getThread(a,b,c,d,!0)};d.getThread=function(a,c,d,e,f){__p&&__p();var h,i;f===void 0&&(f=!1);if(c===""||!a)return b("LoadObject").empty();d=(d=d)!=null?d:1;d>=1||g(0,11872);var k=this.$IGMessageInboxStore11({type:j.THREAD,inboxID:a,token:c,limit:d,cursor:e,fetch_from_user:f}),l=this.get(k);if(l.isDeleting())return b("LoadObject").deleting();else if(!l.hasValue()){if(l.hasError()){b("FBLogger")("pages_messaging_www").mustfix("Encounter error when loading IG thread: %s, $s",a,c);return b("LoadObject").empty().setError(l.getError())}e&&g(0,3361);return b("LoadObject").loading()}h=(h=l.value)!=null?h:{};h=h.thread;if(h===null||h===void 0)return b("LoadObject").withValue(null);var m=this.$IGMessageInboxStore1.get(k);if(m&&m.stateData.thread===h){m.isLoading!==l.isLoading()&&(m={stateData:b("nullthrows")(l.value),returnedData:m.returnedData,isLoading:l.isLoading(),error:l.getError()},this.$IGMessageInboxStore1.set(k,m));if(m.isLoading)return b("LoadObject").withValue(m.returnedData.thread).loading().setError(m.error);else if(!(m.error instanceof Error))return b("LoadObject").withValue(m.returnedData.thread)}m=(m=h.thread_items)!=null?m:{};i=(i=m.nodes)!=null?i:[];var n=0;if(e!==null&&e!==void 0){var o=-1;for(var p=i.length-1;p>=0;p--)if(i[p].token===e.lastEntityToken){o=p;break}else if(this.largeNumberCompare(e.lastEntityTime,b("nullthrows")(i[p].time_stamp))===-1)break;if(o===-1)return b("LoadObject").withValue(null);n=o+1}e=Object.assign({},h);p=Object.assign({},m);o=!1;e.thread_items=p;if(n+d<=i.length)p.nodes=i.slice(n,n+d),p.page_info={has_next_page:n+d<i.length||m.page_info&&m.page_info.has_next_page};else if(!m.page_info&&!m.nodes)this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.THREAD,inboxID:a,token:c,limit:d,fetch_from_user:f})),o=!0;else if(!m.page_info||!b("nullthrows")(m.page_info).has_next_page)p.nodes=i.slice(n,i.length),p.page_info={has_next_page:!1};else{h=null;i.length>0&&(h={lastEntityTime:b("nullthrows")(i[i.length-1].time_stamp),lastEntityToken:b("nullthrows")(i[i.length-1].token)});this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.THREAD,inboxID:b("nullthrows")(a),token:c,limit:n+d-i.length,cursor:h,graphqlCursor:b("nullthrows")(m.page_info).end_cursor,fetch_from_user:f}));p.nodes=i.slice(n,i.length);p.page_info={has_next_page:!0};o=!0}this.$IGMessageInboxStore1.set(k,{stateData:b("nullthrows")(l.value),returnedData:{thread:e},isLoading:o,error:l.getError()});if(o)return b("LoadObject").withValue(e).loading().setError(l.getError());else return b("LoadObject").withValue(e).setError(l.getError())};d.getThreadItem=function(a,c){__p&&__p();if(!a||c==="")return b("LoadObject").empty();a=this.get(this.$IGMessageInboxStore11({type:j.ITEM,inboxID:a,token:c}));if(a.isDeleting())return b("LoadObject").deleting();else if(!a.hasValue())return b("LoadObject").loading();else if(a.isCreating())return b("LoadObject").withValue(a.getValueEnforcing().item).creating();return b("LoadObject").withValue(a.getValueEnforcing().item)};d.__load=function(a){a=this.$IGMessageInboxStore13(a);switch(a.type){case j.INBOX:this.$IGMessageInboxStore14(a);break;case j.THREAD:this.$IGMessageInboxStore15(a);break;case j.ITEM:this.$IGMessageInboxStore16(a);break}};d.$IGMessageInboxStore14=function(a){Boolean(a.fetch_from_user)?b("InstagramMessageGraphQLThreadsFetcher").fetchFromUser(a.inboxID,{limit:a.limit,folder:a.folder,is_follow_up:a.is_follow_up,is_unread:a.is_unread,assigned_admin_id:a.assigned_admin_id,after:a.graphqlCursor,loadThreads:!0}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{inbox:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})}):b("InstagramMessageGraphQLThreadsFetcher").fetch(a.inboxID,{limit:a.limit,folder:a.folder,is_follow_up:a.is_follow_up,is_unread:a.is_unread,assigned_admin_id:a.assigned_admin_id,after:a.graphqlCursor,loadThreads:!0}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{inbox:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.$IGMessageInboxStore15=function(a){Boolean(a.fetch_from_user)?b("InstagramMessageGraphQLThreadItemsFetcher").fetchFromUser({token:b("nullthrows")(a.token),instagram_user_id:a.inboxID,item_limit:a.limit,item_after:a.graphqlCursor,load_items:!0,width:480,height:480}).then(function(c){c.instagram_message_thread===null?b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error("Failed to fetch thread"),type:k.LOADED}):b("IGMessageDataDispatcher").dispatch({request:a,payload:{thread:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})}):b("InstagramMessageGraphQLThreadItemsFetcher").fetch(a.inboxID,{token:b("nullthrows")(a.token),item_limit:a.limit,item_after:a.graphqlCursor,load_items:!0,width:480,height:480}).then(function(c){c.instagram_message_thread===null?b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error("Failed to fetch thread"),type:k.LOADED}):b("IGMessageDataDispatcher").dispatch({request:a,payload:{thread:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.$IGMessageInboxStore16=function(a){b("InstagramMessageGraphQLThreadItemFetcher").fetch(a.inboxID,{token:b("nullthrows")(a.token),width:480,height:480}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{item:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.__getActionTypes=function(){var a;return[this.getActionTypeStartLoad(),k.LOADED,(a=b("IGMessageDataMutateActionTypes")).CREATE,a.CREATING,a.DELETE,a.DELETING,a.FORCE_FETCH,a.UPDATE]};d.reduce=function(a,c){__p&&__p();var d;switch(c.type){case k.LOADED:var e=c.payload;this.$IGMessageInboxStore2.set(this.$IGMessageInboxStore11(c.request),!1);if(e instanceof Error)return this.$IGMessageInboxStore17(a,c.request,e);switch(c.request.type){case j.INBOX:this.$IGMessageInboxStore3=!1;b("PagesManagerInboxUnifiedThreadlistAction").setIsLoadingInbox(!1);return this.$IGMessageInboxStore18(a,c.request,b("nullthrows")(e.inbox));case j.THREAD:return this.$IGMessageInboxStore19(a,c.request,b("nullthrows")(e.thread));case j.ITEM:return this.$IGMessageInboxStore20(a,c.request,b("nullthrows")(e.item))}return a;case b("IGMessageDataMutateActionTypes").FORCE_FETCH:switch(c.request.type){case j.INBOX:b("PagesManagerInboxUnifiedThreadlistAction").setIsLoadingInbox(!0),this.$IGMessageInboxStore3=!0}this.$IGMessageInboxStore12(this.$IGMessageInboxStore11(c.request));return a;case b("IGMessageDataMutateActionTypes").DELETING:return this.__setDeleting(a,b("immutable").List.of(this.$IGMessageInboxStore21(c.request)));case b("IGMessageDataMutateActionTypes").DELETE:e=a;switch(c.request.type){case j.THREAD:e=this.$IGMessageInboxStore22(a,c.request.inboxID,b("nullthrows")(c.request.token));break;case j.ITEM:e=this.$IGMessageInboxStore23(a,c.request.inboxID,b("nullthrows")((d=c)!=null?(d=d.extraData)!=null?d.threadToken:d:d),b("nullthrows")(c.request.token));break}return this.__setEmpty(e,b("immutable").List.of(this.$IGMessageInboxStore21(c.request)));case b("IGMessageDataMutateActionTypes").CREATING:if(c.request.type===j.ITEM){var f,g,h;e=b("nullthrows")((d=c)!=null?(d=d.payload)!=null?d.item:d:d);d=b("nullthrows")(e.client_context);e=Object.assign({},e,{token:d});h=b("nullthrows")((h=c)!=null?(h=h.extraData)!=null?h.threadToken:h:h);var i=this.$IGMessageInboxStore24(a,c.request.inboxID,h,null,e),l=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:h}),m=this.$IGMessageInboxStore25(i,l);m=(m=m)!=null?(m=m.value)!=null?m.thread:m:m;g=((g=e)!=null?g.time_stamp:g)||this.getNowTimestamp();f=(f=(f=m)!=null?f.last_activity_at:f)!=null?f:g;i=this.$IGMessageInboxStore26(i,c.request.inboxID,h,{token:h,last_activity_at:f},0);var n=this.getInboxIGID();h=(((h=m)!=null?h.last_seen_at:h)||[]).find(function(a){return a.user_id==n});if(this.largeNumberCompare(((h=h)!=null?h.timestamp:h)||"0",g)==-1){g=(((h=m)!=null?h.last_seen_at:h)||[]).filter(function(a){return a.user_id!==n});g.push({item_id:d,timestamp:e.time_stamp,user_id:n});h=Object.assign({},m,{last_seen_at:g,last_activity_at:f});i=this.$IGMessageInboxStore27(i,l,{thread:h})}return i.set(this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c.request.inboxID,token:d}),b("LoadObject").withValue({item:e}).creating())}return a;case b("IGMessageDataMutateActionTypes").CREATE:switch(c.request.type){case j.THREAD:g=b("nullthrows")((m=c)!=null?(m=m.payload)!=null?m.thread:m:m);f=this.$IGMessageInboxStore26(a,c.request.inboxID,null,{token:b("nullthrows")(g.token),last_activity_at:b("nullthrows")(g.last_activity_at)},0);i=(h=(l=g)!=null?(l=l.thread_items)!=null?l.nodes:l:l)!=null?h:[];d=i.map(function(a){return{token:a.token,time_stamp:a.time_stamp}});e=Object.assign({},g.thread_items,{nodes:d});m=Object.assign({},g,{thread_items:e});return this.$IGMessageInboxStore27(f,this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:b("nullthrows")(g.token)}),{thread:m});case j.ITEM:h=b("nullthrows")((l=c)!=null?(l=l.payload)!=null?l.item:l:l);i=this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c.request.inboxID,token:b("nullthrows")(h.token)});if(!this.$IGMessageInboxStore25(a,i).isEmpty())return a;e=b("nullthrows")((d=c)!=null?(d=d.extraData)!=null?d.threadToken:d:d);f=this.$IGMessageInboxStore24(a,c.request.inboxID,e,h.client_context,h);g=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:e});m=this.$IGMessageInboxStore25(f,g);i=(l=m)!=null?(l=l.value)!=null?l.thread:l:l;m=(f=(d=i)!=null?d.last_activity_at:d)!=null?f:h.time_stamp;l=0;d=a;if(i!==null&&i!==void 0){var o=this.getInboxIGID();f=(((f=i)!=null?f.last_seen_at:f)||[]).find(function(a){return a.user_id==o});var p={};if(f!==null&&f!==void 0&&(f.item_id===h.client_context||h.sender_id===o)){f=(((f=i)!=null?f.last_seen_at:f)||[]).filter(function(a){return a.user_id!==o});f.push({item_id:h.token,timestamp:h.time_stamp,user_id:o});p.last_seen_at=f}if(h.ig_item_type==="raven_media"&&h.sender_id!==o){f=(f=(f=i)!=null?(f=f.direct_story)!=null?f.unseen_count:f:f)!=null?f:0;p.direct_story={unseen_count:f+1,media_type:(f=h)!=null?(f=f.raven_media)!=null?f.media_type:f:f}}p.last_activity_at=h.sender_id!==this.getInboxIGID()?h.time_stamp:(f=(f=i)!=null?f.last_activity_at:f)!=null?f:h.time_stamp;f=Object.assign({},i,p);if(h.sender_id!==this.getInboxIGID()){p=(i=this.$IGMessageInboxStore25(a,g))!=null?(i=i.value)!=null?i.thread:i:i;l=this.getUnseenCountDelta(c.request.inboxID,p,f)}d=this.$IGMessageInboxStore27(d,g,{thread:f})}else h.sender_id!==this.getInboxIGID()&&(l=1);d=this.$IGMessageInboxStore26(d,c.request.inboxID,e,{token:e,last_activity_at:m},l);return this.$IGMessageInboxStore28(d,c.request.inboxID,h.client_context,h)}return a;case b("IGMessageDataMutateActionTypes").UPDATE:switch(c.request.type){case j.INBOX:p=b("nullthrows")((i=c)!=null?(i=i.payload)!=null?i.inbox:i:i);g=this.$IGMessageInboxStore21(c.request);f=this.$IGMessageInboxStore25(a,g);m=(e=f)!=null?(e=e.value)!=null?e.inbox:e:e;if(m===null||m===void 0)return a;l=Object.assign({},m,p);return this.$IGMessageInboxStore27(a,g,{inbox:l});case j.THREAD:h=b("nullthrows")((d=c)!=null?(d=d.payload)!=null?d.thread:d:d);i=this.$IGMessageInboxStore21(c.request);f=this.$IGMessageInboxStore25(a,i);m=(e=f)!=null?(e=e.value)!=null?e.thread:e:e;if(m===null||m===void 0)return a;p=Object.assign({},m,h);var q=h.last_seen_at||[];if(q.length>0){var r=q.slice();(m.last_seen_at||[]).map(function(a){q.find(function(b){return b.user_id===a.user_id})||r.push(a)});p.last_seen_at=r}else p.last_seen_at=m.last_seen_at;p.is_read=(l=(g=c.payload.thread)==null?void 0:g.is_read)!=null?l:m.is_read;d=this.$IGMessageInboxStore27(a,i,{thread:p});f=this.getUnseenCountDelta(c.request.inboxID,m,p);if(f!==0){e=this.$IGMessageInboxStore21({type:j.INBOX,inboxID:c.request.inboxID});g=(h=this.$IGMessageInboxStore25(d,e))!=null?(h=h.value)!=null?h.inbox:h:h;i=(l=g==null?void 0:g.unseen_count)!=null?l:0;m=Object.assign({},g,{unseen_count:i+f});return this.$IGMessageInboxStore27(d,e,{inbox:m})}return d;case j.ITEM:h=b("nullthrows")((p=c)!=null?(p=p.payload)!=null?p.item:p:p);l=this.$IGMessageInboxStore21(c.request);g=this.$IGMessageInboxStore25(a,l);f=(i=g)!=null?(i=i.value)!=null?i.item:i:i;if(f===null||f===void 0)return a;e=Object.assign({},f,h);if(e.time_stamp===f.time_stamp&&e.raven_media===f.raven_media)return this.$IGMessageInboxStore27(a,l,{item:e});d=b("nullthrows")((m=c)!=null?(m=m.extraData)!=null?m.threadToken:m:m);p=this.$IGMessageInboxStore24(a,c.request.inboxID,d,e.token,e,f);g=this.$IGMessageInboxStore25(a,this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:d})).getValue();i=this.$IGMessageInboxStore25(p,this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:d})).getValue();m=(h=i)!=null?(h=h.thread)!=null?h.last_activity_at:h:h;f=this.getUnseenCountDelta(c.request.inboxID,g==null?void 0:g.thread,i==null?void 0:i.thread);h=this.$IGMessageInboxStore26(p,c.request.inboxID,d,{token:d,last_activity_at:m},f);return this.$IGMessageInboxStore27(h,l,{item:e})}return a;default:return a}};d.$IGMessageInboxStore18=function(a,c,d){__p&&__p();var e=this;d=(d=d.viewer)!=null?d:{};d=d.instagram_message_threads;if(!d)return this.$IGMessageInboxStore17(a,c,{inbox:null});var f=Object.assign({},d),g=a,h=d.nodes;if(h){var i=new Map(),k=c.cursor;if(!k)f.nodes=h.filter(function(a){return a.token!==null&&a.token!==void 0}).map(function(d){var a=b("nullthrows")(d.token);a=e.$IGMessageInboxStore11({type:j.THREAD,inboxID:c.inboxID,token:a});i.set(a,{thread:Object.assign({},d)});return{token:d.token,last_activity_at:d.last_activity_at}});else{var l,m,n;m=(m=this.$IGMessageInboxStore25(a,this.$IGMessageInboxStore21(c)).value)!=null?m:{};m=(m=m.inbox)!=null?m:{};n=(n=m.nodes)!=null?n:[];var o=-1;if(b("nullthrows")(c.graphqlCursor)===((l=m)!=null?(l=l.page_info)!=null?l.end_cursor:l:l))o=n.length-1;else for(var l=n.length-1;l>=0;l--){var p=this.largeNumberCompare(k.lastEntityTime,b("nullthrows")(n[l].last_activity_at));if(p===0){o=l;break}else if(p===-1)break}if(o===-1)return a;p=o+1;k=0;l=m.page_info;o=n.slice(0,p);while(k<h.length&&p<n.length){m=h[k];var q=m.token;if(q===null||q===void 0){k++;continue}var r=n[p];q===r.token?(o.push(r),p++,k++):this.largeNumberCompare(b("nullthrows")(r.last_activity_at),b("nullthrows")(m.last_activity_at))===1?p++:k++}if(k<h.length){l=d.page_info;while(k<h.length){q=h[k];r=q.token;if(r===null||r===void 0){k++;continue}m=this.$IGMessageInboxStore11({type:j.THREAD,inboxID:c.inboxID,token:r});p=this.$IGMessageInboxStore25(a,m);p.hasValue()||i.set(m,{thread:Object.assign({},q)});o.push({token:q.token,last_activity_at:q.last_activity_at});k++}}f=Object.assign({},d,{nodes:o,page_info:l})}g=this.__handleMap(a,i)}return this.$IGMessageInboxStore17(g,c,{inbox:f})};d.$IGMessageInboxStore19=function(a,c,d){__p&&__p();var e=this;d=d.instagram_message_thread;if(!d)return this.$IGMessageInboxStore17(a,c,{thread:null});var f=Object.assign({},d),g=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.inboxID,token:c.token});g=(g=this.$IGMessageInboxStore25(a,g))!=null?(g=g.value)!=null?g.thread:g:g;g&&(f.is_read=g.is_read);g=a;d=d.thread_items;if(d){var h=Object.assign({},d),i=new Map(),k=c.cursor;if(!k)h.nodes=d.nodes.map(function(d){var b=d.token;if(b!==null&&b!==void 0){b=e.$IGMessageInboxStore11({type:j.ITEM,inboxID:c.inboxID,token:b});var f=e.$IGMessageInboxStore25(a,b);f.hasValue()||i.set(b,{item:Object.assign({},d)})}return{token:d.token,time_stamp:d.time_stamp}});else{var l,m,n;m=(m=this.$IGMessageInboxStore25(a,this.$IGMessageInboxStore21(c)).value)!=null?m:{};m=(m=m.thread)!=null?m:{};m=(m=m.thread_items)!=null?m:{};var o=d.nodes;n=(n=m.nodes)!=null?n:[];var p=-1;if(b("nullthrows")(c.graphqlCursor)===((l=m)!=null?(l=l.page_info)!=null?l.end_cursor:l:l))p=n.length-1;else for(var l=n.length-1;l>=0;l--){var q=this.largeNumberCompare(k.lastEntityTime,b("nullthrows")(n[l].time_stamp));if(q===0){p=l;break}else if(q===-1)break}if(p===-1)return a;q=p+1;k=0;l=m.page_info;p=n.slice(0,q);while(k<o.length&&q<n.length){m=o[k];var r=m.token;if(r===null||r===void 0){k++;continue}var s=n[q];r===s.token?(p.push(s),q++,k++):this.largeNumberCompare(b("nullthrows")(s.time_stamp),b("nullthrows")(m.time_stamp))===1?q++:k++}if(k<o.length){l=d.page_info;while(k<o.length){r=o[k];s=r.token;if(s===null||s===void 0){k++;continue}m=this.$IGMessageInboxStore11({type:j.ITEM,inboxID:c.inboxID,token:s});q=this.$IGMessageInboxStore25(a,m);q.hasValue()||i.set(m,{item:Object.assign({},r)});p.push({token:r.token,time_stamp:r.time_stamp});k++}}h=Object.assign({},d,{nodes:p,page_info:l})}f.thread_items=h;g=this.__handleMap(a,i)}return this.$IGMessageInboxStore17(g,c,{thread:f})};d.$IGMessageInboxStore20=function(a,b,c){return this.$IGMessageInboxStore17(a,b,{item:c.instagram_message_thread_item})};d.$IGMessageInboxStore22=function(a,b,c,d){__p&&__p();var e;d===void 0&&(d=j.INBOX);d=this.$IGMessageInboxStore21({type:d,inboxID:b});var f=this.$IGMessageInboxStore25(a,d);f=(f=f)!=null?(f=f.value)!=null?f.inbox:f:f;if(f===null||f===void 0)return a;e=(e=f.nodes)!=null?e:[];if(e.length>0&&e.find(function(a){return a.token===c})){var g,h=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:b,token:c});h=(h=this.$IGMessageInboxStore25(a,h))!=null?(h=h.value)!=null?h.thread:h:h;g=(g=(g=f)!=null?g.unseen_count:g)!=null?g:0;b=this.isThreadUnread(b,h);b&&g>0&&(g-=1);h=Object.assign({},f,{nodes:e.filter(function(a){return a.token!==c}),unseen_count:g});return this.$IGMessageInboxStore27(a,d,{inbox:h})}return a};d.$IGMessageInboxStore23=function(a,b,c,d){__p&&__p();var e;b=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:b,token:c});c=this.$IGMessageInboxStore25(a,b);c=(c=c)!=null?(c=c.value)!=null?c.thread:c:c;if(c===null||c===void 0)return a;e=(e=(e=c)!=null?(e=e.thread_items)!=null?e.nodes:e:e)!=null?e:[];if(e.length>0&&e.find(function(a){return a.token===d})){e=Object.assign({},c.thread_items,{nodes:e.filter(function(a){return a.token!==d})});c=Object.assign({},c,{thread_items:e});return this.$IGMessageInboxStore27(a,b,{thread:c})}return a};d.$IGMessageInboxStore26=function(a,c,d,e,f,g){__p&&__p();var h;g===void 0&&(g=j.INBOX);g=this.$IGMessageInboxStore21({type:g,inboxID:c});c=this.$IGMessageInboxStore25(a,g);c=(c=c)!=null?(c=c.value)!=null?c.inbox:c:c;if(c===null||c===void 0)return a;h=(h=c.nodes)!=null?h:[];if(d===e.token){var i=h.find(function(a){return a.token===d});if(i!==null&&i!==void 0&&i.last_activity_at===e.last_activity_at&&f===0)return a}i=d!==null&&d!==void 0?h.filter(function(a){return d!==a.token}):h;for(h=0;h<i.length;h++)if(this.largeNumberCompare(b("nullthrows")(e.last_activity_at),b("nullthrows")(i[h].last_activity_at))!==-1)break;var k=i.slice(0,h);k.push({token:e.token,last_activity_at:e.last_activity_at});e=(e=c.unseen_count)!=null?e:0;c=Object.assign({},c,{nodes:k.concat(i.slice(h)),unseen_count:e+f});return this.$IGMessageInboxStore27(a,g,{inbox:c})};d.$IGMessageInboxStore24=function(a,c,d,e,f,g){__p&&__p();var h,i,k;c=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c,token:d});d=this.$IGMessageInboxStore25(a,c);d=(d=d)!=null?(d=d.value)!=null?d.thread:d:d;if(d===null||d===void 0)return a;k=(k=(k=d)!=null?(k=k.thread_items)!=null?k.nodes:k:k)!=null?k:[];k=e!==null&&e!==void 0?k.filter(function(a){return e!==a.token}):k;var l;for(l=0;l<k.length;l++)if(this.largeNumberCompare(b("nullthrows")(f.time_stamp),b("nullthrows")(k[l].time_stamp))!==-1)break;var m=k.slice(0,l);i=(i=(i=d)!=null?(i=i.direct_story)!=null?i.unseen_count:i:i)!=null?i:0;h=(h=d)!=null?h.direct_story:h;var n=this.getInboxIGID();if(f.ig_item_type==="RAVEN_MEDIA"&&n!==f.sender_id){var o;g=g!=null?this.isRavenSeenByInbox(g,(g=(g=d)!=null?g.is_group:g)!=null?g:!1,n):!1;o=this.isRavenSeenByInbox(f,(o=(o=d)!=null?o.is_group:o)!=null?o:!1,n);if(g!==o)if(g){h={unseen_count:i-1,media_type:(n=f)!=null?(n=n.raven_media)!=null?n.media_type:n:n}}else{h={unseen_count:i+1,media_type:(o=f)!=null?(o=o.raven_media)!=null?o.media_type:o:o}}}m.push({token:f.token,time_stamp:f.time_stamp});g=Object.assign({},d.thread_items,{nodes:m.concat(k.slice(l))});n=Object.assign({},d,{thread_items:g,last_activity_at:g.nodes[0].time_stamp,direct_story:h});return this.$IGMessageInboxStore27(a,c,{thread:n})};d.$IGMessageInboxStore28=function(a,c,d,e){var f=this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c,token:b("nullthrows")(e.token)});if(d===null||d===void 0)return this.$IGMessageInboxStore27(a,f,{item:e});c=this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c,token:d});d=this.$IGMessageInboxStore25(a,c);e=b("LoadObject").withValue({item:e});d.isDeleting()&&(e=e.deleting());d=this.__setEmpty(a,b("immutable").List.of(c));return d.set(f,e)};d.getCached=function(b){return a.prototype.getCached.call(this,this.$IGMessageInboxStore21(this.$IGMessageInboxStore13(b)))};d.$IGMessageInboxStore25=function(a,c){return a.get(c)||b("LoadObject").empty()};d.__setLoading=function(b,c){__p&&__p();var d=[];for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;d.push(this.$IGMessageInboxStore21(this.$IGMessageInboxStore13(g)))}return a.prototype.__setLoading.call(this,b,d)};d.$IGMessageInboxStore17=function(a,b,c){b=this.$IGMessageInboxStore21(b);return this.$IGMessageInboxStore27(a,b,c)};d.$IGMessageInboxStore27=function(c,d,e){var f=a.prototype.getCached.call(this,d);if(e instanceof Error)return c.set(d,f.setError(e).done());else{e.inbox&&(b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(e.inbox),b("PagesManagerInboxUnifiedThreadlistAction").setInstagramLoadingError(!1));return c.set(d,f.setValue(e).removeError().done())}};d.$IGMessageInboxStore11=function(a){return JSON.stringify(a)};d.$IGMessageInboxStore21=function(a){return JSON.stringify({type:a.type,inboxID:a.inboxID,token:a.token})};d.$IGMessageInboxStore13=function(a){return JSON.parse(a)};d.getIsInitLoading=function(){return this.$IGMessageInboxStore3};d.largeNumberCompare=function(a,b){if(a.length>b.length)return 1;return a.length<b.length?-1:a===b?0:a>b?1:-1};d.convertTimestamp=function(a){return parseInt(a.slice(0,a.length-3),10)};d.getNowTimestamp=function(){return Date.now().toString()+"000"};d.setInboxIGID=function(a){this.$IGMessageInboxStore4=a};d.getInboxIGID=function(){return this.$IGMessageInboxStore4};d.getInboxID=function(){return this.$IGMessageInboxStore5};d.setInboxProfilePic=function(a){this.$IGMessageInboxStore10=a};d.getInboxProfilePic=function(){return this.$IGMessageInboxStore10};d.getItemType=function(a,b){a=this.getThreadItem(a,b).getValue();return(b=a)!=null?b.ig_item_type:b};d.$IGMessageInboxStore12=function(a){this.$IGMessageInboxStore2.get(a)||(this.$IGMessageInboxStore2.set(a,!0),this.__queueLoadAll(b("immutable").List.of(a)))};d.isMessageExpired=function(a){a=this.largeNumberCompare(a+"000",Date.now().toString());return a<0?!0:!1};d.getUnseenCountDelta=function(a,b,c){b=this.isThreadUnread(a,b);a=this.isThreadUnread(a,c);if(b===a)return 0;return b?-1:1};d.isThreadUnread=function(a,b){return!b?!1:this.hasUnseenMessage(a,b)||this.hasUnseenEphemeral(b)||this.hasMarkedUnread(b)};d.hasUnseenMessage=function(a,c){var d=this.getInboxIGID();if(d===null||d===void 0)return!1;a=c.last_seen_at.find(function(a){return a.user_id===d});if(a===null||a===void 0)return!0;c=b("nullthrows")((c=c)!=null?c.last_activity_at:c);return this.largeNumberCompare(c,b("nullthrows")(a.timestamp))===1};d.hasUnseenEphemeral=function(a){a=(a=a)!=null?(a=a.direct_story)!=null?a.unseen_count:a:a;return a===null||a===void 0||a===0?!1:!0};d.hasMarkedUnread=function(a){a=(a=a)!=null?a.is_read:a;return a===null||a===void 0||a===!1?!0:!1};d.isRavenSeenByInbox=function(a,b,c){var d;if(c===null||c===void 0)return!1;d=(d=(d=a)!=null?(d=d.raven_media)!=null?d.seen_count:d:d)!=null?d:0;a=(a=(a=a)!=null?(a=a.raven_media)!=null?a.seen_user_ids:a:a)!=null?a:[];if(b)return a.some(function(a){return a===c});else return d>0};d.getLocallyUpdatedUnreadCount=function(a){__p&&__p();a===void 0&&(a=!1);if(this.$IGMessageInboxStore5==null)return null;var c=b("LoadObject").empty(),d=Boolean(this.$IGMessageInboxStore8),e=Boolean(this.$IGMessageInboxStore9);c=this.getInbox(b("nullthrows")(this.$IGMessageInboxStore5),this.$IGMessageInboxStore6,null,this.$IGMessageInboxStore7,d,e,null,a);if(c.hasValue()){return(d=c.getValue())!=null?d.unseen_count:d}a=c.hasError()?(e=c.getError())!=null?e.message:e:null;b("PagesManagerInboxUnifiedThreadlistAction").setInstagramLoadingError(c.hasError());a!=null&&b("FBLogger")("pages_messaging_www").warn("Encounter error when loading IG inbox for updating unread count: %s",a);return null};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("IGMessageDataDispatcher"))}),null);
__d("PagesCommsInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setCustomerID=function(a){this.$1.customer_id=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFunnel=function(a){this.$1.funnel=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setMessagingPlatform=function(a){this.$1.messaging_platform=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setStatus=function(a){this.$1.status=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={client_time:!0,customer_id:!0,event:!0,funnel:!0,message_id:!0,messaging_platform:!0,page_id:!0,status:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PageInstagramDirectSyncProtocolTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PageInstagramDirectSyncProtocolLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PageInstagramDirectSyncProtocolLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PageInstagramDirectSyncProtocolLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setInstagramUserID=function(a){this.$1.instagram_user_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={event:!0,instagram_user_id:!0,page_id:!0,session_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("IGMessageConnectionUtils",["InstagramDirectMessageEventStream"],(function(a,b,c,d,e,f){"use strict";e.exports={processInstagramMessageEventStream:function(a,c,d,e,f){e===void 0&&(e=null);f===void 0&&(f=!1);var g=b("InstagramDirectMessageEventStream").getForFBID(a).getLatestIrisSeqID();d!=null&&parseInt(d.sync_sequence_id,10)>g&&b("InstagramDirectMessageEventStream").getForFBID(a).onInboxLoad(parseInt(d.sync_sequence_id,10),a,c,e,null,f)}}}),null);
__d("SUILiveRailThemeDEPRECATED",["cssVar","Icon.atlas","React","SUIAtlasIcon.react","SUITheme","SUITypeStyle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={black:"#000000",blackOpacity40:"rgba(0, 0, 0, .4)",neutral80:"#303030",neutral72:"#464646",neutral50:"#808080",neutral30:"#B3B3B3",neutral15:"#D8D8D8",neutral06:"#EEEEEE",neutral03:"#F6F6F6",neutral02:"#F9F9F9",white:"#FFFFFF",green:"#88C55C",greenTint85:"#EDF6E6",greenTint50:"#C3E2AD",greenShade10:"#7AB052",greenShade25:"#659344",blue:"#5590CC",blueTint85:"#E5EEF7",blueTint50:"#AAC7E5",blueShade10:"#4C81B7",blueShade25:"#3F6B98",orange:"#F05442",orangeTint85:"#FCE5E2",orangeTint50:"#F6A8A0",orangeShade10:"#D74A3B",orangeShade25:"#B33E31",yellow:"#FDCC50",yellowTint85:"#FEF7E4",yellowTint50:"#FEE4AA",yellowShade10:"#E3B747",yellowShade25:"#BE983C",purple:"#9977BB",purpleTint85:"#EFEAF4",purpleTint50:"#CCBBDD",purpleShade10:"#896AA8",purpleShade25:"#72598C"};c={type40:new(a=b("SUITypeStyle"))({fontSize:"40px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"300"}),type32:new a({fontSize:"32px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"300"}),type32Value:new a({fontSize:"32px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"300"}),type24:new a({fontSize:"24px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"600"}),type24Value:new a({fontSize:"24px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"600"}),type16:new a({fontSize:"16px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12:new a({fontSize:"12px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12Form:new a({fontSize:"12px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12Label:new a({fontSize:"12px",fontWeight:"normal",textTransform:"uppercase",color:"#808080",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12Toast:new a({fontSize:"12px",fontWeight:"normal",color:"#FFFFFF",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type11:new a({fontSize:"11px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type11Bold:new a({fontSize:"11px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"700"})};d=function(a){return b("React").jsx(b("SUIAtlasIcon.react"),babelHelpers["extends"]({},a,{colorDefault:i.neutral50,colorDisabled:i.neutral15,colorHover:i.neutral72,name:"delete"}))};f=function(a){return b("React").jsx(b("SUIAtlasIcon.react"),babelHelpers["extends"]({},a,{colorDefault:i.neutral15,colorDisabled:i.neutral30,colorHover:i.neutral06,name:"delete"}))};d={SUIButton:{height:{normal:32,"short":32,tall:48},padding:{normal:{button:"16px",icon:"6px",onlyIcon:"19px"},"short":{button:"16px",icon:"6px",onlyIcon:"19px"},tall:{button:"16px",icon:"6px",onlyIcon:"19px"}},typeStyle:c.type12,use:{confirm:{active:{background:i.blueShade25,borderColor:i.blueShade25,color:i.white},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.blueShade10,borderColor:i.blueShade10,color:i.white},normal:{background:i.blue,borderColor:i.blue,color:i.white}},"default":{active:{background:i.neutral06,borderColor:i.neutral15,color:i.neutral72},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.neutral03,borderColor:i.neutral15,color:i.neutral72},normal:{background:i.white,borderColor:i.neutral15,color:i.neutral72}},special:{active:{background:i.orange,borderColor:i.orange,color:i.white},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.orangeShade10,borderColor:i.orangeShade10,color:i.white},normal:{background:i.orangeShade25,borderColor:i.orangeShade25,color:i.white}},flat:{active:{background:i.neutral06,borderColor:i.neutral15,color:i.neutral72},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.neutral03,borderColor:i.neutral15,color:i.neutral72},normal:{background:i.white,borderColor:i.neutral15,color:i.neutral72}},flatWhite:{active:{background:i.neutral06,borderColor:i.neutral15,color:i.neutral72},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.neutral03,borderColor:i.neutral15,color:i.neutral72},normal:{background:i.white,borderColor:i.neutral15,color:i.neutral72}}}},SUIButtonIcon:{colorConfirm:i.blueTint50,colorDefault:i.neutral50,colorDisabled:i.white,colorSpecial:i.orangeTint50,defaultSize:18,iconComponent:g=b("SUIAtlasIcon.react")},SUICardDEPRECATED:{colors:{background:i.white,border:i.neutral06,footerBackground:i.neutral02,innerBorder:i.neutral15},typeStyles:{content:c.type12,footer:c.type12,header:c.type16}},SUIThreeStateCheckboxInput:{activeCheckboxBackgroundColor:i.white,activeCheckboxBorderColor:i.blueTint50,checkboxBackgroundColor:i.white,checkboxBorderColor:i.neutral15,checkedIcon:(h=b("React")).jsx(g,{colorDefault:i.neutral72,name:"check",size:14}),disabledCheckboxBackgroundColor:i.neutral15,disabledLabelColor:i.neutral30,labelColor:i.neutral72,partiallyCheckedIcon:h.jsx(g,{colorDefault:i.neutral72,name:"dash",size:14}),typeStyle:c.type12},SUICloseButton:{dark:{large:d,small:d},light:{large:f,small:f},iconSize:{large:20,small:14}},SUICustomPopover_DEPRECATED:{backgroundColor:i.white,borderColor:i.neutral15,borderHighlightColor:i.green,color:i.neutral72},SUITooltip:{backgroundColor:i.neutral80,color:i.white,showArrow:!0,typeStyle:babelHelpers["extends"]({},c.type12,{WebkitFontSmoothing:"auto"})},SUIDateInput:{inputIcon:h.jsx(g,{colorDefault:i.neutral30,name:"calendarMonth",size:24}),layerBackgroundColor:i.white,layerBorderColor:i.neutral15},SUICalendarPager:{dayColor:i.neutral72,dayDisabledColor:i.neutral30,dayNameColor:i.neutral30,gridBorderColor:i.neutral15,pagerBackgroundColor:i.neutral03,pagerBorderColor:i.neutral06,rangeBackgroundColor:i.neutral15,selectedBackgroundColor:i.blueTint50,typeStyle:c.type12},SUIDateTimeRangePicker:{backgroundColor:i.white,borderColor:i.neutral15,typeStyle:c.type12},SUIError:{error:{borderColor:i.orange,icon:h.jsx(g,{colorDefault:i.orange,name:"warning",size:24})},warning:{borderColor:i.yellow,icon:h.jsx(g,{colorDefault:i.yellow,name:"warning",size:24})}},SUIFileSelector:{backgroundColor:{"default":i.white,hovering:i.neutral03},borderColor:{"default":i.neutral15,error:i.orange},typeStyles:{content:c.type12,header:c.type24}},SUIFormRow:{childrenText:c.type12,emphasizedBackgroundColor:i.neutral06,labelText:c.type12,positions:{helpPosition:"11px",requiredPosition:"16px",requiredPositionWithHelp:"32px"},requiredColor:i.orange},SUIHelpMessage:{icon:h.jsx(g,{name:"information",style:{color:i.neutral30}})},SUIHighlightedText:{backgroundColor:i.greenTint50},SUIInlineTypeahead:{dividerBorderColor:i.neutral15,searchIcon:h.jsx(g,{colorDefault:i.neutral50,name:"search"})},SUILoadingBar:{backgroundColor:i.orange,movingColor:i.orangeTint50},SUILink:{hoverColor:i.blueShade25,normalColor:i.blue},SUIModalDEPRECATED:{margin:24},SUIModalBackgroundDEPRECATED:{backgroundColor:i.blackOpacity40},SUIModalCardDEPRECATED:{boxShadow:"0px 1px 0px 0px rgba(0, 0, 0, 0.10)",colors:{background:i.neutral02,border:i.neutral06,footerBackground:i.white,headerBackground:i.white,innerBorder:i.neutral15},fullWidthFooterDivider:!0,padding:{contentLightPadding:{paddingBottom:"8px",paddingLeft:"24px",paddingRight:"24px",paddingTop:"8px"},contentNormalPadding:{paddingBottom:"24px",paddingLeft:"24px",paddingRight:"24px",paddingTop:"24px"},footer:{paddingBottom:"0",paddingLeft:"24px",paddingRight:"8px",paddingTop:"0"},header:{paddingBottom:"0",paddingLeft:"24px",paddingRight:"8px",paddingTop:"0"}},typeStyles:{content:c.type12,footer:c.type16,header:c.type16}},SUINameCell:{description:{color:i.neutral72,typeStyle:c.type11},height:48},SUINestedTable:{borderColor:i.neutral15,evenBackgroundColor:i.white,loadingBackgroundColor:i.neutral03,loadingColor:i.neutral30,oddBackgroundColor:i.neutral02,rowIconClosedName:"chevronRight",rowIconComponent:b("Icon.atlas"),rowIconOpenName:"chevronDown",textColor:i.neutral72,textStyle:c.type12},SUINotice:{textStyle:c.type12Form,type:{error:{icon:h.jsx(g,{colorDefault:i.white,name:"warning"}),iconBackgroundColor:i.orange,messageBackgroundColor:i.white,messageBorderColor:i.neutral15},information:{icon:h.jsx(g,{colorDefault:i.white,name:"information-open"}),iconBackgroundColor:i.blue,messageBackgroundColor:i.white,messageBorderColor:i.neutral15},success:{icon:h.jsx(g,{colorDefault:i.white,name:"check"}),iconBackgroundColor:i.blue,messageBackgroundColor:i.white,messageBorderColor:i.neutral15},warning:{icon:h.jsx(g,{colorDefault:i.white,name:"warning"}),iconBackgroundColor:i.orange,messageBackgroundColor:i.white,messageBorderColor:i.neutral15}}},SUIRadioList:{activeBackgroundColor:"#dddfe2",activeBorderColor:"#bec2c9",activeDotColor:"#4b4f56",backgroundColor:"#f6f7f9",borderColor:"#dddfe2",disabledBackgroundColor:"#f6f7f9",disabledBorderColor:"#dddfe2",disabledDotColor:"#dddfe2",disabledTypeColor:i.neutral30,dotColor:"#4b4f56",enabledTypeColor:i.neutral72,typeStyle:c.type12},SUISearchableSelector:{disabledSubtitleTypeStyle:c.type12,disabledTitleTypeStyle:c.type12,dropdownBackgroundColor:i.white,dropdownBorderColor:i.neutral15,headerBackgroundColor:i.white,headerTypeStyle:c.type12,subtitleColor:i.neutral30,subtitleTypeStyle:c.type12,titleTypeStyle:c.type12},SUISearchInput:{cancelIcon:h.jsx(g,{colorDefault:i.neutral15,colorHover:i.neutral50,name:"delete"}),searchIcon:h.jsx(g,{colorDefault:i.neutral15,colorFocused:i.neutral50,name:"search",size:24})},SUISectionHeading:{borderColor:i.neutral15,color:i.neutral50,typeStyle:c.type24},SUISelector:{backgroundColor:i.white,borderColor:i.neutral15,boxShadow:"none"},SUISelectorButton:{use:{"default":{chevron:h.jsx(g,{colorDefault:i.neutral72,colorDisabled:i.neutral30,name:"chevronDown",size:12})}},padding:"12px"},SUISelectorOption:{activeBackgroundColor:i.blueTint85,activeColor:i.neutral72,color:i.neutral72,descriptionColor:i.neutral50,descriptionSelectedColor:i.neutral15,disabledBackgroundColor:i.neutral15,disabledColor:i.white,highlightedBackgroundColor:i.blueTint85,highlightedColor:i.neutral72,padding:{bottom:"8px",left:"12px",right:"24px",top:"8px"},paddingWhenNoValue:{bottom:"8px",left:"12px",right:"24px",top:"8px"},selectedBackgroundColor:i.blue,selectedColor:i.white,selectedTypeStyle:c.type12,typeStyle:c.type12},SUISelectorSeparator:{color:i.neutral15,margin:{bottom:"12px",left:"12px",right:"12px",top:"12px"}},SUISpinner:{activeColor:i.neutral50,backgroundColor:i.neutral15,darkActiveColor:i.neutral50,darkBackgroundColor:i.neutral15,sizes:{large:{border:2,diameter:20},small:{border:1.5,diameter:12}}},SUIStatusIndicator:{colors:{active:i.green,error:i.orange,empty:i.white,inactive:i.neutral15,warning:i.yellow},size:{border:2,diameter:10}},SUITabGroup:{},SUITabItem:{activeBorderBottomColor:i.neutral72,activeTypeStyle:c.type12,disabledColor:i.neutral30,height:44,hoverBackgroundColor:i.neutral03,iconMargin:4,subtextTypeStyle:c.type11,typeStyle:c.type12},SUITableDEPRECATED:{cellPadding:8,colors:{cell:i.neutral72,cellBorder:i.neutral03,cellErrorBackground:i.orangeTint85,cellHoverBackground:i.neutral06,cellModifiedBackground:i.neutral15,cellSelectedBackground:i.blueTint85,cellSelectedHoverBackground:i.neutral06,cellWarningBackground:i.yellowTint85,error:i.orange,heading:i.neutral72,headingBackground:i.white,headingRule:i.neutral15,highlight:i.blue,loading:i.neutral30,loadingBackground:i.neutral03,noItemsMessage:i.neutral72,rowBackground:i.white,rowStripe:i.neutral02,text:i.neutral72,warning:i.yellow},minimumViewportHeightForStickyHeader:"480px",textStyles:{cell:c.type12,heading:c.type12,table:c.type12}},SUITextArea:{disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},enabled:{background:i.white,borderColor:i.neutral15},focusedBorderColor:"#4080ff",placeholderColor:i.neutral30,placeholderColorFocused:i.neutral15,typeStyle:c.type12Form},SUITextInput:{characterCountTypeStyle:new a({color:i.neutral30,fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif",fontSize:"11px",fontWeight:"normal"}),disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},enabled:{background:i.white,borderColor:i.neutral15},errorIconMargin:"3px",focusedBorderColor:"#4080ff",height:32,maxLengthHighlightColor:"rgba(250, 62, 62, 0.3)",placeholderColor:i.neutral30,placeholderColorFocused:i.neutral15,typeStyle:c.type12Form},SUIToast:{errorBackgroundColor:i.orange,errorIcon:h.jsx(g,{colorDefault:i.white,name:"warning"}),informationBackgroundColor:i.neutral72,informationIcon:h.jsx(g,{colorDefault:i.white,name:"information"}),isSpinnerDark:!0,messageBackgroundColor:i.neutral72,messageBorderColor:i.neutral72,successBackgroundColor:i.neutral72,successIcon:h.jsx(g,{colorDefault:i.white,name:"check"}),typeStyle:c.type12Toast,warningBackgroundColor:i.yellow,warningIcon:h.jsx(g,{colorDefault:i.white,name:"warning"})},SUIToggle:{height:26,off:{hover:{backgroundColor:i.neutral30,color:i.neutral72},normal:{backgroundColor:i.neutral15,color:i.neutral50}},on:{hover:{backgroundColor:i.neutral72,color:i.neutral02},normal:{backgroundColor:i.neutral50,color:i.neutral02}},switchColor:i.white,typeStyle:c.type12},SUIToggleButtonGroup:{selected:{backgroundColor:i.neutral50,color:i.white}},SUIToken:{backgroundColor:i.blue,color:i.white,typeStyle:c.type12,closeButtonShade:"light"},SUITokenizer:{disabled:{backgroundColor:i.neutral06,borderColor:i.neutral15},enabled:{backgroundColor:i.white,borderColor:i.neutral15},errorIconMarginRight:"0px",typeaheadInput:{typeStyle:c.type12}},SUITokenizerItem:{disabled:{color:i.neutral30,subtitleColor:i.neutral15},highlighted:{backgroundColor:i.blueTint85,color:i.neutral80,subtitleColor:i.neutral50},normal:{color:i.neutral72,subtitleColor:i.neutral50},remove:{disabledIcon:h.jsx(g,{colorDefault:i.neutral30,name:"delete",size:14}),highlightedIcon:h.jsx(g,{colorDefault:i.neutral80,name:"delete",size:14}),normalIcon:h.jsx(g,{colorDefault:i.neutral72,name:"delete",size:14}),selectedIcon:h.jsx(g,{colorDefault:i.white,name:"delete",size:14})},selected:{backgroundColor:i.blue,color:i.white,disabledIcon:h.jsx(g,{colorDefault:i.neutral30,name:"check",size:14}),highlightedIcon:h.jsx(g,{colorDefault:i.neutral80,name:"check",size:14}),isIconShownForSingleSelection:!1,normalIcon:h.jsx(g,{colorDefault:i.neutral72,name:"check",size:14}),selectedIcon:h.jsx(g,{colorDefault:i.white,name:"check",size:14}),subtitleColor:i.blueTint50}},SUITokenizerItemList:{backgroundColor:i.white,borderColor:i.neutral15,categoryHeader:{borderColor:i.neutral06,typeStyle:c.type16},typeStyle:c.type12},SUITypeahead:{input:{backgroundColor:i.white,borderColor:i.neutral15,errorBorderColor:i.orange,focusedBorderColor:"#4080ff",typeStyle:c.type12Form,height:32},disabled:{backgroundColor:i.neutral15,borderColor:i.neutral15,color:i.white},dropdown:{backgroundColor:i.white,borderColor:i.neutral06,boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.10)",itemPadding:{bottom:"8px",left:"12px",right:"12px",top:"8px"}},highlight:{backgroundColor:i.blueTint85}},SUIHorizontalLayout:{margin:8}};f=new(b("SUITheme"))({id:"liverail",components:d});e.exports=f}),null);
__d("LDPSendAvailabilityDialogRoot.react",["JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("LDPSendAvailabilityViewRoot.react").__setRef("LDPSendAvailabilityDialogRoot.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=babelHelpers["extends"]({},this.props);return b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(g,babelHelpers["extends"]({},a))})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesManagerInboxComposerSendAvailabilityButton.react",["cx","fbt","LDPSendAvailabilityDialogRoot.react","Link.react","PagesInboxThreadActionSystemDispatcher","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogShown:!1},c.handleClick=function(){c.setState({dialogShown:!0})},c.handleToggleDialog=function(a){c.setState({dialogShown:a})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$1=function(a){a&&b("PagesInboxThreadActionSystemDispatcher").dispatch(!0)};d.renderSendAvailabilityDialog=function(){var a=this;return!this.state.dialogShown?null:b("React").jsx(b("LDPSendAvailabilityDialogRoot.react"),{causalElementRef:function(){return a},onToggle:this.handleToggleDialog,onSubmitCompleted:this.$1,pageID:this.props.pageID,referrer:"PMA Admin Booking Composer",shown:this.state.dialogShown,userID:this.props.recipientID})};d.render=function(){var a=h._("Send Availability");return b("React").jsxs("div",{children:[b("React").jsx(b("Link.react"),{"aria-label":this.props.showTooltip?a:null,className:"_2em3","data-hover":"tooltip","data-tooltip-align":"right","data-tooltip-content":this.props.showTooltip?a:null,onClick:this.handleClick,children:b("React").jsx("i",{className:"_2em5"})}),this.renderSendAvailabilityDialog()]})};return c}(b("React").Component);e.exports=a}),null);
__d("CRMEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBusinessPresenceID=function(a){this.$1.business_presence_id=a;return this};c.setCrmReminderID=function(a){this.$1.crm_reminder_id=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsServerLog=function(a){this.$1.is_server_log=a;return this};c.setPageContactID=function(a){this.$1.page_contact_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReferrerUIComponent=function(a){this.$1.referrer_ui_component=a;return this};c.setReferrerUISurface=function(a){this.$1.referrer_ui_surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUIComponent=function(a){this.$1.ui_component=a;return this};c.setUISurface=function(a){this.$1.ui_surface=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={business_presence_id:!0,crm_reminder_id:!0,error_message:!0,error_trace:!0,event:!0,is_server_log:!0,page_contact_id:!0,page_id:!0,referrer_ui_component:!0,referrer_ui_surface:!0,time:!0,ui_component:!0,ui_surface:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerAdsConversionFunnelTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionFunnelLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionFunnelLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionFunnelLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAuthFlag=function(a){this.$1.auth_flag=a;return this};c.setClassifier=function(a){this.$1.classifier=a;return this};c.setConsumerID=function(a){this.$1.consumer_id=a;return this};c.setConversionType=function(a){this.$1.conversion_type=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setEventSubtype=function(a){this.$1.event_subtype=a;return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setPageCountry=function(a){this.$1.page_country=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setRadioType=function(a){this.$1.radio_type=a;return this};c.setRawClientTime=function(a){this.$1.raw_client_time=a;return this};c.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={auth_flag:!0,classifier:!0,consumer_id:!0,conversion_type:!0,country:!0,event_subtype:!0,event_type:!0,name:!0,page_country:!0,page_id:!0,radio_type:!0,raw_client_time:!0,sampling_frequency:!0,time:!0,weight:!0};e.exports=a}),null);
__d("PagesManagerInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAutomatedResponseTriggerType=function(a){this.$1.automated_response_trigger_type=a;return this};c.setBroadcastAudience=function(a){this.$1.broadcast_audience=a;return this};c.setBroadcastMessageFormat=function(a){this.$1.broadcast_message_format=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setFirstPayloadTime=function(a){this.$1.first_payload_time=a;return this};c.setFolder=function(a){this.$1.folder=a;return this};c.setHadError=function(a){this.$1.had_error=a;return this};c.setHref=function(a){this.$1.href=a;return this};c.setIsCached=function(a){this.$1.is_cached=a;return this};c.setIsInboxRedesignWithSideNav=function(a){this.$1.is_inbox_redesign_with_side_nav=a;return this};c.setItemsCount=function(a){this.$1.items_count=a;return this};c.setLoadTime=function(a){this.$1.load_time=a;return this};c.setMessage=function(a){this.$1.message=a;return this};c.setModuleName=function(a){this.$1.module_name=a;return this};c.setNuxID=function(a){this.$1.nux_id=a;return this};c.setPageCommItemID=function(a){this.$1.page_comm_item_id=a;return this};c.setPageCommItemStatus=function(a){this.$1.page_comm_item_status=a;return this};c.setPageCommSearch=function(a){this.$1.page_comm_search=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setScreenHeight=function(a){this.$1.screen_height=a;return this};c.setScreenWidth=function(a){this.$1.screen_width=a;return this};c.setStackTrace=function(a){this.$1.stack_trace=a;return this};c.setThreadToken=function(a){this.$1.thread_token=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTimeSinceLoad=function(a){this.$1.time_since_load=a;return this};c.setTraceID=function(a){this.$1.trace_id=a;return this};c.setUsesStreamingPagination=function(a){this.$1.uses_streaming_pagination=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setViewMode=function(a){this.$1.view_mode=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={automated_response_trigger_type:!0,broadcast_audience:!0,broadcast_message_format:!0,event_name:!0,first_payload_time:!0,folder:!0,had_error:!0,href:!0,is_cached:!0,is_inbox_redesign_with_side_nav:!0,items_count:!0,load_time:!0,message:!0,module_name:!0,nux_id:!0,page_comm_item_id:!0,page_comm_item_status:!0,page_comm_search:!0,page_comm_search_type:!0,page_id:!0,platform:!0,screen_height:!0,screen_width:!0,stack_trace:!0,thread_token:!0,time:!0,time_since_load:!0,trace_id:!0,uses_streaming_pagination:!0,vc:!0,view_mode:!0,weight:!0};e.exports=a}),null);
__d("PagesMessagingInboxActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setInboxAction=function(a){this.$1.inbox_action=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={inbox_action:!0,page_comm_search_type:!0,platform:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PagesMessagingPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setExceptionCode=function(a){this.$1.exception_code=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPerfTime=function(a){this.$1.perf_time=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setStack=function(a){this.$1.stack=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setThreadOffset=function(a){this.$1.thread_offset=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event_name:!0,exception_code:!0,exception_message:!0,page_id:!0,perf_time:!0,platform:!0,stack:!0,thread_id:!0,thread_offset:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ServicesLeadGenBookableTasksSurveyTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdditionalData=function(a){this.$1.additional_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setCurrentView=function(a){this.$1.current_view=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOtherBookableTasks=function(a){this.$1.other_bookable_tasks=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReferrer=function(a){this.$1.referrer=a;return this};c.setSelectedBookableTasks=function(a){this.$1.selected_bookable_tasks=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setServicesCategory=function(a){this.$1.services_category=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={additional_data:!0,current_view:!0,error_message:!0,error_trace:!0,event:!0,other_bookable_tasks:!0,page_id:!0,referrer:!0,selected_bookable_tasks:!0,services_category:!0,session_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercuryShareLinkUploader",["ArbiterMixin","AsyncRequest","CSS","DOM","Event","Form","URLScraper","isEmpty","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.__initialize.apply(babelHelpers.assertThisInitialized(b),arguments);return b}var d=c.prototype;d.__initialize=function(a,c,d,e,f){this.$MercuryShareLinkUploader1=a,this.$MercuryShareLinkUploader2=c,this.$MercuryShareLinkUploader3=d,this.$MercuryShareLinkUploader4=f,this.$MercuryShareLinkUploader5=!1,this.$MercuryShareLinkUploader6=null,this.$MercuryShareLinkUploader7=null,b("Event").listen(e,"click",this.close.bind(this)),b("Event").listen(f,"keyup",function(){f.value.length||this.$MercuryShareLinkUploader8.enable()}.bind(this)),this.$MercuryShareLinkUploader8=new(b("URLScraper"))(f),this.$MercuryShareLinkUploader8.subscribe("match",function(a,b){this.loadShare(b&&b.url)}.bind(this))};d.getAttachData=function(){return this.loadAttachData(this.$MercuryShareLinkUploader5,this.$MercuryShareLinkUploader1,this.$MercuryShareLinkUploader4)};d.getShareDataFromStage=function(a,c){__p&&__p();a=b("Form").serialize(c);c=a.attachment&&a.attachment.params;if(!c)return null;if(c instanceof Object){var d=[];d.push(c[0]);d.push(c[1]);c=d}return{params:c,type:a.attachment.type}};d.loadAttachData=function(a,c,d){__p&&__p();if(!a)return null;a=b("Form").serialize(c);c=a.attachment&&a.attachment.params;var e=a.attachment&&a.attachment.type;a=a.link_metrics?a.link_metrics.no_image:!0;if(!c||(g||(g=b("isEmpty")))(c)||!e)return null;d=d.value;if(d.indexOf(c.url)===-1)return{share_params:c,share_type:e};return!c.summary&&!c.favicon&&a&&c.title&&c.url&&c.url.substr(0,c.title.length)===c.title?null:{share_params:c,share_type:e}};d.check=function(){this.$MercuryShareLinkUploader8.check()};d.close=function(){this.$MercuryShareLinkUploader9(),this.$MercuryShareLinkUploader8.disable(),this.inform("closed")};d.clear=function(){this.$MercuryShareLinkUploader9(),this.$MercuryShareLinkUploader8.enable()};d.enable=function(){this.$MercuryShareLinkUploader8.enable()};d.disable=function(){this.$MercuryShareLinkUploader8.disable()};d.loadShare=function(a){this.$MercuryShareLinkUploader6=a,this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort(),this.$MercuryShareLinkUploader7=new(b("AsyncRequest"))().setMethod("POST").setURI("/ajax/share_scrape.php").setData({u:a}).setHandler(this.$MercuryShareLinkUploader10.bind(this).bind(null,a)).setStatusElement(this.$MercuryShareLinkUploader3),this.$MercuryShareLinkUploader7.send(),this.inform("link-detected")};d.$MercuryShareLinkUploader10=function(a,c){__p&&__p();if(this.$MercuryShareLinkUploader6!==a)return;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;b("CSS").show(this.$MercuryShareLinkUploader1);b("DOM").empty(this.$MercuryShareLinkUploader2);b("DOM").setContent(this.$MercuryShareLinkUploader2,c.payload);this.$MercuryShareLinkUploader5=!0;if(!this.getAttachData()){this.close();return}};d.$MercuryShareLinkUploader9=function(){b("CSS").hide(this.$MercuryShareLinkUploader1),this.$MercuryShareLinkUploader5=!1,this.$MercuryShareLinkUploader6=null,this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort(),this.$MercuryShareLinkUploader7=null,this.$MercuryShareLinkUploader8.reset()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ChatShareLinkUploader",["AsyncRequest","CSS","DOM","Event","MercuryAttachmentTemplates","MercuryShareLinkUploader","URLScraper","XShareScrapeAsyncController"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__initialize=function(a,c,d){this.$ChatShareLinkUploader1=a,this.$ChatShareLinkUploader2=c,this.$ChatShareLinkUploader3=d,this.$ChatShareLinkUploader4=!1,this.$ChatShareLinkUploader5=null,this.$ChatShareLinkUploader6=!1,b("Event").listen(c,"keyup",function(){this.getInputValue().length||this.$ChatShareLinkUploader7.enable()}.bind(this)),this.$ChatShareLinkUploader7=new(b("URLScraper"))(c,null),this.$ChatShareLinkUploader7.subscribe("match",function(a,b){this.loadShare(b&&b.url)}.bind(this)),this.$ChatShareLinkUploader8=1337,this.$ChatShareLinkUploader9=null};d.getInputValue=function(){return this.$ChatShareLinkUploader2.value};d.getAttachData=function(){return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2)};d.getShareData=function(){return!this.$ChatShareLinkUploader4?null:this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1)};d.close=function(){this.$ChatShareLinkUploader10(),this.$ChatShareLinkUploader7.disable(),this.inform("closed")};d.clear=function(){this.$ChatShareLinkUploader10(),this.$ChatShareLinkUploader7.enable()};d.$ChatShareLinkUploader10=function(){var a=this.$ChatShareLinkUploader9;delete this.$ChatShareLinkUploader9;a&&(b("DOM").remove(a),this.inform("dom-updated"));this.$ChatShareLinkUploader11();this.$ChatShareLinkUploader4=!1;this.$ChatShareLinkUploader6=!1;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader7&&this.$ChatShareLinkUploader7.reset()};d.loadShareFromParams=function(a,c){this.$ChatShareLinkUploader6=!0,this.$ChatShareLinkUploader12(new(b("AsyncRequest"))().setMethod("POST").setURI("/ajax/share_params.php").setData({chat:!0,share_type:a,share_params:c}))};d.__getLoadShareURI=function(){return b("XShareScrapeAsyncController").getURIBuilder().getURI()};d.loadShare=function(a,c){this.$ChatShareLinkUploader12(new(b("AsyncRequest"))(this.__getLoadShareURI()).setMethod("POST").setData({chat:!0,extra_params:JSON.stringify(c),u:a}),a)};d.loadedFromFeed=function(){return this.$ChatShareLinkUploader6};d.$ChatShareLinkUploader11=function(){return++this.$ChatShareLinkUploader8};d.$ChatShareLinkUploader13=function(){return this.$ChatShareLinkUploader8};d.$ChatShareLinkUploader12=function(a,c){__p&&__p();var d=this;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var e=b("MercuryAttachmentTemplates")[":fb:mercury:share-link-row"].build();this.$ChatShareLinkUploader9&&b("DOM").remove(this.$ChatShareLinkUploader9);this.$ChatShareLinkUploader9=e.getRoot();b("Event").listen(e.getNode("closeFileUpload"),"click",function(a){d.close(),a.kill()});b("DOM").appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader9);b("CSS").show(this.$ChatShareLinkUploader1);this.inform("dom-updated");var f=this.$ChatShareLinkUploader11();this.$ChatShareLinkUploader5=a.setHandler(function(a){return d.$ChatShareLinkUploader14(f,a,c)});this.$ChatShareLinkUploader5.send();this.inform("link-detected")};d.$ChatShareLinkUploader14=function(a,c,d){__p&&__p();if(this.$ChatShareLinkUploader13()!==a)return;this.$ChatShareLinkUploader5=null;b("DOM").appendContent(this.$ChatShareLinkUploader9,c.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=!0;this.inform("share-loaded");if(!this.getAttachData()){this.close();return}b("CSS").addClass(this.$ChatShareLinkUploader9,"done")};return c}(b("MercuryShareLinkUploader"));e.exports=a}),null);
__d("ChatFileUploaderMixin",["React","SubscriptionsHandler","prop-types"],(function(a,b,c,d,e,f){__p&&__p();c={propTypes:{attachmentsShelf:(a=b("prop-types")).object,onFileUploaderMounted:a.func,onUploadFinished:a.func,onUpdateAttachmentsShelf:a.func,onSubmit:a.func},setUpSubscriptionsHandler:function(a){this._uploader=a,this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(this._uploader.subscribe(["all-uploads-completed","upload-canceled"],this._handleUploadFinished),this._uploader.subscribe("dom-updated",this._handleUpdateAttachmentsShelf),this._uploader.subscribe("submit",this._handleSubmit)),this.props.onFileUploaderMounted(this._uploader)},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),this.props.uploaderIsFromHigherLevel||this._uploader&&this._uploader.destroy()},isUploading:function(){return this._uploader.isUploading()},getAttachments:function(){return this._uploader.getAttachments()},getImageFiles:function(){return this._uploader.getImageFiles()},getVideoFiles:function(){return this._uploader.getVideoFiles()},getAudioFiles:function(){return this._uploader.getAudioFiles()},getFiles:function(){return this._uploader.getFiles()},removeAttachments:function(){return this._uploader.removeAttachments()},_handleUploadFinished:function(){if(this.props.onUploadFinished){var a;(a=this.props).onUploadFinished.apply(a,arguments)}},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf){var a;(a=this.props).onUpdateAttachmentsShelf.apply(a,arguments)}},_handleSubmit:function(){if(this.props.onSubmit){var a;(a=this.props).onSubmit.apply(a,arguments)}}};e.exports=c}),null);
__d("MercuryLWARenderer",["MercuryConfig","MessengerLightweightActionUtils","MessengerTextWithEntities.react","React","TextWithEntities.react"],(function(a,b,c,d,e,f){"use strict";a={renderCollapsedText:function(a){var c=null;b("MercuryConfig").MessengerNewEmojiGK?c=b("React").jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("MessengerLightweightActionUtils").getCollapsedLWAText(a)}):c=b("React").jsx(b("TextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("MessengerLightweightActionUtils").getCollapsedLWAText(a)});return b("React").jsx("span",{children:c})}};e.exports=a}),null);
__d("MNCommerceLoggingConstants",[],(function(a,b,c,d,e,f){a={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:"checkout_order_config",SHIPMENT:"shipment",RECEIPT:"receipt",UNLINK:"unlink",UNLINK_ERROR:"unlink_error",MANAGE:"manage"}};e.exports=a}),null);
__d("MNCommercePromotionStateActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={stateLoaded:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.LOADED,state:a})},stateLoadError:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR,pageID:a})},stateReload:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD,pageID:a})}};e.exports=a}),null);
__d("MNCommercePromotionBlockDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionBlockController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.block=function(a,c){a=b("XMNCommercePromotionBlockController").getURIBuilder().setString("page_id",a).setString("type",c).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};c.$1=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateReload(a)};c.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};return a}();e.exports=new a()}),null);
__d("MNCommerceButton.react",["MessengerDialogButton.react","MessengerEnvironment","React","XUIButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogButton.react"):b("XUIButton.react"),d=this.props.type;d||(d=this.props.type==="confirm"?"primary":"secondary");a=a?"default":this.props.use;d=babelHelpers["extends"]({},this.props,{type:d,use:a});return b("React").jsx(c,babelHelpers["extends"]({},d,{children:this.props.children}))};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceAttachmentConstants",[],(function(a,b,c,d,e,f){a={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:"subTotal",SHIPPING:"shippingCost",TAX:"tax",TOTAL:"totalCost"}};e.exports=a}),null);
__d("MNCommerceDialog.react",["cx","LayerFadeOnHide","LayerHideOnEscape","MessengerDialog.react","MessengerEnvironment","MNCommerceAttachmentConstants","React","XUIDialog.react","createReactClass_DEPRECATED","emptyFunction","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";a=b("createReactClass_DEPRECATED")({displayName:"MNCommerceDialog",propTypes:{onToggle:b("prop-types").func,shown:b("prop-types").bool,width:b("prop-types").number.isRequired},getDefaultProps:function(){return{onToggle:b("emptyFunction"),repositionOnUpdate:!0,shown:!0,width:b("MessengerEnvironment").messengerui?b("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:b("MNCommerceAttachmentConstants").DIALOG.WIDTH}},componentDidUpdate:function(){this.props.repositionOnUpdate&&setTimeout(function(){this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.updatePosition()}.bind(this),0)},render:function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialog.react"):b("XUIDialog.react");return b("React").jsx(c,babelHelpers["extends"]({behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")}},this.props,{className:b("joinClasses")(this.props.className,a?"_3rx0":""),ref:"dialog",children:this.props.children}))}});e.exports=a}),null);
__d("MNCommerceDialogBody.react",["MessengerDialogBody.react","MessengerEnvironment","React","XUIDialogBody.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?b("MessengerDialogBody.react"):b("XUIDialogBody.react");return b("React").jsx(a,babelHelpers["extends"]({},this.props,{children:this.props.children}))};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceDialogTitle.react",["MessengerDialogHeaderReact.re","MessengerEnvironment","React","XUIDialogTitle.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerDialogHeaderReact.re").make;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?g:b("XUIDialogTitle.react");return b("React").jsx(a,babelHelpers["extends"]({},this.props,{children:this.props.children}))};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceDetailsDialog.react",["cx","fbt","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","React","XUIButton.react","XUISpinner.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){var a;return(a=b("React")).jsxs("div",{className:"_4y9b",children:[a.jsx("p",{className:"_4y9c",children:h._("Sorry, Something Went Wrong")}),a.jsx("p",{className:"_4y9d",children:d.props.errorMessage}),a.jsx(b("XUIButton.react"),{onClick:d.props.onTryAgain,label:h._("Try Again")})]})},d.$1=function(){return b("React").jsx("div",{className:"_4y9e",children:b("React").jsx(b("XUISpinner.react"),{background:"light",size:"large",paused:!1})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=null;this.props.loading?a=this.$1():this.props.error?a=this.$2():a=this.props.children;return b("React").jsxs(b("MNCommerceDialog.react"),{className:this.props.className,modal:!0,onToggle:this.props.onToggle,shown:this.props.shown,children:[this.$3(),b("React").jsx(b("MNCommerceDialogBody.react"),{useCustomPadding:!0,children:a})]})};d.$3=function(){return this.props.title?b("React").jsx(b("MNCommerceDialogTitle.react"),{children:this.props.title}):null};return c}(b("React").Component);a.propTypes={error:(c=b("prop-types")).object,errorMessage:c.node,loading:c.bool.isRequired,onToggle:c.func,onTryAgain:c.func,title:c.node,shown:c.bool.isRequired};a.defaultProps={shown:!1};e.exports=a}),null);
__d("MNCommerceDialogFooter.react",["cx","MessengerDialogFooter.react","MessengerEnvironment","React","XUIDialogFooter.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogFooter.react"):b("XUIDialogFooter.react"),d,e=this.props.children;a&&(d=b("React").Children.count(this.props.children),e=b("React").Children.map(this.props.children,function(a,c){return!a?null:b("React").cloneElement(a,{className:b("joinClasses")(a.props.className,"_4ec0"),type:c===0&&d===2?"secondary":"primary"})}));return b("React").jsx(c,babelHelpers["extends"]({},this.props,{children:e}))};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommercePromotionManageBlockDialog.react",["fbt","CurrentUser","Link.react","MessengerEnvironment","MessengerRadioList.react","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceBlockTypeJSInstance","prop-types","React","URI","WorkModeConfig","XUIRadioList.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerRadioList.react").Item,j=b("XUIRadioList.react").Item;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){__p&&__p();var d;d=a.call(this,b,c)||this;d.onTypeChange=function(a){d.setState({type:a})};d.$3=function(a){a=d.props;a.onToggle(!1);if(!a.onConfirmButtonClick)return;var b=a.pageID;a.onConfirmButtonClick(b,d.state.type)};d.state=d.$1();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a))};d.$1=function(a){a=a||this.props;var c=b("MNCommerceBlockTypeJSInstance").ALL;(a.isAllBlocked||a.isPromotionBlocked)&&(c=b("MNCommerceBlockTypeJSInstance").NONE);return{type:c}};d.render=function(){var a=this.props.merchantName||"";a=g._("Manage messages from {label for merchant name}",[g._param("label for merchant name",a)]);var c=g._("Cancel"),d=g._("Confirm"),e=g._("Manage Options couldn't be shown."),f=b("CurrentUser").isWorkUser()?new(h||(h=b("URI")))("https://facebook.com/help/work/1731361900459513").setSubdomain(b("WorkModeConfig").company_subdomain||""):new(h||(h=b("URI")))("https://www.facebook.com/help/389645087895231");f=b("React").jsx(b("Link.react"),{href:f,target:"_blank",children:g._("Learn More")});return b("React").jsxs(b("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:e,onToggle:this.props.onToggle,shown:this.props.shown},this.props,{children:[b("React").jsx(b("MNCommerceDialogTitle.react"),{showCloseButton:!0,children:a}),b("React").jsx(b("MNCommerceDialogBody.react"),{children:this.$2()}),b("React").jsxs(b("MNCommerceDialogFooter.react"),{leftContent:f,children:[b("React").jsx(b("MNCommerceButton.react"),{label:c,onClick:this.props.onCancelButtonClick,use:"default"}),b("React").jsx(b("MNCommerceButton.react"),{label:d,onClick:this.$3,use:"confirm"})]})]}))};d.$2=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerRadioList.react"):b("XUIRadioList.react");a=a?i:j;return b("React").jsxs(c,{selectedValue:this.state.type,onValueChange:this.onTypeChange,children:[b("React").jsx(a,{value:b("MNCommerceBlockTypeJSInstance").ALL,children:g._("Receive all messages")}),b("React").jsx(a,{value:b("MNCommerceBlockTypeJSInstance").NONE,children:g._("Turn off all messages")})]})};return c}(b("React").Component);a.propTypes={isAllBlocked:(c=b("prop-types")).bool,isPromotionBlocked:c.bool,error:c.object,loading:c.bool.isRequired,merchantName:c.string,onCancelButtonClick:c.func,onConfirmButtonClick:c.func.isRequired,pageID:c.string};e.exports=a}),null);
__d("MNCommerceCacheTimeoutLimits",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1});e.exports=a}),null);
__d("MNCommercePromotionStateDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionStateController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.fetchPromotionState=function(a){a=b("XMNCommercePromotionStateController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};c.$1=function(a){var c=a.getRequest().uri.getQueryData();c=c.page_id;a.payload.pageID=c;b("MNCommercePromotionStateActions").stateLoaded(a.payload)};c.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};return a}();e.exports=new a()}),null);
__d("MNCommercePromotionStateStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommercePromotionStateDataManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("MessengerDispatcher"))||this;c.$MNCommercePromotionStateStore1=new(b("Cache"))();return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();var c=a.type,d=a.pageID||a.state&&a.state.pageID;switch(c){case b("MNCommerceActionTypes").PROMOTION_STATE.LOADED:c=a.state;this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").withValue(c),null,b("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").empty().setError(new Error("Unable to load permissions for: "+d)),null,b("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD:d&&(this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").loading()),b("MNCommercePromotionStateDataManager").fetchPromotionState(d));this.__emitChange();break}};d.getPromotionState=function(a){a&&!this.$MNCommercePromotionStateStore1.has(a)&&(this.$MNCommercePromotionStateStore1.set(a,b("LoadObject").loading().setValue({pageID:a})),b("MNCommercePromotionStateDataManager").fetchPromotionState(a));return this.$MNCommercePromotionStateStore1.get(a)||b("LoadObject").empty()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCommercePromotionManageBlockDialogContainer.react",["MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialog.react","MNCommercePromotionStateActions","MNCommercePromotionStateStore","PureStoreBasedStateMixin","React","createReactClass_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("createReactClass_DEPRECATED")({displayName:"MNCommercePromotionManageBlockDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MNCommercePromotionStateStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getState(),c=null;a&&(c=a.pageID);var d=b("MNCommercePromotionStateStore").getPromotionState(c);return{shown:!!a,loading:d.isLoading(),pageID:c,promotionState:d.getValue(),error:d.getError()}}},render:function(){var a=this.state.promotionState;return b("React").jsx(b("MNCommercePromotionManageBlockDialog.react"),{error:this.state.error,isAllBlocked:a&&a.is_all_blocked,isPromotionBlocked:a&&a.is_promotion_blocked,loading:this.state.loading,merchantName:a&&a.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this._handleConfirmButtonClick,shown:this.state.shown})},_onToggle:function(a){a||this._hideDialog()},_onTryAgainClick:function(){b("MNCommercePromotionStateActions").stateReload(this.state.pageID)},_hideDialog:function(){b("MNCommerceDialogStateActions").hideDialog()},_handleConfirmButtonClick:function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)}});e.exports=a}),null);
__d("MNCommerceUnlinkDataManager",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.unlink=function(a,b){};return a}();e.exports=new a()}),null);
__d("MNCommerceUnlinkDialog.react",["fbt","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=g._("Cancel"),d=g._("Turn Off");return(a=b("React")).jsxs(b("MNCommerceDialog.react"),{onToggle:this.props.onToggle,shown:this.props.shown,children:[a.jsx(b("MNCommerceDialogTitle.react"),{showCloseButton:!1,children:g._("Unlink account?")}),a.jsx(b("MNCommerceDialogBody.react"),{children:a.jsx("div",{children:g._("You can turn off updates if you didn't sign up or just don't want to get them anymore.")})}),a.jsxs(b("MNCommerceDialogFooter.react"),{children:[a.jsx(b("MNCommerceButton.react"),{label:c,onClick:this.props.onCancelButtonClick,use:"default"}),a.jsx(b("MNCommerceButton.react"),{label:d,onClick:this.props.onTurnOffButtonClick,use:"confirm"})]})]})};return c}(b("React").Component);a.propTypes={onCancelButtonClick:b("prop-types").func,onTurnOffButtonClick:b("prop-types").func};e.exports=a}),null);
__d("MNCommerceUnlinkErrorDialog.react",["fbt","MNCommerceAttachmentConstants","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceErrors","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=g._("OK"),d=null,e=null;switch(this.props.errorType){case b("MNCommerceErrors").ALREADY_UNLINKED:e=b("React").jsx("div",{children:g._("Updates Are Already Off")});d=b("React").jsx("div",{children:g._("You aren't getting updates in Messenger.")});break;default:e=b("React").jsx("div",{children:g._("Couldn't Turn Off Updates")});d=b("React").jsx("div",{children:g._("Sorry, something went wrong. Please try again.")});break}return(a=b("React")).jsxs(b("MNCommerceDialog.react"),{onToggle:this.props.onToggle,shown:this.props.shown,width:b("MNCommerceAttachmentConstants").UNLINK_ERROR_DIALOG.WIDTH,children:[a.jsx(b("MNCommerceDialogTitle.react"),{children:e}),a.jsx(b("MNCommerceDialogBody.react"),{children:d}),a.jsx(b("MNCommerceDialogFooter.react"),{children:a.jsx(b("MNCommerceButton.react"),{label:c,onClick:this.props.onOkayButtonClick,use:"confirm"})})]})};return c}(b("React").Component);a.propTypes={errorType:b("prop-types").number,onOkayButtonClick:b("prop-types").func};e.exports=a}),null);
__d("MNCommerceUnlinkDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceUnlinkDialog.react","MNCommerceUnlinkErrorDialog.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a||d.$2()},d.$2=function(){b("MNCommerceDialogStateActions").hideDialog()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("MNCommerceDialogStateStore").getState();if(a&&a.errorType){b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_load_success",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK_ERROR})});return b("React").jsx(b("MNCommerceUnlinkErrorDialog.react"),{onToggle:this.$1,shown:!!a,errorType:a.errorType,onOkayButtonClick:this.$2})}else{b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_load_success",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK})});return b("React").jsx(b("MNCommerceUnlinkDialog.react"),{onToggle:this.$1,shown:!!a,onCancelButtonClick:this.$2,onTurnOffButtonClick:a&&a.onTurnOffButtonClick})}};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceLogMessageUtils",["cx","fbt","invariant","BanzaiLogger","CurrentUser","Link.react","MercuryIDs","MessengerEnvironment","MessengerState.bs","MNCommerceDialogStateActions","MNCommerceLoggingConstants","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","MNCommerceReplyTypes","MNCommerceUnlinkDataManager","MNCommerceUnlinkDialogContainer.react","React","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.isCommercePageAdminMessage=function(a){return!!(a&&a.log_message_data&&(a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_LINK||a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_UNLINK))};c.getCommercePageManage=function(a,c){__p&&__p();var d=this,e=null;if(b("gkx")("678671")){var f=function(){var c=b("MercuryIDs").getUserIDFromParticipantID(a.author);d.openManageMessagesDialog(a,c);b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_opened",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.MANAGE})})};e=this.getManageLink(f,c)}else if(a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_LINK){f=function(){__p&&__p();var c=b("MercuryIDs").getUserIDFromParticipantID(a.author),d=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id);d||i(0,3713,a.thread_id);var e=null;d.participants.every(function(c){if(c!==a.author){e=b("MercuryIDs").getUserIDFromParticipantID(c);return!1}return!0});d=function(){b("MNCommerceDialogStateActions").hideDialog(),b("MNCommerceUnlinkDataManager").unlink(c,e)};b("MNCommerceDialogStateActions").showDialog(b("MNCommerceUnlinkDialogContainer.react"),{onTurnOffButtonClick:d});b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_opened",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK})})};e=b("React").jsx(b("Link.react"),{className:(c?"":"_2w2m")+(c?" _1jvn":""),onClick:f,children:h._("Turn Off")})}return b("React").jsxs("span",{children:[a.log_message_body," ",e]})};c.openManageMessagesDialog=function(a,c){a=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)};b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:c,onConfirmButtonClick:a})};c.getManageLink=function(a,c){return b("React").jsx(b("Link.react"),{className:(c?"":"_2w2m")+(c?" _1jvn":""),onClick:a,children:h._("Manage Messages")})};c.getThreadResurrectionManage=function(a){var c=this,d=a.other_user_fbid,e=function(){return c.openManageMessagesDialog(a,d)};e=this.getManageLink(e,b("MessengerEnvironment").messengerui);return b("React").jsxs("span",{children:[a.log_message_body," ",e]})};c.isThreadResurrectionXMAT=function(a){a=(a=a)!=null?(a=a.log_message_data)!=null?a.message_type:a:a;return a==="messenger_thread_resurrection_notice"};return a}();e.exports=new a()}),null);
__d("LinkCTAXMATAsyncLink.react",["AsyncRequest","FDSLink.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(){new(b("AsyncRequest"))().setURI(d.props.uri).setMethod("POST").send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("FDSLink.react"),{onClick:this.onClick,children:this.props.text})};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceReportFlowType",[],(function(a,b,c,d,e,f){a=Object.freeze({HIDE:"hide",REPORT:"report",WHY:"why",USEFUL:"useful",WHAT:"what"});e.exports=a}),null);
__d("MNAdsMessageUtils",["ix","cx","fbt","Bootloader","FBJSON","Image.react","Link.react","MercuryIDs","MessengerPopoverMenu.react","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommerceReportFlowType","QE2Logger","React","ReactXUIMenu","XAsyncRequest","XMessengerDotComSponsoredMessagesXOutReportMutationController","XMessengerDotComSponsoredMessagesXOutSubmitPageController","fbglyph","getPageIDFromThreadID","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactXUIMenu").Item,k="offsite_ad";a=function(){__p&&__p();function a(){}var c=a.prototype;c.isAdsAdminMessage=function(a){return a&&a.log_message_data&&a.log_message_data.message_type&&a.log_message_data.message_type==="ad_manage_message"};c.isOffsiteAd=function(a){__p&&__p();if(a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_properties){a=b("FBJSON").parse(a.log_message_data.untypedData.ad_properties);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e===k)return!0}}return!1};c.getadPreferencesUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_preferences_link?a.log_message_data.untypedData.ad_preferences_link:""};c.hasAdProperties=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_properties?!0:!1};c.getadId=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_id?a.log_message_data.untypedData.ad_id:null};c.getadClientToken=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_client_token?a.log_message_data.untypedData.ad_client_token:null};c.getAdsPageManage=function(a,c){__p&&__p();var d=this,e=null;if(b("gkx")("678671"))if(a.is_sponsored&&b("gkx")("678672")){var f,h=this.getadId(a),k=this.getadClientToken(a),l=function(){__p&&__p();var c=b("getPageIDFromThreadID")(a.thread_id);c||(c=b("MercuryIDs").getUserIDFromParticipantID(a.author));if(h!==null){var d=b("XMessengerDotComSponsoredMessagesXOutReportMutationController").getURIBuilder().setString("ad_id",h).setString("ad_client_token",k).getURI();new(b("XAsyncRequest"))(d).setHandler(function(a){(a.payload.err||a.payload===!1)&&b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(i._("We Couldn't Hide This Ad. Please try again later."))},"MNAdsMessageUtils")}).setMethod("POST").send()}var e=function(a){if(k!==null){a=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",k).setString("selected_option_type",a).setString("event_type",b("MNCommerceReportFlowType").HIDE).getURI();new(b("XAsyncRequest"))(a).setMethod("POST").send()}};b("Bootloader").loadModules(["MNAdsHideAdDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{onConfirmButtonClick:e,pageID:c})},"MNAdsMessageUtils")},m=function(){__p&&__p();var c=b("getPageIDFromThreadID")(a.thread_id);c||(c=b("MercuryIDs").getUserIDFromParticipantID(a.author));var d=function(a){__p&&__p();if(h!==null){var c=b("XMessengerDotComSponsoredMessagesXOutReportMutationController").getURIBuilder().setString("ad_id",h).setString("ad_client_token",k).getURI();new(b("XAsyncRequest"))(c).setHandler(function(a){(a.payload.err||a.payload===!1)&&b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(i._("We Couldn't Hide This Ad. Please try again later."))},"MNAdsMessageUtils")}).setMethod("POST").send()}if(k!==null){c=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",k).setString("selected_option_type",a).setString("event_type",b("MNCommerceReportFlowType").REPORT).getURI();new(b("XAsyncRequest"))(c).setMethod("POST").send()}};b("Bootloader").loadModules(["MNAdsReportAdDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{onConfirmButtonClick:d,pageID:c})},"MNAdsMessageUtils")},n=function(){b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){if(k!==null){var c=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",k).setString("selected_option_type","useful").setString("event_type",b("MNCommerceReportFlowType").USEFUL).getURI();new(b("XAsyncRequest"))(c).setMethod("POST").send()}a.show(i._("Thank you for the feedback"))},"MNAdsMessageUtils")},o="https://www.facebook.com/help/messenger-app/948677458561379",p=this.getadPreferencesUrl(a);l=(f=b("React")).jsxs(b("ReactXUIMenu"),{children:[f.jsx(j,{icon:f.jsx(b("Image.react"),{src:g("123107")}),onclick:l,children:i._("Hide Ad")},b("MNCommerceReportFlowType").HIDE),f.jsx(j,{icon:f.jsx(b("Image.react"),{src:g("123502")}),onclick:m,children:i._("Report Ad")},b("MNCommerceReportFlowType").REPORT),f.jsx(j,{href:p,icon:this.hasAdProperties(a)?b("React").jsx(b("Image.react"),{src:g("122203")}):b("React").jsx(b("Image.react"),{src:g("123137")}),target:"_blank",children:i._("Why am I seeing this?")},b("MNCommerceReportFlowType").WHY),b("React").jsx(j,{icon:b("React").jsx(b("Image.react"),{src:g("122574")}),onclick:n,children:i._("This ad is useful")},b("MNCommerceReportFlowType").USEFUL),b("React").jsx(j,{href:o,icon:b("React").jsx(b("Image.react"),{src:g("123230")}),target:"_blank",children:i._("What are sponsored messages?")},b("MNCommerceReportFlowType").WHAT)]});e=b("React").jsx(b("MessengerPopoverMenu.react"),{"aria-label":"Manage Messages","data-tooltip-content":"Manage Messages","data-hover":"tooltip",menu:l,children:b("React").jsx(b("Link.react"),{className:(c?"":"_3kyk")+(c?" _3kyl":""),children:i._("Manage")})})}else{m=function(){var c=d.isOffsiteAd(a),e=b("getPageIDFromThreadID")(a.thread_id);e||(e=b("MercuryIDs").getUserIDFromParticipantID(a.author));var f=d.getadPreferencesUrl(a),g=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)};b("Bootloader").loadModules(["MNAdsMessagesManageBlockDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{adPreferencesUrl:f,isOffsiteAd:c,onConfirmButtonClick:g,pageID:e})},"MNAdsMessageUtils")};e=b("React").jsx(b("Link.react"),{className:(c?"":"_3kyk")+(c?" _3kyl":""),onClick:m,children:i._("Manage")})}return b("React").jsxs("span",{className:c?"":"_3kym",children:[a.log_message_body," \xb7 ",e]})};c.getadUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_url?a.log_message_data.untypedData.ad_url:""};c.getShouldShowUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.should_show_url?a.log_message_data.untypedData.should_show_url:!1};c.getAdContextAdminMessage=function(a){var c=this.getadUrl(a);c=b("React").jsx(b("Link.react"),{className:"_36ql",href:c,children:i._("View Ad")});return b("React").jsxs("span",{className:"_3kym",children:[a.log_message_body," ",c]})};c.getAdReplyAdminMessage=function(a){var c=this.getadUrl(a),d=this.getShouldShowUrl(a);if(c===""||!d)return b("React").jsx("span",{className:"_3kym",children:a.log_message_body});d=a.other_user_fbid.replace("fbid:","");b("QE2Logger").logExposureForUser("ctm_admin_text_ad_url",d);d=b("React").jsx(b("Link.react"),{className:"_36ql",href:c,target:"_blank",children:i._("View Ad")});return b("React").jsxs("span",{className:"_3kym",children:[a.log_message_body," ",d]})};return a}();e.exports=new a()}),null);
__d("MessengerGamesCustomUpdateAdmin.react",["cx","fbt","Image.react","Link.react","MessengerButtonReact.re","MessengerContactImageReact.bs","React","RelayModern","MessengerGamesCustomUpdateAdmin_gameInfo.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerButtonReact.re").make,k=b("MessengerContactImageReact.bs").jsComponent;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.data.getImageURL(),c=this.props.data.getText(),d=this.props.data.getTitle()?this.props.data.getTitle():h._("Play");return!this.props.gameInfo?b("React").jsx("span",{children:c}):b("React").jsxs("div",{children:[b("React").jsx(b("Link.react"),{className:"_fy2 _2621","aria-haspopup":"true","aria-label":h._("View Less"),href:"#",onClick:this.props.hideAdmin,role:"button"}),b("React").jsxs("div",{className:"_261_",children:[b("React").jsx(k,{size:25,src:this.props.gameInfo.iconURI}),b("React").jsx("h2",{className:"_2620",children:this.props.gameInfo.name})]}),b("React").jsxs("div",{className:"_3rpv",children:[b("React").jsx(b("Image.react"),{className:"_3rp-",onClick:this.props.playGame,src:a}),b("React").jsx("div",{className:"_3rp_",children:c}),b("React").jsx("div",{className:"_3cnr",children:b("React").jsx(j,{className:"_3rq0 _fy2",label:d,onClick:this.props.playGame,type:"primary",use:"default"})})]})]})};return c}(b("React").Component);e.exports=a(c,{gameInfo:i!==void 0?i:i=b("MessengerGamesCustomUpdateAdmin_gameInfo.graphql")})}),null);
__d("MessengerGamesCustomUpdateAdminContainer.react",["fbt","MessengerGamesCustomUpdateAdmin.react","React","RelayFBEnvironment","RelayModern","MessengerGamesCustomUpdateAdminContainerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("RelayModern").QueryRenderer;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this;return b("React").jsx(i,{environment:b("RelayFBEnvironment"),query:h!==void 0?h:h=b("MessengerGamesCustomUpdateAdminContainerQuery.graphql"),variables:{gameID:this.props.gameID},render:function(c){var d=c.error;c=c.props;if(d)return b("React").jsx("div",{children:g._("Failed to Load")});else if(c){d=c.node&&c.node.gameInfo;return!d?b("React").jsx("div",{children:a.props.text}):b("React").jsx(b("MessengerGamesCustomUpdateAdmin.react"),babelHelpers["extends"]({},a.props,{gameInfo:d}))}return a.props.renderLoading()}})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerGamesCustomUpdateData",["GamesQuicksilverContextKey","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=function(){__p&&__p();function a(a){__p&&__p();var c;this.$1=null;this.$2=(c=a.custom_image_url)!=null?c:null;this.$4=(c=(c=(c=a.text)!=null?c:a.collapsed_text)!=null?c:a.expanded_text)!=null?c:"";this.$5=a.cta_title;this.$6=(c=a.template)!=null?c:null;c=new(g||(g=b("URI")))(a.cta_url).getQueryData();this.$3=c.payload||null;a=c.context_id||null;c=c.context_type;c&&(this.$1=new(b("GamesQuicksilverContextKey"))({id:null,size:null,sourceID:a,type:c}))}var c=a.prototype;c.getContextKey=function(){return this.$1};c.getImageURL=function(){return this.$2};c.getPayload=function(){return this.$3};c.getTitle=function(){return this.$5};c.getText=function(){return this.$4};c.getTemplate=function(){return this.$6};return a}();e.exports=a}),null);
__d("MessengerGameAdminMessage.react",["cx","fbt","AppCustomEventType","Bootloader","ImmutableObject","InstantGamesAnalyticsLogger","Link.react","MercuryIDs","MessengerDialogs.bs","MessengerGamesCustomUpdateAdminContainer.react","MessengerGamesCustomUpdateData","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=d.$1(),d.renderText=function(){return b("React").jsxs("span",{children:[b("React").jsxs("span",{children:[d.props.text," "]}),b("React").jsx(b("Link.react"),{className:"_fy2",onClick:d.state.isExpanded?d.$2:d.$4,children:h._("View")})]})},d.$3=function(){__p&&__p();if(d.state.playerOpen)return;b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react"],function(a){b("MessengerDialogs.bs").showDialog(function(){var c=d.getXMATData(),e=c.update_data?JSON.parse(c.update_data):c;e=new(b("MessengerGamesCustomUpdateData"))(e);c.update_type==="custom_message"&&d.$5(c.game_id,e);var f=b("MercuryIDs").getThreadFBIDFromThreadID(d.props.message.thread_id),g="SOLO",h=null,i=e.getContextKey();i?(g=i.getType(),h=i.getSourceID()):f&&(g="THREAD",h=f);return b("React").jsx(a,{initialContextSourceID:h,initialContextType:g,initialEntryPointData:e.getPayload()||void 0,initialGameID:c.game_id,onHide:d.$6,initialSource:"admin_message",sourceID:f,invitationID:d.props.message.message_id,threadID:d.props.message.thread_id},c.game_id)})},"MessengerGameAdminMessage.react");d.setState({playerOpen:!0})},d.$6=function(){b("MessengerDialogs.bs").removeAllDialogs(),d.setState({playerOpen:!1})},d.$4=function(){d.setState({isExpanded:!0})},d.$2=function(){d.setState({isExpanded:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){return{isExpanded:this.props.isLastOfType,playerOpen:!1}};d.componentDidMount=function(){this.props.onLoad&&this.props.onLoad()};d.UNSAFE_componentWillReceiveProps=function(a){this.props.isLastOfType!==a.isLastOfType&&this.setState({isExpanded:a.isLastOfType})};d.getXMATData=function(){return this.props.message.log_message_data&&this.props.message.log_message_data.untypedData?new(b("ImmutableObject"))(this.props.message.log_message_data.untypedData):new(b("ImmutableObject"))()};d.render=function(){var a=this.getXMATData(),c=null;switch(a.update_type){case"custom_message":var d=a.update_data?JSON.parse(a.update_data):a;d=new(b("MessengerGamesCustomUpdateData"))(d);return this.state.isExpanded?b("React").jsx("span",{children:b("React").jsx(b("MessengerGamesCustomUpdateAdminContainer.react"),{data:d,gameID:a.game_id,hideAdmin:this.$2,playGame:this.$3,renderLoading:this.renderText,text:this.props.text})}):b("React").jsxs("span",{children:[this.renderText(),c]});default:return b("React").jsx("span",{children:this.props.text})}};d.$5=function(a,c){a=new(b("InstantGamesAnalyticsLogger"))(a);var d={};d.fb_instant_games_template_name=c.getTemplate();a.logCustomAppEvent(b("AppCustomEventType").FB_INSTANT_GAMES_UPDATE_CLICK,null,d)};return c}(b("React").Component);a.propTypes={message:b("prop-types").object.isRequired,text:b("prop-types").string.isRequired,isLastOfType:b("prop-types").bool.isRequired};e.exports=a}),null);
__d("MessengerGroupCreatePollButton.react",["CurrentUser","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a.name;a.questionID;a.threadID;a=a.participants;var c=b("CurrentUser").getAccountID(),d=a.indexOf(c.toString())>=0;d&&a.splice(a.indexOf(c.toString()),1);return null}e.exports=a}),null);
__d("MessengerGroupCreatePollButtonReact.bs",["ReasonReact.bs","MessengerGroupCreatePollButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGroupCreatePollButton.react"),{name:a,questionID:c,participants:d,threadID:e},f)}f.make=a}),null);
__d("AbstractTextInputReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractTextInput.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("AbstractTextInput.react"),{className:b("bs_js_null_undefined").fromOption(a),maxLength:c,onChange:d,onFocus:e,onKeyDown:f,placeholder:g,value:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("MessengerAbstractTextInputWithFocusReact.bs",["bs_curry","bs_caml_option","ReasonReact.bs","AbstractTextInputReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerAbstractTextInputWithFocusReact");function h(a,c){c[1][0][0]=a==null?void 0:b("bs_caml_option").some(a);return 0}function i(a){a=a[0][0];if(a!==void 0)return b("bs_caml_option").valFromOption(a).focusInput();else return 0}function j(a){a=a[0][0];if(a!==void 0)return b("bs_caml_option").valFromOption(a).blurInput();else return 0}function k(a,c,d,e,f,k,l,m,n){__p&&__p();var o=function(a){if(c)return i(a);else return j(a)};return[g[0],g[1],g[2],g[3],function(a){return o(a[1])},function(a){return o(a[1][1])},g[6],g[7],function(c){return b("ReasonReact.bs").element(void 0,b("bs_curry")._1(c[0],h),b("AbstractTextInputReact.bs").make(a,d,e,f,k,l,m,[]))},function(a){return[[void 0]]},g[10],function(a,b){return 0},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return k(b("bs_caml_option").nullable_to_opt(a.className),a.focused,a.maxLength,a.onChange,a.onFocus,a.onKeyDown,a.placeholder,b("bs_caml_option").nullable_to_opt(a.value),[])});f.component=g;f.setInputRef=h;f.focus=i;f.blur=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerGroupPollingCheckboxReact.bs",["cx","cssVar","Keys","bs_curry","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.checked,d=a.customColor,e=a.onToggle;a=function(a){return b("bs_curry")._1(e,!c)};var f=function(a){if(a.keyCode===b("Keys").SPACE){a.preventDefault();return b("bs_curry")._1(e,!c)}else return 0},g=c?d:"rgba(0, 0, 0, 0.10)";return b("React").cloneElement(b("React").jsx("div",{children:b("React").jsx("span",{className:"_2m5r",style:{backgroundColor:d,borderColor:g}}),className:"_2m5p"+(c?" _2m5q":""),role:"checkbox",tabIndex:0,onKeyDown:f,onClick:a}),{"aria-checked":c})}c=a;d=a;f.make=c;f.jsComponent=d}),null);
__d("MessengerGroupPollingFlyoutReact.bs",["cx","ix","fbt","FBID.bs","Keys","bs_block","bs_curry","React","gkx","bs_belt_Array","bs_caml_int32","Link.react","MercuryIDs","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","AsyncRequest","FacepileRounded.bs","MessengerEnvironment","ScrollableArea.react","MessengerParticipants.bs","MessengerSpinnerReact.bs","MessengerAddIconSVGReact.bs","MessengerTextWithEntities.react","MessengerGroupPollingCheckboxReact.bs","MessengerAbstractTextInputWithFocusReact.bs","XMessengerGroupPollingUpdateVoteController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c,d){__p&&__p();if(d){var e=b("CurrentUser").getID();d=b("bs_belt_Array").keep(c,function(a){return a!==e});d=b("bs_belt_Array").concat([e],d)}else d=c;return b("bs_belt_Array").mapWithIndex(d,function(c,d){var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e==null)return{image_src:h("98939"),name:"Facebook User"};else if(c<a)return{image_src:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(e.image_src),h("98939")),name:e.name};else return{image_src:d,name:e.name}})}function k(a,c,d,e,f){var g=d===3;g=g?3:2;var h=d===3;return b("ReasonReact.bs").element(void 0,void 0,b("FacepileRounded.bs").make(a,1,1,c,g,j(g,e,f),h?0:d-2|0,[]))}var l=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingFlyoutReact");function m(a,c,d,e,f,g){__p&&__p();return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(g){__p&&__p();var h=g[1],j=b("MessengerEnvironment").messengerui;if(e!==void 0){var l=e,m=j?24:16,n=l.length+h[4].length|0;n=b("bs_caml_int32").imul(j?36:28,n);n=Math.min(Math.max(n,50),200);l=b("bs_belt_Array").map(l,function(d){var c;return(c=b("React")).jsxs("div",{children:[c.createElement(b("MessengerGroupPollingCheckboxReact.bs").make,{checked:b("bs_belt_Array").some(h[3],function(a){return a===d.id}),customColor:a,onToggle:function(a){return b("bs_curry")._1(g[3],b("bs_block").__(3,[d.id]))}}),c.jsxs("div",{children:[c.jsx("div",{children:c.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d.text}),className:"_1mq-"+(j?"":" _2a5a")}),k("_4ic7"+(j?"":" _8kg"),m,d.voters.count,d.voters.edges.map(function(a){return a.node.id}),b("bs_caml_option").nullable_to_opt(d.viewer_has_voted)===!0)],className:"_2f83"+(j?"":" _vhn")})],className:"_1mqz"+(j?"":" _5k8c")},d.id)});var o=b("bs_belt_Array").mapWithIndex(h[4],function(d,e){__p&&__p();var c=h[0];return b("React").jsxs("div",{children:[b("React").createElement(b("Link.react"),{onClick:function(a){return b("bs_curry")._1(g[3],0)},role:"button",tabIndex:0,children:b("React").createElement(b("MessengerAddIconSVGReact.bs").make,{label:i._("Add option"),className:"_8i7",customColor:a})}),b("ReasonReact.bs").element(void 0,void 0,b("MessengerAbstractTextInputWithFocusReact.bs").make("_8i5",c!==void 0?c===d:!1,140,function(a){return b("bs_curry")._1(g[3],b("bs_block").__(2,[d,a.target.value]))},function(a){return b("bs_curry")._1(g[3],b("bs_block").__(1,[d]))},function(a){if(a.keyCode===b("Keys").RETURN){a.preventDefault();a=d+1|0;if(a===h[4].length)return b("bs_curry")._1(g[3],0);else return b("bs_curry")._1(g[3],b("bs_block").__(1,[a]))}else return 0},i._("Add an option"),b("bs_belt_Option").getWithDefault(e,""),[]))],className:"_1mqz"+(j?"":" _5k8c")},String(d))});if(b("gkx")("1280043")&&!b("CurrentUser").isWorkUser())return b("React").jsx("div",{children:b("React").jsx("div",{children:i._("Polls aren't currently available in Messenger. We're working to add them back soon."),className:"_1mr_",style:{paddingTop:"50px",paddingBottom:"50px"}}),className:"_1mq_"+(j?"":" _1mr-")});else{var p,q=h[5];return(p=b("React")).jsxs("div",{children:[p.jsx("div",{children:p.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d}),className:"_1mr_"}),p.jsxs("div",{children:[p.jsx("div",{children:b("bs_belt_Option").getWithDefault(h[1],""),className:"_3lpx"}),p.jsx("div",{children:b("bs_belt_Option").getWithDefault(h[2],""),className:"_3lpy"})],className:"_3lpw"}),p.jsx(b("ScrollableArea.react"),{height:n,children:p.jsxs("div",{children:[l,o],className:"_1ms0"})}),p.jsx("div",{children:q?b("React").jsx(b("MessengerSpinnerReact.bs").make,{}):i._("Submit"),className:"_1ms1"+(h[5]?" _m1v":""),role:"button",style:{backgroundColor:a},tabIndex:0,onKeyUp:function(a){a.preventDefault();if(a.keyCode===b("Keys").RETURN)return b("bs_curry")._1(g[3],b("bs_block").__(0,[c,f]));else return 0},onClick:function(a){return b("bs_curry")._1(g[3],b("bs_block").__(0,[c,f]))}})],className:"_1mq_"+(j?"":" _1mr-")})}}else return b("React").jsx("div",{children:b("React").jsx(b("MessengerSpinnerReact.bs").make,{color:"gray"}),className:"_8bt"+(j?"":" _5il4")})},function(a){return[0,void 0,void 0,e!==void 0?b("bs_belt_Array").keepMap(e,function(a){var b=a.viewer_has_voted;if(!(b==null)&&b)return a.id}):[],[void 0],!1]},l[10],function(d,e){__p&&__p();if(typeof d==="number"){var f=b("bs_belt_Array").concat(e[4],[void 0]);return b("bs_block").__(0,[[f.length-1|0,e[1],e[2],e[3],f,e[5]]])}else switch(d.tag|0){case 0:if(e[5])return 0;else{var c=d[1],a=d[0];return b("bs_block").__(2,[[e[0],e[1],e[2],e[3],e[4],!0],function(f){var d=b("bs_belt_Array").keepMap(f[1][4],function(a){return a}),g=b("XMessengerGroupPollingUpdateVoteController").getURIBuilder().getURI();new(b("AsyncRequest"))(g).setMethod("POST").setData({question_id:b("FBID.bs").ofStringExn(a),selected_options:b("bs_belt_Array").map(e[3],b("FBID.bs").ofStringExn),new_options:d}).setAllowCrossPageTransition(!0).setHandler(function(a){if(a.payload.status==="failure"&&a.payload.showUser===!0)return b("bs_curry")._1(f[3],b("bs_block").__(4,[a.payload.errorTitle,a.payload.errorMessage]));else return b("bs_curry")._1(c,0)}).send();return 0}])}case 1:return b("bs_block").__(0,[[d[0],e[1],e[2],e[3],e[4],e[5]]]);case 2:var g=d[1],h=d[0];f=b("bs_belt_Array").mapWithIndex(e[4],function(a,b){a=a===h;if(a)return g;else return b});return b("bs_block").__(0,[[h,void 0,void 0,e[3],f,e[5]]]);case 3:var i=d[0];f=b("bs_belt_Array").some(e[3],function(a){return a===i});f=f?b("bs_belt_Array").keep(e[3],function(a){return a!==i}):b("bs_belt_Array").concat(e[3],[i]);return b("bs_block").__(0,[[void 0,e[1],e[2],f,e[4],e[5]]]);case 4:return b("bs_block").__(0,[[e[0],d[0],d[1],e[3],e[4],!1]])}},l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.customColor,a.questionID,a.questionText,b("bs_caml_option").nullable_to_opt(a.options),a.onSubmitHandler,[])});c=b("bs_belt_Option").getWithDefault;d=16;e=24;g=28;var n=36,o=50,p=200,q=140;f.$pipe$question=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.facebookOptionRowHeight=g;f.messengerOptionRowHeight=n;f.minimumFlyoutScrollareaHeight=o;f.maximumFlyoutScrollareaHeight=p;f.pollOptionMaxLength=q;f.getProfilePictures=j;f.renderVoterFacepiles=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerPollingFlyoutBootLoader.react",["cx","JSResource","LazyComponent.react","MessengerEnvironment","MessengerSpinner.react","React","ReasonBootloadOnRender.react","ReasonResource"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;return b("React").jsx(b("ReasonBootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{customColor:this.props.customColor,questionID:this.props.questionID,questionText:this.props.questionText,options:this.props.options,onSubmitHandler:this.props.onSubmitHandler}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingFlyoutReact.bs").__setRef("MessengerPollingFlyoutBootLoader.react")),placeholder:b("React").jsx("div",{className:"_8bt"+(a?"":" _5il4"),children:b("React").jsx(b("MessengerSpinner.react"),{color:"grey"})})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerPollingFlyoutBootLoader.bs",["ReasonReact.bs","MessengerPollingFlyoutBootLoader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerPollingFlyoutBootLoader.react"),{customColor:a,questionID:c,questionText:d,options:e,onSubmitHandler:f},g)}f.make=a}),null);
__d("MessengerGroupPollingAdminMessageReact.bs",["cx","ix","fbt","cssVar","bs_block","bs_curry","React","gkx","bs_js_dict","bs_js_json","bs_belt_Array","Link.react","bs_belt_Option","bs_caml_option","Image.react","ReasonReact.bs","AsyncRequest","MessengerEnvironment","MessengerContextualDialogReact.bs","MessengerTextWithEntities.react","MessengerGroupPollingFlyoutReact.bs","MessengerPollingFlyoutBootLoader.bs","XMessagingGetPollOptionsController","MessengerGroupCreatePollButtonReact.bs"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingAdminMessageReact");function l(a,c,d,e,f){__p&&__p();return[k[0],k[1],k[2],k[3],function(a){__p&&__p();if(a[1][4]===void 0){var d=c.log_message_data.untypedData.question_id;d=b("XMessagingGetPollOptionsController").getURIBuilder().setFBID("question_id",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(c){b("bs_curry")._1(a[3],b("bs_block").__(0,[c.payload]));if(e!==void 0)return b("bs_curry")._1(e,0);else return 0}).setErrorHandler(function(c){b("bs_curry")._1(a[3],b("bs_block").__(0,[[]]));if(e!==void 0)return b("bs_curry")._1(e,0);else return 0}).send();return 0}else return 0},k[5],k[6],k[7],function(e){__p&&__p();var f=e[1],g;if(a!==void 0){var j=a;g=j===""?"#0084ff":j}else g="#0084ff";j=b("React").jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.log_message_body});var k=b("MessengerEnvironment").messengerui;if(!d&&!(f[0]&&k))return j;else{var l;try{l=b("bs_caml_option").some(JSON.parse(c.log_message_data.untypedData.question_json))}catch(a){l=void 0}var m=f[4];if(l!==void 0&&m!==void 0){m=m;l=b("bs_js_json").classify(b("bs_caml_option").valFromOption(l));if(typeof l==="number"||l.tag!==2)return j;else{var n;l=l[0];var o=(n=b("bs_js_dict")).get(l,"id"),p=n.get(l,"text"),q=n.get(l,"total_count");n=n.get(l,"viewer_has_voted");if(o!==void 0&&p!==void 0&&q!==void 0&&n!==void 0){l=b("bs_js_json").classify(b("bs_caml_option").valFromOption(o));o=b("bs_js_json").classify(b("bs_caml_option").valFromOption(p));p=b("bs_js_json").classify(b("bs_caml_option").valFromOption(q));if(typeof l==="number"||l.tag||typeof o==="number"||o.tag||typeof p==="number"||p.tag!==1)return j;else{q=o[0];var r=l[0],s=m.slice(0,3).map(function(a){var b=a.voters.edges.map(function(a){return a.node.id});return{id:a.id,text:a.text,num_of_votes:a.voters.count,viewer_has_voted:a.viewer_has_voted,voter_ids:b}});o=b("bs_belt_Array").map(s,function(d){var a=b("bs_belt_Array").get(s,0);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=a.num_of_votes!==0?(d.num_of_votes/a.num_of_votes*100).toString()+"%":"0%"}else a="0%";return b("React").jsxs("div",{children:[b("React").jsxs("div",{children:[b("React").jsx("div",{children:b("React").jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d.text}),className:(k?"_3b4f":"")+(k?"":" _4ic6")}),b("MessengerGroupPollingFlyoutReact.bs").renderVoterFacepiles("_4ic7"+(k?"":" _8kg"),k?24:16,d.num_of_votes,d.voter_ids,d.viewer_has_voted),b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupCreatePollButtonReact.bs").make(d.text,r,d.voter_ids,c.thread_id,[]))],className:"_3b4c"}),b("React").jsx("div",{children:b("React").jsx("span",{style:{backgroundColor:g,width:a}}),className:"_3b4h"+(k?"":" _4ic8")})],className:"_3b4a"+(k?"":" _4ic5")},d.id)});l=(p[0]|0)-3|0;p=l<=0;var t=b("gkx")("994335");if(t)t=null;else{n=b("bs_js_json").classify(b("bs_caml_option").valFromOption(n));var u=f[0];t=b("React").jsxs(b("Link.react"),{className:"_4icb"+(k?"":" _4icc")+(k?" uiContextualLayerParent":"")+(k?" _5f0v":""),linkRef:f[2],onClick:function(a){a.stopPropagation();if(!f[0]&&!f[3][0])return b("bs_curry")._1(e[3],1);else return 0},onMouseDown:function(a){f[3][0]=f[0];return 0},role:"button",style:{color:g,textDecoration:"none"},tabIndex:0,children:[typeof n==="number"?n!==1?i._("Vote"):i._("Change Vote"):i._("Vote"),u?b("ReasonReact.bs").element(void 0,void 0,b("MessengerContextualDialogReact.bs").make(void 0,void 0,function(a){return f[1][0]},function(a){return b("bs_curry")._1(e[3],0)},void 0,function(a){return b("bs_curry")._1(e[3],b("bs_block").__(1,[a]))},f[0],void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerPollingFlyoutBootLoader.bs").make(g,r,q,m,function(a){return b("bs_curry")._1(e[3],0)},[]))])):null]})}return b("React").jsxs("div",{children:[j,b("React").jsxs("div",{children:[b("React").jsxs("div",{children:[b("React").jsx(b("Image.react"),{className:"_4ica"+(k?"":" _2ozk"),src:k?h("86887"):h("86886")}),i._("Poll")],className:"_3b4u"+(k?"":" _2wew")}),b("React").jsx("div",{children:b("React").jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:q}),className:(k?"_3b4v":"")+(k?"":" _2wex")}),b("React").jsx("div",{children:o,className:"_3b4w"}),b("React").jsx("div",{children:p?null:i._({"*":"{number of remaining answer options} more options...","_1":"{number of remaining answer options} more option..."},[i._param("number of remaining answer options",String(l)),i._plural(l)]),className:"_8bu"}),t],className:"_3b4t"+(k?"":" _4ic9")})]})}}else return j}}else return j}},function(a){var c=[void 0];a=function(a){c[0]=a==null?void 0:b("bs_caml_option").some(a);return 0};return[!1,c,a,[!1],void 0]},k[10],function(a,c){if(typeof a==="number")if(a===0)return b("bs_block").__(0,[[!1,c[1],c[2],c[3],c[4]]]);else return b("bs_block").__(0,[[!c[0],c[1],c[2],c[3],c[4]]]);else if(a.tag)return b("bs_block").__(0,[[a[0],c[1],c[2],c[3],c[4]]]);else return b("bs_block").__(0,[[c[0],c[1],c[2],c[3],a[0]]])},k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(b("bs_caml_option").nullable_to_opt(a.customColor),a.message,a.isLastOfType,b("bs_caml_option").nullable_to_opt(a.onLoad),[])});c=b("bs_belt_Option").getWithDefault;d=16;e=24;g=3;f.$pipe$question=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.numOfDisplayedOptions=g;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerNewWavePrompt.react",["cx","fbt","ix","MercuryMessageActions","Bootloader","CurrentUser","Image.react","MercuryConfig","MercuryMessageObject","MessengerButtonReact.re","MessengerState.bs","MessengerWaveEntrypoint","WorkActivationWavePromptExperiment","prop-types","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryMessageActions").get(),k=b("MessengerButtonReact.re").make,l=b("CurrentUser").getID(),m=i("392389");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={hasWaved:!1,isNewEmptyThread:!1},d.$5=function(a){a=b("MercuryMessageObject").getForFBID(l).constructAttachmentMessageObject("source:messenger:web",d.props.threadID);a.lightweight_action_attachment={lwa_state:"INITIATED",lwa_type:"WAVE"};j.send(a);d.$6(d.props.threadID,d.props.entrypoint);d.setState({hasWaved:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),this.props.threadID,0,b("CurrentUser").isWorkUser()?10:1,function(c){return b("CurrentUser").isWorkUser()?a.$1(c):a.$2(c)})};d.render=function(){if(!this.state.isNewEmptyThread||this.state.hasWaved||b("CurrentUser").isWorkUser()&&!this.$3())return null;var a=this.props.recipientName?h._("Say hi to {recipient} with a wave.",[h._param("recipient",this.props.recipientName)]):h._("Say hi with a wave.");return b("React").jsxs("div",{className:"_4qet",children:[b("React").jsx("h3",{className:"_4qeu",children:a}),b("React").jsx("div",{className:"_63l7",children:b("React").jsx(b("Image.react"),{className:"_4qev",src:m})}),this.$4()]})};d.$4=function(){return b("React").jsx(k,{className:"_4qew",onClick:this.$5,label:h._("Wave"),type:"primary",use:"default"})};d.$2=function(a){if(!a.length){this.setState({isNewEmptyThread:b("MercuryConfig").MNWNS});return}var c=a[0];this.setState({isNewEmptyThread:c.source==="source:messenger_growth:friending_admin_bump"||c.log_message_data!=null&&c.log_message_data.message_type==="confirm_friend_request"||c.log_message_data!=null&&c.log_message_data.message_type==="group_thread_created"&&a.length===1||c.log_message_data!=null&&c.log_message_data.message_type==="work_invite_claimed"&&a.length===1})};d.$1=function(a){var b=a.filter(function(a){return a.log_message_data&&a.log_message_data!==null&&a.log_message_data.message_type==="group_thread_created"||a.log_message_data&&a.log_message_data!==null&&a.log_message_data.message_type==="work_invite_claimed"}).length!==0;a=a.filter(function(a){return a.action_type==="ma-type:user-generated-message"}).length!==0;this.setState({isNewEmptyThread:b&&!a})};d.$3=function(){return!b("CurrentUser").isWorkUser()?!1:b("WorkActivationWavePromptExperiment").showWavePrompt};d.$6=function(a,c){b("Bootloader").loadModules(["MercuryIDs","MessengerWebWaveTypedLogger","LightweightActionState"],function(b,d,e){b=b.getUserIDFromThreadID(a);new d().setUserID(l).setRecipientID(b).setEntrypoint(c).setLwaState(e.INITIATED).log()},"MessengerNewWavePrompt.react")};return c}(b("React").PureComponent);a.propTypes={threadID:b("prop-types").string.isRequired,recipientName:b("prop-types").string,entrypoint:b("prop-types").oneOf(Object.values(b("MessengerWaveEntrypoint"))).isRequired};e.exports=a}),null);
__d("MessengerPagesCommercePaymentEnabledAdminMessage.react",["cssVar","cx","fbt","ix","Image.react","Link.react","MessengerEnvironment","PagesCommerceBuyerNUXDialog.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showDialog:!1},c.$1=function(){c.setState({showDialog:!1})},c.$2=function(){c.setState({showDialog:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;return b("React").jsxs("div",{className:a?"_2piv":"",children:[b("React").jsx(b("Image.react"),{className:"_3-96",src:j("275999")}),b("React").jsx("div",{children:this.props.message.log_message_body}),b("React").jsx("div",{className:"_3-8w",children:b("React").jsx(b("Link.react"),{onClick:this.$2,style:{color:"#0084ff",textDecoration:"none"},children:i._("Learn More")})}),b("React").jsx(b("PagesCommerceBuyerNUXDialog.react"),{isShown:this.state.showDialog,onConfirm:this.$1})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerReminderAdminMessage.react",["cx","fbt","AsyncRequest","CurrentUser","EventPlanStrings","EventReminderConstants","EventsMessengerComActionContextJSConfig","FBJSON","MessengerButtonReact.re","React","XEventReminderRSVPController","formatDate","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.re").make,j=b("EventReminderConstants").GuestStates;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.guest_state_list:a:a:a;if(typeof a==="string")try{a=JSON.parse(a)}catch(a){return[]}return Array.isArray(a)?a:[]};d.$2=function(){return this.$1().filter(function(a){return a.guest_list_state==="GOING"}).length};d.$3=function(){var a=this.$2();return b("React").jsx("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao"),children:b("EventPlanStrings").getSubtitle(a,null,!1)})};d.$4=function(){__p&&__p();var a=this,c;if(!this.props.isMessenger)return null;c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;if(c==="lightweight_event_delete")return null;c=this.$5();if(!c)return null;var d=Math.floor(Date.now()/1e3);if(c<=d)return null;c="INVITED";d=this.$1();for(var e=0;e<d.length;e++)d[e].node&&d[e].node.id===b("CurrentUser").getID()&&(c=d[e].guest_list_state);e=h._("Going");d=h._("Can't Go");return b("React").jsxs("div",{className:"_3waq",children:[b("React").jsx("div",{className:"_3war",children:b("React").jsx(i,{className:"_3waw"+(c==="GOING"?" _3wat":""),onClick:function(b){b.stopPropagation(),a.$6(j.GOING)},label:e,type:"primary",use:"default"})}),b("React").jsx("div",{className:"_3wax",children:b("React").jsx(i,{className:"_3waw"+(c==="DECLINED"?" _3wat":""),onClick:function(b){b.stopPropagation(),a.$6(j.DECLINED)},label:d,type:"primary",use:"default"})})]})};d.$6=function(a){var c;c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;if(!c)return;var d={action_history:[{surface:b("EventsMessengerComActionContextJSConfig").messenger_com,mechanism:b("EventsMessengerComActionContextJSConfig").reminder_admin_text}]};c=b("XEventReminderRSVPController").getURIBuilder().setInt("event_reminder_id",c).setEnum("guest_state",a).setString("acontext",b("FBJSON").stringify(d));new(b("AsyncRequest"))(c.getURI()).send()};d.$5=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));return a};d.$7=function(){__p&&__p();var a,c=this.$5();if(!c)return[null,null];a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_end_time:a:a:a;typeof a==="string"?a=parseInt(a,10):typeof a!=="number"&&(a=0);var d=Math.floor(Date.now()/1e3),e=b("formatDate")(c,"j"),f=e[e.length-1]>="0"&&e[e.length-1]<=9,g=b("formatDate")(c,"M"),i=[];i.push(this.props.isMessenger?b("React").jsxs("div",{className:"_3way",children:[b("React").jsx("div",{className:"_3waz",children:g.toUpperCase()}),b("React").jsx("div",{className:"_3wa-"+(f?"":" _279y"),children:e})]}):null);c<=d&&d<=a?g=h._("Happening now"):g=b("EventPlanStrings").getDisplayDateAndTimeFBT(c);i.push(b("React").jsx("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao"),children:g}));return i};d.$8=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_title:a:a:a;return a?b("React").jsx("div",{className:"_3wb0"+(this.props.isMessenger?"":" _3wao"),children:a}):null};d.$9=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_location_name:a:a:a;return a?b("React").jsx("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao"),children:a}):null};d.render=function(){var a=this.props.message;a=a.log_message_body;if(!this.props.isLastOfType)return b("React").jsxs("span",{children:[" ",a," "]});var c=this.$3(),d=this.$4(),e=this.$7(),f=e[0];e=e[1];var g=this.$8(),h=this.$9();return b("React").jsxs("div",{children:[a,b("React").jsxs("div",{className:"_3wb1",children:[f,b("React").jsxs("div",{className:"_3wb3"+(this.props.isMessenger?"":" _3wb4"),children:[g,e,h||c]}),d]})]})};return c}(b("React").Component);a.propTypes={message:b("prop-types").object.isRequired,isLastOfType:b("prop-types").bool.isRequired,isMessenger:b("prop-types").bool.isRequired};e.exports=a}),null);
__d("MercuryXMATRenderer",["cx","fbt","ix","ErrorBoundary.react","EventRemindersGating","FacepileRounded.react","Image.react","JSResource","Link.react","LinkCTAXMATAsyncLink.react","MercuryIDs","MessengerEnvironment","MessengerGameAdminMessage.react","MessengerGroupPollingAdminMessageReact.bs","MessengerNewWavePrompt.react","MessengerPagesCommercePaymentEnabledAdminMessage.react","MessengerParticipants.bs","MessengerReminderAdminMessage.react","MessengerTextWithEntities.react","MNAdsMessageUtils","MNCommerceLogMessageUtils","PagesInboxAddDetailsToInteractionText.react","PagesManagerInboxStore","PagesMarkAsPaidMessagingActionText.react","QE2Logger","React","ServicesAppointmentOptOutRequestsAdminText.react","ServicesAppointmentReminderAdminText.react","ServicesLeadGenBookableServicesAdminText.react","WorkActivationWavePromptExperiment","WorkGalahadScrollToMessageEventEmitter","cxMargin","gkx","isWebGLEnabled","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerGroupPollingAdminMessageReact.bs").jsComponent,k=b("lazyLoadComponent")(b("JSResource")("MessengerIcebreakersVoteCastMessage.react").__setRef("MercuryXMATRenderer"));function l(a,c){return a?b("React").jsx(b("Image.react"),{className:"_6-fd _3-94",src:c}):null}function m(a){return a?null:b("React").jsx(b("Image.react"),{className:"_3-94",src:i("676168")})}a={renderText:function(a,c,d,e,f,g){__p&&__p();var n;g=c.log_message_body?b("React").jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.log_message_body}):null;n=(n=c)!=null?(n=n.log_message_data)!=null?n.message_type:n:n;switch(n){case"journey_prompt_color":g=h._("You need to be on the latest version of Messenger on a mobile device to pick a color for this conversation.");break;case"journey_prompt_nickname":var o=null,p=b("MercuryIDs").getUserIDFromParticipantID(c.author);if(c.other_user_fbid&&p!==c.other_user_fbid){p=b("MercuryIDs").getParticipantIDFromUserID(c.other_user_fbid);o=b("MessengerParticipants.bs").getNow(p)}o&&o.short_name?g=h._("You need to be on the latest version of Messenger on a mobile device to set a nickname for {admin-text-message} .",[h._param("admin-text-message",o.short_name)]):g=h._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case"journey_prompt_like":g=h._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case"instant_game_update":b("gkx")("678262")&&b("isWebGLEnabled")()&&(g=b("React").jsx(b("MessengerGameAdminMessage.react"),{message:c,text:c.log_message_body,isLastOfType:d,onLoad:e}));break;case"ads_welcome_msg":break;case"ad_manage_message":b("MNAdsMessageUtils").isAdsAdminMessage(c)&&(g=b("MNAdsMessageUtils").getAdsPageManage(c,!1));break;case"work_invite_claimed":g=c.log_message_body?c.log_message_body:h._("You're now connected on Workplace Chat.");if(c.log_message_data.untypedData){p=c.log_message_data.untypedData.invite_recipient;o=c.log_message_data.untypedData.invite_sender;p=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));o=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o));if(o!=null&&p!=null){p=[p,o];g=b("React").jsx(b("FacepileRounded.react"),{profiles:p,message:g,numProfilesToDisplay:2,className:"_8lx"})}}b("WorkActivationWavePromptExperiment").showWavePrompt&&(g=b("React").jsxs("div",{children:[g,b("React").jsx(b("MessengerNewWavePrompt.react"),{threadID:c.thread_id,recipientName:null,entrypoint:"group_null_state"})]}));break;case"generic_new_connection":case"confirm_friend_request":o=n==="confirm_friend_request";p=c.log_message_data.untypedData;if(!p)break;n=o?p.friend_request_recipient:p.recipient_id;o=o?p.friend_request_sender:p.initiator_id;n=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(n));o=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o));if(o==null||n==null)break;n=[n,o];o=p.friend_request_subtype||p.subtype;p=o&&o.toLowerCase()==="icebreaker"?b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(k,{message:c,onLoad:e,isLastOfType:d})})}):null;b("QE2Logger").logExposureForUser("messenger_growth_tombstone");g=b("React").jsxs("div",{children:[b("React").jsx(b("FacepileRounded.react"),{profiles:n,message:c.log_message_body,numProfilesToDisplay:2,className:"_8lx"}),p]});break;case"group_thread_created":g=b("React").jsxs("div",{children:[g,b("React").jsx(b("MessengerNewWavePrompt.react"),{threadID:c.thread_id,recipientName:null,entrypoint:"group_null_state"})]});break;case"group_poll":g=b("React").jsx(j,{customColor:a,message:c,isLastOfType:d,onLoad:e});break;case"pages_commerce_payment_enabled":g=b("React").jsx(b("MessengerPagesCommercePaymentEnabledAdminMessage.react"),{message:c});break;case"thread_customization_upsell":b("MessengerEnvironment").messengerui?g=h._("Customize this conversation: choose the color, emoji and nicknames from the sidebar."):g=h._("Choose the color, emoji and nicknames from the sidebar of your conversation on www.messenger.com.");break;case"pages_mark_as_paid":case"pages_mark_as_paid_new":o=c.log_message_data.untypedData;n=o&&o.user_id;p=o&&o.page_id;a=b("React").jsxs("div",{className:"_86l3",children:[b("React").jsx(b("Image.react"),{className:"_86kw",src:i("94379")}),h._("Only you can see this.")]});g=b("React").jsxs(b("React").Fragment,{children:[a,b("React").jsx(b("PagesMarkAsPaidMessagingActionText.react"),{pageID:p,detectionType:o?o.detection_type:null,message:c.log_message_body,messageID:c.message_id,isPageMessage:f,userID:n})]});break;case"page_thread_action_system_add_details":a=c.log_message_data.untypedData;p=a&&a.user_id;o=a&&a.page_id;n=a&&a.interaction_type;var q=a&&a.interaction_id;a=a&&a.should_show_cta;var r=b("React").jsxs("div",{className:"_86l3",children:[b("React").jsx(b("Image.react"),{className:"_86kw",src:i("94379")}),h._("Only you can see this.")]});g=b("React").jsxs("div",{children:[r,b("React").jsx(b("PagesInboxAddDetailsToInteractionText.react"),{defaultCurrency:b("PagesManagerInboxStore").getConfig().defaultCurrency,pageID:o,interactionID:q,interactionType:n,message:c.log_message_body,messageID:c.message_id,isPageMessage:f,userID:p,shouldShowCTA:!!a})]});break;case"ad_reply_message":g=b("MNAdsMessageUtils").getAdReplyAdminMessage(c);break;case"messenger_ad_context":g=b("MNAdsMessageUtils").getAdContextAdminMessage(c);break;case"post_shared_from_group":r=c.log_message_data.untypedData;o=r.post_uri;if(o!==null){q=h._("View Post");g=b("React").jsxs("div",{children:[g," ",b("React").jsx(b("Link.react"),{href:o,children:q})]})}break;case"workchat_reminder_link_cta":var s=c.log_message_data.untypedData;n=function(){b("WorkGalahadScrollToMessageEventEmitter").emit("scrollToMessage",s.message_id)};g=b("React").jsxs("div",{children:[c.log_message_body," ",b("React").jsx(b("Link.react"),{href:"#",onClick:n,children:h._("View Message")})]});break;case"link_cta":p=c.log_message_data.untypedData;a=p.primary_text?p.primary_text:p.link_cta_xmat_primary_text;r=p.primary_text?p.cta_text:p.link_cta_xmat_cta_text;if(p.www_is_async_url){o=p.async_url;g=b("React").jsxs("div",{children:[a," ",b("React").jsx(b("LinkCTAXMATAsyncLink.react"),{text:r,uri:o})]})}else{q=p.primary_text?p.cta_url:p.link_cta_xmat_cta_url;g=b("React").jsxs("div",{children:[a," ",b("React").jsx(b("Link.react"),{href:q,children:r})]})}break;case"pages_platform_appointment_reminder":o=(n=c)!=null?(n=n.log_message_data)!=null?n.untypedData:n:n;p=o&&o.product_name;a=o&&o.start_time;q=o&&o.user_name;g=b("React").jsx(b("ServicesAppointmentReminderAdminText.react"),{isPageMessage:f,message:c.log_message_body,productName:p,startTime:a,timestamp:c.timestamp,userName:q});break;case"services_vertical_opt_out_requests":n=(r=c)!=null?(r=r.log_message_data)!=null?(r=r.untypedData)!=null?r.page_id:r:r:r;g=n&&b("React").jsx(b("ServicesAppointmentOptOutRequestsAdminText.react"),{message:c.log_message_body,pageID:n,userID:c.other_user_fbid});break;case"services_vertical_lead_gen_survey":f=(o=c)!=null?(o=o.log_message_data)!=null?(o=o.untypedData)!=null?o.page_id:o:o:o;g=f&&b("React").jsx(b("ServicesLeadGenBookableServicesAdminText.react"),{edit:!1,message:c.log_message_body,pageID:f});break;case"services_vertical_lead_gen_survey_edit":a=(p=c)!=null?(p=p.log_message_data)!=null?(p=p.untypedData)!=null?p.page_id:p:p:p;g=a&&b("React").jsx(b("ServicesLeadGenBookableServicesAdminText.react"),{edit:!0,message:c.log_message_body,pageID:a});break;case"messenger_group_sync_opt_in":break;case"lightweight_event_create":case"lightweight_event_update":case"lightweight_event_delete":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_notify_before_event":case"lightweight_event_notify":case"lightweight_event_rsvp":b("QE2Logger").logExposureForUser("omni_m_experiments_reminders");r=b("EventRemindersGating").omniMRenderXMATForAllReminderTypes||"M_REMINDER"===((q=c)!=null?(q=q.log_message_data)!=null?(q=q.untypedData)!=null?q.event_type:q:q:q)&&b("EventRemindersGating").omniMRenderXMATForMReminderType;r&&(g=b("React").jsx(b("MessengerReminderAdminMessage.react"),{message:c,isLastOfType:d,isMessenger:b("MessengerEnvironment").messengerui}));break;case"messenger_growth_generic_admin_text":n=c.log_message_data.untypedData;if(!n||!n.facepile_ids||n.facepile_ids.length!=2)break;o=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(n.facepile_ids[0]));f=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(n.facepile_ids[1]));p=[o,f];a=b("MessengerEnvironment").messengerui;q=n.title;r=n.description;o=n.cta_uri;f=a?60:40;p=b("React").jsx("div",{children:b("React").jsx(b("FacepileRounded.react"),{direction:"descending",profiles:p,message:"",numProfilesToDisplay:2,className:"_8lx",imageSize:f})});f=n.banner_uri!==null;var t=l(f,n.banner_uri),u=m(f);f=!a&&f;var v=null;n.is_two_way||(v=b("React").jsxs("div",{className:"_74da",children:[b("React").jsx(b("Image.react"),{className:"_74db",src:i("94379")}),h._("Only you can see this.")]}));g=b("React").jsxs("div",{children:[v,b("React").jsxs("div",{className:(f?"_6-fe":"")+(f?"":" _32xu"),children:[t,u,b("React").jsx("div",{className:"_32xz"+(a?" _6kxz":"")+(f?" _6-ff":""),children:q}),b("React").jsx("div",{className:"_32x-"+(f?" _6-ff":""),children:r}),p,o?b("React").jsx("div",{className:"_6u9q"+(f?" _6-ff":""),children:b("React").jsx(b("Link.react"),{href:o,children:h._("See Friendship")})}):null]})]});break;case"messenger_icebreaker_vote_cast":n=c.log_message_data.untypedData;if(!n)break;v=c.log_message_body;g=b("React").jsxs("div",{children:[v,b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(k,{message:c,onLoad:e,isLastOfType:d})})})]});break;case"messenger_thread_resurrection_notice":b("MNCommerceLogMessageUtils").isThreadResurrectionXMAT(c)&&(g=b("MNCommerceLogMessageUtils").getThreadResurrectionManage(c));break;default:break}return b("React").jsx("span",{children:g})}};e.exports=a}),null);
__d("P2PGroupSendReceiptDialog.react",["cx","fbt","FacepileRounded.react","Image.react","Link.react","MessengerEnvironment","P2PAmountUtils","P2PBigAmount.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLinkConstants","P2PLogger","P2PText.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.handleClose=function(){c.log("UI_Actn_3rd_Party_Receipt_Dismissed"),c.props.onClose()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.log("UI_Actn_3rd_Party_Receipt_Shown",{raw_amount:this.props.amount})};d.getReceiverStatusMap=function(){var a;return this.props.individualRequests.reduce(function(a,b){switch(b.currentStatus){case 7:case 2:case 4:a[b.currentStatus].push(b);break;default:a[1].push(b);break}return a},(a={},a[2]=[],a[7]=[],a[1]=[],a[4]=[],a))};d.getRequestProfile=function(a){a=a.requestee||{};return{image_src:a.picture,name:a.full_name}};d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.props.eventFlow},c))};d.renderBody=function(){var a;return(a=b("React")).jsxs(b("P2PDialogBody.react"),{children:[a.jsxs("ul",{children:[this.renderParticipantRow(this.props.sender,!0),this.renderParticipantRow(this.props.receiver,!1)]}),this.renderReceiverStatusList(),a.jsx("div",{className:"_bpy",children:a.jsx(b("P2PBigAmount.react"),{amount:b("P2PAmountUtils").sanitizeAmount(this.props.amount),currencyCode:this.props.currencyCode,isPending:this.props.isGrayAmount,size:"large"})}),a.jsxs(b("P2PText.react"),{className:"_bpt",size:"small",type:"secondary",children:[this.props.bodyText," ",a.jsx(b("Link.react"),{className:"_1ed3",href:b("P2PLinkConstants").helpCenterURI,target:"_blank",children:h._("Learn More")})]})]})};d.renderParticipantRow=function(a,c){return!c&&this.props.individualRequests.length>1?null:b("React").jsxs("li",{className:"_2chg",children:[b("React").jsx("div",{className:"_2chh",children:b("React").jsx(b("Link.react"),{href:a.profile_uri,onClick:this.props.onClose,children:b("React").jsx(b("Image.react"),{height:50,src:a.picture,width:50})})}),b("React").jsx("div",{className:"_2chi",children:b("React").jsxs(b("P2PText.react"),{type:"primary",children:[b("React").jsx(b("P2PText.react"),{type:"secondary",children:this.renderParticipantText(c)}),a.full_name]})})]},a.id)};d.renderParticipantText=function(a){return a?h._("From"):h._("To")};d.renderReceiverStatusList=function(){if(this.props.individualRequests.length<2)return null;var a=this.getReceiverStatusMap();return b("React").jsxs("ul",{children:[this.renderStatus(a,4),this.renderStatus(a,2),this.renderStatus(a,1),this.renderStatus(a,7)]})};d.renderStatus=function(a,c){a=a[c].map(this.getRequestProfile);return a.length===0?null:b("React").jsxs("li",{className:"_5-av",children:[b("React").jsx(b("P2PText.react"),{className:"_2chi _2pir",type:"secondary",children:this.renderStatusText(c)}),b("React").jsx(b("FacepileRounded.react"),{className:"_3-8w",hoverBehavior:"name",imageSize:40,numProfilesToDisplay:9,profiles:a})]},c)};d.renderStatusText=function(a){switch(a){case 2:return h._("Declined");case 7:return h._("Expired");case 4:return h._("Paid");case 1:default:return h._("Pending")}};d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?380:360,d=this.props.title;return b("React").jsxs(b("P2PDialog.react"),{className:a?"_bpv":"",layerHideOnBlur:!1,onToggle:this.props.onClose,width:c,children:[b("React").jsx(b("P2PDialogTitle.react"),{children:d}),this.renderBody(),b("React").jsx(b("P2PDialogFooter.react"),{children:b("React").jsx(b("P2PButton.react"),{label:h._("OK"),onClick:this.handleClose,type:"primary"})})]})};return c}(b("React").Component);a.defaultProps={bodyText:h._("You can send money to friends in groups."),eventFlow:"UI_Flow_P2P_Group_Send",individualRequests:[],isGrayAmount:!1,title:h._("Payment Details")};e.exports=a}),null);
__d("P2PGroupPaymentRequestReceiptDialog.react",["fbt","P2PActions","P2PGroupSendReceiptDialog.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.amount,currencyCode:this.props.currencyCode,bodyText:g._("You can send payment requests to friends in groups"),eventFlow:"UI_Flow_P2P_Group_Request",individualRequests:this.props.individualRequests,isGrayAmount:!0,receiver:this.props.requestee,sender:this.props.requester,title:g._("Payment Request Details"),onClose:this.props.onClose||b("P2PActions").hideDialog})};return c}(b("React").Component);e.exports=a}),null);
__d("P2PMercuryLogMessage.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerEnvironment","P2PGroupPaymentRequestReceiptDialog.react","P2PGroupSendReceiptDialog.react","P2PPaymentLogMessageSubtype","React","ReactLayeredComponentMixin_DEPRECATED","XP2PPaymentRequestReceiptController","XP2PTransactionDetailController","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();c=b("createReactClass_DEPRECATED")({displayName:"P2PMercuryLogMessage",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{amount:(a=b("prop-types")).string,receiver:a.object.isRequired,sender:a.object.isRequired,subtype:a.oneOf(Object.keys(b("P2PPaymentLogMessageSubtype")).map(function(a){return b("P2PPaymentLogMessageSubtype")[a]})),transferID:a.string.isRequired,threadFBID:a.string,threadID:a.string},getDefaultProps:function(){return{amount:"",sender:null,receiver:null,subtype:null}},getInitialState:function(){return{groupPaymentRequestReceiptDetailsShown:!1,groupSendReceiptDetailsShown:!1}},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:!0})},handleGroupPaymentRequestDetailsLinkClicked:function(){this.setState({groupPaymentRequestReceiptDetailsShown:!0})},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupPaymentRequestReceiptDetailsShown:!1,groupSendReceiptDetailsShown:!1})},isViewerSender:function(){var a=this.props.sender.id;return a&&b("MercuryIDs").getUserIDFromParticipantID(a)===b("CurrentUser").getID()},isViewerReceiver:function(){var a=this.props.receiver.id;return a&&b("MercuryIDs").getUserIDFromParticipantID(a)===b("CurrentUser").getID()},renderPaymentRequestDetailsLink:function(){var a=b("XP2PPaymentRequestReceiptController").getURIBuilder().setString("id",this.props.transferID).getURI();return b("React").jsx(b("Link.react"),{className:"_kiq",href:a,target:"_blank",children:h._("See details")})},renderTransferDetailsLink:function(){var a=b("XP2PTransactionDetailController").getURIBuilder().setString("id",this.props.transferID).getURI();return b("React").jsx(b("Link.react"),{className:"_kiq",href:a,target:"_blank",children:h._("See details")})},renderGroupDetailsLink:function(){return b("React").jsx(b("Link.react"),{className:"_kiq",href:"#",onClick:this.handleGroupDetailsLinkClicked,children:h._("See details")})},renderGroupPaymentRequestDetailsLink:function(){return b("React").jsx(b("Link.react"),{className:"_kiq",href:"#",onClick:this.handleGroupPaymentRequestDetailsLinkClicked,children:h._("See details")})},renderLayers:function(){var a={},c={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},d={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};this.state.groupSendReceiptDetailsShown?a.groupSendReceiptDetailsDialog=b("React").jsx(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:c,sender:d}):this.state.groupPaymentRequestReceiptDetailsShown&&(a.groupPaymentRequestReceiptDetailsDialog=b("React").jsx(b("P2PGroupPaymentRequestReceiptDialog.react"),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:c,requester:d}));return a},render:function(){__p&&__p();var a=null,c=this.props.amount,d=this.props.subtype,e=this.isViewerSender(),f=this.isViewerReceiver(),g;!e&&!f?g=this.renderGroupDetailsLink():g=this.renderTransferDetailsLink();switch(d){case"sent_in_group":a=h._("{sendername} sent {amount} to {receivername}. {details}",[h._param("sendername",this.props.sender.name),h._param("amount",c),h._param("receivername",this.props.receiver.name),h._param("details",g)]);break;case"canceled_expired":case"canceled_same_card":case"canceled_sender_risk":case"canceled_recipient_risk":case"canceled_customer_service":e?a=h._("Your {amount} payment was canceled. {details}",[h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):f?a=h._("{name}'s {amount} payment was canceled. {details}",[h._param("name",this.props.sender.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):a=h._("{sender_name}'s {amount} payment to {receiver_name} was canceled. {details}",[h._param("sender_name",this.props.sender.name),h._param("amount",c),h._param("receiver_name",this.props.receiver.name),h._param("details",g)]);a=b("React").jsx("span",{className:"_5rdx",children:a});break;case"canceled_declined":e?a=h._("{name} didn't accept your {amount} payment. {details}",[h._param("name",this.props.receiver.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):f?a=h._("You didn't accept {name}'s {amount} payment. {details}",[h._param("name",this.props.sender.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):a=h._("{receiver_name} didn't accept {sender_name}'s {amount} payment. {details}",[h._param("receiver_name",this.props.receiver.name),h._param("sender_name",this.props.sender.name),h._param("amount",c),h._param("details",g)]);a=b("React").jsx("span",{className:"_5rdx",children:a});break;case"request_canceled_by_requester":e?a=h._("You canceled your request for {payment request amount}. {details}",[h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("{sender's name} canceled their request for {payment request amount}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{sender's name} canceled their request for {payment request amount} from {receiver's name}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("receiver's name",this.props.receiver.name),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=b("React").jsx("span",{className:"_5rdx",children:a});break;case"request_declined_by_requestee":e?a=h._("{receiver's name} declined your request for {payment request amount}. {details}",[h._param("receiver's name",this.props.receiver.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("You declined {sender's name}'s request for {payment request amount}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[h._param("receiver's name",this.props.receiver.name),h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=b("React").jsx("span",{className:"_5rdx",children:a});break;case"request_expired":e?a=h._("Your request for {payment request amount} expired so it was canceled. {details}",[h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("{sender's name}'s request for {payment request amount} expired so it was canceled. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was canceled. {details}",[h._param("sender's name",this.props.sender.name),h._param("receiver's name",this.props.receiver.name),h._param("payment request amount",c),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=b("React").jsx("span",{className:"_5rdx",children:a});break}return b("React").jsx("div",{className:b("MessengerEnvironment").messengerui?"_5rdy":"",children:a})}});e.exports=c}),null);
__d("MessengerLogMessageBody.react",["ImmutableObject","MercuryLogMessageType","MessengerParticipants.bs","P2PMercuryLogMessage.react","React","ReactComponentWithPureRenderMixin","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){__p&&__p();a=b("createReactClass_DEPRECATED")({displayName:"MessengerLogMessageBody",_subscription:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{thread:b("prop-types").instanceOf(b("ImmutableObject")),message:b("prop-types").object.isRequired,viewer:b("prop-types").string.isRequired},getInitialState:function(){return{extraParticipants:{}}},componentDidMount:function(){this._subscription=this._computeParticipants()},_computeParticipants:function(){__p&&__p();var a=this,c=this._getIDsToFetch(this.props);if(c.length===0)return null;var d=[],e={};c.forEach(function(a){var c=b("MessengerParticipants.bs").getNow(a);e[a]=c;c||d.push(a)});this.setState({extraParticipants:e});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var c=a.state.extraParticipants;d.forEach(function(a){c[a]=b[a]});a._subscription=null;a.setState({extraParticipants:c})}):null},_getIDsToFetch:function(a){var c=[];a=a.message;var d=a.log_message_data;a=a.log_message_type;a===b("MercuryLogMessageType").ORION&&c.push(d.senderId,d.receiverId);return c},componentDidUpdate:function(){var a=this,b=this._getIDsToFetch(this.props);!this._subscription&&!b.every(function(b){return a.state.extraParticipants[b]})&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){var a=this.props.message.log_message_type;if(a!==b("MercuryLogMessageType").ORION)return null;switch(a){case b("MercuryLogMessageType").ORION:return this._renderP2PLogMessage(this.props.message);default:return null}},_renderP2PLogMessage:function(a){var c=a.log_message_data,d=c.senderId,e=c.receiverId,f=this.state.extraParticipants;d=f[d]||new(b("ImmutableObject"))();f=f[e]||new(b("ImmutableObject"))();return b("React").jsx(b("P2PMercuryLogMessage.react"),{amount:c.formattedAmount,receiver:f,sender:d,subtype:c.subtype,threadFBID:a.thread_fbid,threadID:a.thread_id,transferID:c.transfer_id})}});e.exports=a}),null);
__d("MessengerLogMessageRenderer.bs",["fbt","invariant","bs_curry","React","bs_js_dict","FBLogger","bs_caml_array","bs_caml_option","MercuryViewer","TooltipLink.react","MessengerParticipants.bs","MercuryMessageRendererUtils","MessengerTextWithEntities.react","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){if(a!==void 0)return b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("bs_caml_option").valFromOption(a).name});else{b("FBLogger")("messenger.com").mustfix("Could not find participant for renderParticipantName");return null}}function j(a,c,d){__p&&__p();c.length>2||h(0,17765);var e=function(a){var c=b("React").jsx("div",{children:a.map(function(a){if(a!==void 0)return b("React").jsx("div",{children:b("bs_caml_option").valFromOption(a).name});else{b("FBLogger")("messenger.com").mustfix("Could not find participant for renderTooltipLink");return null}})});return b("React").createElement(b("TooltipLink.react"),{children:g._({"*":"{num} more"},[g._param("num",a.length,[0])]),tooltip:c,alignH:"center",position:"above"})},f=c.concat([a.author]);b("MessengerParticipants.bs").getMulti(f,function(f){var h=c.map(function(a){return b("bs_js_dict").get(f,a)});if(a.author===b("MercuryViewer").getID())return b("bs_curry")._1(d,g._("You added {subscriber1} and {more_people}.",[g._param("subscriber1",i(b("bs_caml_array").caml_array_get(h,0))),g._param("more_people",e(h.slice(1,h.length)))]));else if(b("bs_caml_array").caml_array_get(c,0)===b("MercuryViewer").getID())return b("bs_curry")._1(d,g._("{actor} added you and {more_people}.",[g._param("actor",i(b("bs_js_dict").get(f,a.author))),g._param("more_people",e(h.slice(1,h.length)))]));else return b("bs_curry")._1(d,g._("{actor} added {subscriber1} and {more_people}.",[g._param("actor",i(b("bs_js_dict").get(f,a.author))),g._param("subscriber1",i(b("bs_js_dict").get(f,b("bs_caml_array").caml_array_get(c,0)))),g._param("more_people",e(h.slice(1,h.length)))]))});return 0}function a(a,c){__p&&__p();var d=a.log_message_data;if(d==null){b("FBLogger")("messenger.com").mustfix("Argument to renderSubscribeMessage was not a log message!");return 0}else{d=b("MercuryMessageRendererUtils").moveCurrentUserToFront(d.added_participants);var e=d.length;if(e>=3)return j(a,d,c);else switch(e){case 0:b("FBLogger")("messenger.com").mustfix("Cannot render subscribe log message with no added participants");return 0;case 1:case 2:break}d=a.log_message_body;if(d==null){b("FBLogger")("messenger.com").mustfix("Could not render subscribe log message with no log_message_body");return 0}else return b("bs_curry")._1(c,b("React").jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d}))}}f.getParticipantName=i;f.renderManySubscribersMessage=j;f.renderSubscribeMessage=a}),null);
__d("MessengerLogMessageRenderer.re",["bs_curry","MessengerLogMessageRenderer.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerLogMessageRenderer.bs").renderSubscribeMessage,a,c);return a};f.renderSubscribeMessage=a}),null);
__d("MessengerMessage.re",["bs_curry","MessengerMessage.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._6(b("MessengerMessage.bs").makeFakeMessage,a.messageId,a.threadId,a.author,a.actionType,a.timestamp,c);return a};f.makeFakeMessage=a;c=b("MessengerMessage.bs").hasError;f.hasError=c}),null);
__d("MessengerLogMessage.react",["cx","fbt","ix","EventRemindersGating","EventsMessengerComActionContextJSConfig","Image.react","JSResource","Link.react","MercuryLWARenderer","MercuryXMATRenderer","MessengerDialogs.re","MessengerLightweightActionUtils","MessengerLogMessageBody.react","MessengerLogMessageRenderer.re","MessengerMessage.re","MNCommerceLogMessageUtils","React","WorkChatRedesignedMessageListCheck.re","convertMIGColorToFIGColor","joinClasses","lazyLoadComponent","prop-types","requireWeak","EventReminderRequestHelper"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("React").useEffect,k=b("React").useState,l=b("lazyLoadComponent")(b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerLogMessage.react")),m=i("86913");function n(a){var c=a.message,d=a.thread;a=a.viewer;var e=k(null),f=e[0],g=e[1];j(function(){c.log_message_type==="log:subscribe"&&b("MessengerLogMessageRenderer.re").renderSubscribeMessage(c,g)},[c]);if(f!=null)return f;return b("MessengerLightweightActionUtils").isLWAMessage(c)?b("MercuryLWARenderer").renderCollapsedText(c):b("React").jsx(b("MessengerLogMessageBody.react"),{message:c,viewer:a,thread:d})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showEventPlanDialog:!1},d.$5=function(a){__p&&__p();var c;a.stopPropagation();if(d.state.showEventPlanDialog)return;d.setState({showEventPlanDialog:!0});if(!d.props.thread)return;var e=d.props.thread;a=b("EventReminderRequestHelper");var f={action_history:[{surface:b("EventsMessengerComActionContextJSConfig").messenger_com,mechanism:b("EventsMessengerComActionContextJSConfig").reminder_admin_text}]},g=(c=d.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;!g?d.setState({showEventPlanDialog:!1}):a.fetchEventReminder(e.thread_id,g,function(){b("MessengerDialogs.re").showDialog(function(){var a;return(a=b("React")).jsx(a.Suspense,{fallback:a.jsx("div",{}),children:a.jsx(l,{threadID:e.thread_id,eventID:g,dialogOnly:!0,dialogHandleToggle:d.$6,actionContext:f})})})})},d.$6=function(a){d.setState({showEventPlanDialog:!1}),b("MessengerDialogs.re").removeAllDialogs()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("EventRemindersGating").shouldShowPlansOnMessengerCom?b("React").jsx("span",{className:"_ofg",ref:"attachment",children:this.$1()}):null,c=this.$2();if(c==null&&this.props.message.log_message_type!=="log:orion"){var d=b("convertMIGColorToFIGColor")(this.props.thread&&this.props.thread.solid_color);c=b("MercuryXMATRenderer").renderText(d,this.props.message,this.props.isLastOfType,this.props.onImageLoad,this.props.isPageMessage,this.props.viewer)}return b("React").jsxs("div",{className:this.$3(),children:[this.$4(),b("React").jsx("i",{className:"_uwa"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _8lms":"")}),b("React").jsx("span",{className:"_3oh-",children:c?c:b("React").jsx(n,{message:this.props.message,viewer:this.props.viewer,thread:this.props.thread})}),a]})};d.$2=function(){var a=this.props.message;if(b("MNCommerceLogMessageUtils").isCommercePageAdminMessage(a))return b("MNCommerceLogMessageUtils").getCommercePageManage(a,!0);return b("MNCommerceLogMessageUtils").isThreadResurrectionXMAT(a)?b("MNCommerceLogMessageUtils").getThreadResurrectionManage(a):null};d.$4=function(){return!b("MessengerMessage.re").hasError(this.props.message)?null:b("React").jsx(b("Image.react"),{className:"_41-9",src:m})};d.$3=function(){__p&&__p();var a,c=this.props.message,d=c.log_message_type==="log:unsubscribe"&&c.log_message_data.removed_participants.indexOf(c.author)!==-1,e=this.props.viewer;switch(c.log_message_type){case"log:subscribe":a="_uwb";break;case"log:unsubscribe":a=d?"_uwc":"_uwe";break;case"log:phone-call":a=c.log_message_data.caller.indexOf(e)!==-1?"_uwf":"_uwg";break;case"log:video-call":a=c.log_message_data.caller.indexOf(e)!==-1?"_uwh":"_uwi";break;case"log:thread-name":a="_uwj";break;case"log:thread-image":a="_uwk";break;case"log:error-msg":a="_uwl";break;case"log:live-listen":a="_uwm";break;case"log:wallpaper":a="_uwn";break;case"log:orion":a="_uwo";break;case"log:switch":a="_uwp";break;case"log:page-reply":a="_uwq";break}return b("joinClasses")("_497p"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w5v":"")+((c.log_message_type==="log:phone-call"||c.log_message_type==="log:video-call")&&!c.log_message_data.answered?" _3no3":"")+(c.log_message_data&&c.log_message_data.message_type==="instant_game_update"?" _11es":""),a)};d.$1=function(){__p&&__p();var a;if(!this.props.thread)return null;var c=this.props.thread;if(!c.lightweight_event||!this.props.message.log_message_data)return null;var d=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a,e;b("requireWeak")("EventReminderStateStore",function(a){e=a.getEvent(c.thread_id,d)});if(!e||!e.exists)return null;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));if(a<=Math.floor(Date.now()/1e3))return null;var f;switch(this.props.message.log_message_data.message_type){case"lightweight_event_create":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_update":f=h._("Change");break;default:f=null}a=b("React").jsx(b("Link.react"),{href:"#",onClick:this.$5,title:h._("Edit Event"),ref:"event_rem_link",children:f});this.props.displayItems&&(a=null);return a};return c}(b("React").PureComponent);a.propTypes={message:(c=b("prop-types")).object.isRequired,viewer:c.string.isRequired,isLastOfType:c.bool.isRequired,onImageLoad:c.func};e.exports=a}),null);
__d("MessengerDateBreak.bs",["cx","React","FBLogger","formatDate","joinClasses","WorkChatRedesignedMessageListCheck.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.date;a=a.className;a=a!==void 0?a:"";try{var d={today:"g:ia",thisYear:"M jS, g:ia",withinWeek:"D g:ia",older:"m/d/Y g:ia",future:"g:ia"};c=b("formatDate")(c,d);return b("React").jsx("h4",{children:b("React").jsx("time",{children:c,className:"_3oh-"}),className:b("joinClasses")(a,"_497p"+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w5v":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w78":"")+" _2lpt")})}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: Js.Date.getTime(date)");return null}}c=b("React").memo(a,function(a,b){return a.date.getTime()===b.date.getTime()});f.make=c}),null);
__d("MessengerDateBreak.re",["MessengerDateBreak.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerDateBreak.bs").make;f.make=a}),null);
__d("MercuryExperimentUtils",["fbt","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(){__p&&__p();var a=b("qex")._("1269176");a===null&&(a=26214400);var c;switch(a){case 52428800:c=50;break;case 78643200:c=75;break;default:c=25}a=g._("The file you have selected is too large. The maximum size is {=size}MB",[g._param("=size",c)]);return a.toString()}c={getMaxAttachmentSizeExceededDialog:a};e.exports=c}),null);
__d("ChatFileUploadLoggingUtils",["CurrentUser","WorkContentActivityTypedLogger"],(function(a,b,c,d,e,f){"use strict";a={log:function(a,c){c===void 0&&(c="CHAT_MAIN"),b("CurrentUser").isWorkUser()&&new(b("WorkContentActivityTypedLogger"))().setSurfaceType(c).setEvent("CHAT_FILE_UPLOAD").setAdditionalData({file_size:a.size.toString(),file_type:a.type}).log()}};e.exports=a}),null);
__d("MercuryFileUploader",["csx","fbt","ArbiterMixin","ChatFileUploadLoggingUtils","CSS","Dialog","DOM","Event","FBLogger","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","MercuryAttachment","MercuryAttachmentTemplates","MercuryConstants","MercuryExperimentUtils","PhotosUploadID","SubscriptionsHandler","getObjectValues","gkx","mixin","shield"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d,e){__p&&__p();var f;f=a.call(this)||this;f.$MercuryFileUploader1=b;f.$MercuryFileUploader2={};f.$MercuryFileUploader3={};f.$MercuryFileUploader4={};f.$MercuryFileUploader5={};f.$MercuryFileUploader6={};f.$MercuryFileUploader7={};f.$MercuryFileUploader8={};f.$MercuryFileUploader9={};f.$MercuryFileUploader10={};f.updateElements(c,d,e);return f}var d=c.prototype;d.updateElements=function(a,c,d){__p&&__p();this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader11=new(b("SubscriptionsHandler"))();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.$MercuryFileUploader12=new(b("FileForm"))(a,[b("FormSubmitOnChange"),b("FileFormResetOnSubmit")]);this.$MercuryFileUploader12.setAllowCrossOrigin(!0);this.$MercuryFileUploader12.setUploadInParallel(!0);a=b("DOM").find(a,"._4q60");var e=b("DOM").find(a,"._4q61");new(b("FileInput"))(a,e,c);this.$MercuryFileUploader11.addSubscriptions(this.$MercuryFileUploader12.subscribe("submit",function(){__p&&__p();var a={count:0,file_sizes:[],files:[]};if(c.files){for(var e=0;e<c.files.length;e++){b("ChatFileUploadLoggingUtils").log(c.files[e]);if(c.files[e].size>b("MercuryConstants").AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return!1}}e={};for(var f=0;f<c.files.length;f++){var g=this.$MercuryFileUploader13();this.$MercuryFileUploader14(g,c.files[f].name);a.count++;a.file_sizes.push(c.files[f].size);e[g]=c.files[f];a.files.push({upload_id:g,metadata:c.files[f]})}this.$MercuryFileUploader12.setFiles(e)}else d.value=this.$MercuryFileUploader13(),this.$MercuryFileUploader14(d.value,c.value),a.count=1;this.inform("submit",a)}.bind(this)),this.$MercuryFileUploader12.subscribe("success",this.$MercuryFileUploader15.bind(this)),this.$MercuryFileUploader12.subscribe("failure",this.$MercuryFileUploader16.bind(this)),b("Event").listen(e,"click",b("shield")(this.inform,this,"open")))};d.showAttachmentSizeErrorDialog=function(){this.$MercuryFileUploader12.abort();this.$MercuryFileUploader12.clear();var a=b("MercuryExperimentUtils").getMaxAttachmentSizeExceededDialog();new(b("Dialog"))().setTitle(h._("The file you have selected is too large")).setBody(b("gkx")("1147754")?h._("The file you have selected is too large. The maximum size is 100MB"):a).setButtons(b("Dialog").OK).setSemiModal(!0).show();b("FBLogger")("messenger_upload_file").warn("Uploading file is too large")};d.addDroppedFiles=function(a){__p&&__p();if(!this.$MercuryFileUploader12||!this.$MercuryFileUploader12.canUseXHR())return;var c={},d={count:0,file_sizes:[],files:[]};for(var e=0;e<a.length;e++){var f=a[e];if(f.size>b("MercuryConstants").AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return!1}var g=this.$MercuryFileUploader13();this.$MercuryFileUploader14(g,f.name);c[g]=f;d.file_sizes.push(f.size);d.count++;d.files.push({upload_id:g,metadata:f})}this.$MercuryFileUploader12.setFiles(c);this.$MercuryFileUploader12.forceSendViaXHR();this.inform("submit",d)};d.isUploading=function(){return!!Object.keys(this.$MercuryFileUploader8).length};d.addCachedAttachments=function(a){a.forEach(function(a){var b=this.$MercuryFileUploader13();this.$MercuryFileUploader14(b,a.filename);this.inform("cached-file-added",{upload_id:b,metadata:a});this.$MercuryFileUploader17(b,a)}.bind(this))};d.addCachedImageFiles=function(a){var b=h._("Photo");a.forEach(function(a){var c=this.$MercuryFileUploader13();this.$MercuryFileUploader14(c,b);this.$MercuryFileUploader17(c,{filename:a,image_id:a,filetype:"image/jpeg"})}.bind(this))};d.getAttachments=function(){return b("getObjectValues")(this.$MercuryFileUploader2)};d.getImageFiles=function(){var a=this,b=Object.keys(this.$MercuryFileUploader3).sort(),c=[];b.forEach(function(b){return c.push(a.$MercuryFileUploader3[b])});return c};d.getAnimatedImageFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader4)};d.getVideoFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader5)};d.getAudioFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader6)};d.getFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader7)};d.removeOneAttachment=function(a){this.$MercuryFileUploader18(a)};d.removeAttachments=function(){this.$MercuryFileUploader1&&b("DOM").empty(this.$MercuryFileUploader1),this.$MercuryFileUploader2={},this.$MercuryFileUploader3={},this.$MercuryFileUploader4={},this.$MercuryFileUploader5={},this.$MercuryFileUploader6={},this.$MercuryFileUploader7={},this.$MercuryFileUploader9={},this.$MercuryFileUploader8={},this.$MercuryFileUploader10={},this.$MercuryFileUploader1&&b("CSS").hide(this.$MercuryFileUploader1),this.inform("dom-updated")};d.destroy=function(){this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release(),this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy(),this.removeAttachments()};d.$MercuryFileUploader14=function(a,c){__p&&__p();var d=b("MercuryAttachmentTemplates")[":fb:mercury:upload-file-row"].build(),e={};this.$MercuryFileUploader9[a]=d;this.$MercuryFileUploader8[a]=!0;this.$MercuryFileUploader10[a]=Date.now();c=i(c);b("DOM").appendContent(d.getNode("iconText"),c);e.fileName=c;b("Event").listen(d.getNode("closeFileUpload"),"click",this.$MercuryFileUploader18.bind(this,a));this.$MercuryFileUploader1&&(b("DOM").appendContent(this.$MercuryFileUploader1,d.getRoot()),b("CSS").show(this.$MercuryFileUploader1));this.inform("dom-updated",e)};d.$MercuryFileUploader18=function(a,c){__p&&__p();this.$MercuryFileUploader8[a]?this.inform("upload-canceled-during-upload"):(this.$MercuryFileUploader2[a]||this.$MercuryFileUploader3[a]||this.$MercuryFileUploader4[a]||this.$MercuryFileUploader5[a]||this.$MercuryFileUploader6[a]||this.$MercuryFileUploader7[a])&&this.inform("upload-canceled-after-uploaded");delete this.$MercuryFileUploader2[a];delete this.$MercuryFileUploader3[a];delete this.$MercuryFileUploader4[a];delete this.$MercuryFileUploader5[a];delete this.$MercuryFileUploader6[a];delete this.$MercuryFileUploader7[a];delete this.$MercuryFileUploader8[a];delete this.$MercuryFileUploader10[a];c=this.$MercuryFileUploader9[a];delete this.$MercuryFileUploader9[a];c&&(b("DOM").remove(c.getRoot()),this.inform("dom-updated"));this.inform("upload-canceled");return!1};d.$MercuryFileUploader19=function(a,c){a=this.$MercuryFileUploader9[a];c=b("MercuryAttachment").getAttachIconClassByMime(c);b("CSS").addClass(a.getNode("iconText"),c);b("CSS").addClass(a.getRoot(),"done")};d.$MercuryFileUploader17=function(a,b){this.$MercuryFileUploader8[a]&&(delete this.$MercuryFileUploader8[a],b.image_id?this.$MercuryFileUploader3[a]=b.image_id:b.gif_id?this.$MercuryFileUploader4[a]=b.gif_id:b.video_id?this.$MercuryFileUploader5[a]=b.video_id:b.audio_id?this.$MercuryFileUploader6[a]=b.audio_id:b.file_id?this.$MercuryFileUploader7[a]=b.file_id:this.$MercuryFileUploader2[a]=b,this.$MercuryFileUploader19(a,b.filetype),this.inform("one-upload-completed",{upload_time_ms:Date.now()-this.$MercuryFileUploader10[a],upload_id:a,metadata:b})),this.isUploading()||this.inform("all-uploads-completed",{count:this.getAttachments().length})};d.$MercuryFileUploader15=function(a,b){a=b.response.getPayload();this.$MercuryFileUploader17(this.$MercuryFileUploader20(b),a.metadata[0])};d.$MercuryFileUploader16=function(a,b){this.inform("one-upload-failed"),this.$MercuryFileUploader18(this.$MercuryFileUploader20(b),a)};d.$MercuryFileUploader13=function(){return"upload_"+b("PhotosUploadID").getNewID()};d.$MercuryFileUploader20=function(a){var b=a.response.getPayload();if(a.upload)return a.upload.getName();else return b.uploadID};return c}(b("mixin")(b("ArbiterMixin")));function i(a){return a&&a.startsWith("C:\\fakepath\\")?a.substring(12):a}e.exports=a}),null);
__d("MercuryOrderedThreadlist",["invariant","ChatReliabilityInstrumentation","LogHistory","MercuryAPIArgsSource","MercuryDispatcher","MercuryFilters.bs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","MessagingTag","MessengerFolders.bs","MessengerState.bs","RangedCallbackManager"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("ordered_threadlist_model"),i=b("MercuryFilters.bs").getSupportedFilters().concat([b("MercuryFilters.bs").all,b("MessagingTag").GROUPS]),j=b("MessengerFolders.bs").getSupportedFolders().concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);a=function(){__p&&__p();a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){__p&&__p();var c=this;this.$1=a;this.$2=b("MercuryThreadIDMap").getForFBID(this.$1);this.$3=b("MercuryThreadInformer").getForFBID(this.$1);this.$4=b("MercuryDispatcher").getForFBID(this.$1);this.$5={};this.$6();this.$4.subscribe("update-threadlist",function(a,b){__p&&__p();if(!k(b))return;a=b.ordered_threadlists;if(a&&a.length)c.$7(a);else{a=(b.actions||[]).filter(function(a){return a.thread_id});c.$8(b.threads||[]);c.$9(a)}c.$3.updatedThreadlist()});this.$4.subscribe("invalidate-global-state",function(){return c.$10()})}var c=a.prototype;c.getThreadlistOrderMap=function(a,c){var d=this;this.$5[a][c]||(i=i.concat([c]),j.forEach(function(a){d.$5[a][c]=new(b("RangedCallbackManager"))(function(a){a=b("MessengerState.bs").getThreadMetaNow(d.$1,a);return a&&a.timestamp},function(a,b){return b-a},d.$2.canLinkExternally.bind(d.$2))}));return this.$5[a][c]};c.getThreadlist=function(a,c,d,e,f,g){return this.getFilteredThreadlist(a,c,d,b("MercuryFilters.bs").all,e,f,g)};c.getFilteredThreadlist=function(a,c,d,e,f,g,i){__p&&__p();var j=this.getThreadlistOrderMap(d,e);f=j.executeOrEnqueue(a,c,f,g);g=j.getUnavailableResources(f);if(g.length){if(j.getCurrentArraySize()<a){a={start:a,limit:c,filter:e,resources_size:j.getCurrentArraySize()};h.warn("range_with_gap",JSON.stringify(a))}this.getServerRequests().fetchThreadlistInfo(j.getCurrentArraySize(),g.length,d,e==b("MercuryFilters.bs").all?null:e,i,this.$11(j.getAllResources()))}return f};c.getServerRequests=function(){return b("MercuryServerRequests").getForFBID(this.$1)};c.getThreadlistUntilTimestamp=function(a,c,d){d=d||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(c,d).getElementsUntil(a)};c.getAvailableThreadlistNow=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).getAllResources()};c.getThreadCount=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).getCurrentArraySize()};c.hasLoadedThreadlist=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).hasReachedEndOfArray()};c.unsubscribe=function(a,c,d){d=d||b("MercuryFilters.bs").all,this.getThreadlistOrderMap(c,d).unsubscribe(a)};c.$10=function(){this.$5={},this.$6()};c.$6=function(){var a=this;j.forEach(function(c){a.$5[c]={},i.forEach(function(d){a.$5[c][d]=new(b("RangedCallbackManager"))(function(c){c=b("MessengerState.bs").getThreadMetaNow(a.$1,c);return c&&c.timestamp},function(a,b){return b-a},a.$2.canLinkExternally.bind(a.$2))})})};c.$12=function(a,c,d){var e=b("MessengerState.bs").getThreadMetaNow(this.$1,a);return!!(e&&e.timestamp&&d&&c&&this.$13(a)==c&&this.$14(a).includes(d))};c.$15=function(a,c,d){__p&&__p();var e=[],f=!1;a=(a||[]).filter(function(a){var e=a.filter||b("MercuryFilters.bs").all;return(a.folder==c||!a.folder&&c==b("MessagingTag").INBOX)&&e==d});var g=this.$5[c][d].getAllResources(),i;a.forEach(function(a){e=e.concat(a.thread_ids);var b=a.limit;a.thread_ids.length<b&&(f=!0);(!i||a.end>i)&&(i=a.end)});this.$16(e,c,d);if(f)this.$5[c][d].setReachedEndOfArray();else{a=this.$5[c][d].getCurrentArraySize();if(i&&a<i){var j={};g=g.concat(e);g=g.filter(function(a){var b=j[a];j[a]=!0;return b});g.length&&(b("ChatReliabilityInstrumentation").logERROR("duplicate_thread_ids: "+JSON.stringify(g)),h.warn("duplicate_threads",JSON.stringify({folder:c,expected_final_size:i,actual_final_size:a,duplicate_thread_ids:g})),this.getServerRequests().fetchThreadlistInfo(i,g.length,c,d==b("MercuryFilters.bs").all?null:d,b("MercuryAPIArgsSource").MERCURY,this.$11(this.$5[c][d].getAllResources())))}}};c.$7=function(a){var b=this;j.forEach(function(c){i.forEach(function(d){b.$15(a,c,d)})})};c.$9=function(a){__p&&__p();var c=this,d={};j.forEach(function(a){d[a]={},i.forEach(function(b){d[a][b]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}}})});a.forEach(function(a){__p&&__p();var e=a.thread_id;c.$17(e,function(f){__p&&__p();c.$18(e,function(h){__p&&__p();var k=function(){h.forEach(function(a){if(!i.includes(a))return;!f&&g(0,2886);d[f][a].to_add.push(e);!c.$5[f][a].hasReachedEndOfArray()&&!c.$5[f][a].hasResource(e)&&(d[f][a].to_remove_if_last_after_add[e]=!0)})};function l(a){!f&&g(0,2887),i.includes(a)&&(h.includes(a)?d[f][a].to_add.push(e):d[f][a].to_remove.push(e))}if(!f){(a.action_type==="ma-type:change-folder"||a.action_type==="ma-type:change-archived-status")&&j.forEach(function(a){a!==f&&i.forEach(function(b){c.$5[a][b].removeResources([e])})});return}!f&&g(0,2888);switch(a.action_type){case"ma-type:delete-thread":h.forEach(function(a){if(!i.includes(a))return;d[f][a].to_remove.push(e)});break;case"ma-type:change-archived-status":case"ma-type:change-folder":k();break;case"ma-type:change_read_status":l(b("MessagingTag").UNREAD);break;case"ma-type:user-generated-message":case"ma-type:log-message":h.forEach(function(a){if(!i.includes(a))return;c.$12(e,f,a)&&d[f][a].to_add.push(e)});break;case"ma-type:change_flag":l("flag");break}})})});j.forEach(function(a){__p&&__p();i.forEach(function(b){var e=c.$5[a][b];c.$16(d[a][b].to_add,a,b);for(var f=e.getCurrentArraySize()-1;f>=0;f--){var g=e.getResourceAtIndex(f);if(!d[a][b].to_remove_if_last_after_add[g])break;d[a][b].to_remove.push(g)}e.removeResources(d[a][b].to_remove)})})};c.$8=function(a){__p&&__p();var b=this,c={};j.forEach(function(a){c[a]={},i.forEach(function(b){c[a][b]=[]})});a.forEach(function(a){b.$17(a.thread_id,function(d){b.$18(a.thread_id,function(e){d&&e.forEach(function(e){b.$12(a.thread_id,d,e)&&c[d][e].push(a.thread_id)})})})});j.forEach(function(a){i.forEach(function(d){c[a][d].length>0&&b.$16(c[a][d],a,d)})})};c.$16=function(a,c,d){var e=this;d=d||b("MercuryFilters.bs").all;this.$5[c][d].addResources(a);j.forEach(function(b){b!=c&&e.$5[b][d].removeResources(a)})};c.$17=function(a,c){var d=this;b("MessengerState.bs").getThreadMeta(this.$1,a,function(b){c(d.$13(a,b))})};c.$13=function(a,c){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(this.$1,a);var d=null;!c?d="No thread metadata":c.folder||(d="No thread folder");if(d){d={error:d,tid:a};h.warn("no_thread_folder",JSON.stringify(d));b("ChatReliabilityInstrumentation").logERROR("no_thread_folder");return null}!c&&g(0,2889);a=c.folder;c.is_archived&&(a=b("MessagingTag").ACTION_ARCHIVED);if(this.$5[a])return a;else return null};c.$18=function(a,c){var d=this;b("MessengerState.bs").getThreadMeta(this.$1,a,function(b){c(d.$14(a,b))})};c.$14=function(a,c){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(this.$1,a);var d=[b("MercuryFilters.bs").all];if(!c){a={error:"no_thread_metadata",tid:a};h.warn("no_thread_metadata",JSON.stringify(a));return[]}c.unread_count&&d.push(b("MessagingTag").UNREAD);c.is_canonical||d.push(b("MessagingTag").GROUPS);a=c.page_thread_info;a&&a.flagged&&d.push("flag");return d};c.$11=function(a){var c=null;if(a.length>0){a=b("MessengerState.bs").getThreadMetaNow(this.$1,a[a.length-1]);c=a?a.timestamp:null}return c};return a}();function k(a){switch(a.payload_source){case"client_change-archived_status":case"client_change-pinned_status":case"client_change_page_follow_up_status":case"client_change_read_status":case"client_change_folder":case"client_channel_message":case"client_delete_messages":case"client_delete_thread":case"client_send_message":case"server_send_message":case"server_fetch_threadlist_info":case"server_thread_sync":case"server_invalidate_global_state":case"client_update_comm_status":return!0;case"server_initial_data":return!!a.ordered_threadlists;default:return!1}}var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDragDropPrompt.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx("div",{className:"_4g6x",children:a.jsxs("div",{className:"_4g6y",children:[a.jsx("div",{className:"_4g6z _4g71",children:h._("Drag Links\/Files Here")}),a.jsx("div",{className:"_4g6z _4g6- _4g6_",children:h._("Drop Files Here")}),a.jsx("div",{className:"_4g6z _4g6- _4g70",children:h._("Drop Link Here")})]})})};return c}(b("React").Component);e.exports=a}),null);
__d("MercurySyncPageEnvironment",["Arbiter","ChannelInitialData","ChannelManager","MercurySyncDeltaHandler","MessengerMQTTConnection","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("ChannelManager").startChannelManager();function a(a,c){if(Object.keys(b("ChannelInitialData")).length===0&&JSON.stringify(b("ChannelInitialData"))===JSON.stringify({}))return;c||(c=0);b("MercurySyncDeltaHandler").getForFBID(a);b("MessengerMQTTGating").isEnabled()?b("MessengerMQTTConnection").addDeltaStream({fbid:a,irisSeqID:c.toString()}):b("ChannelManager").subscribeIrisQueue(a,c.toString());b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:a,seqID:c})}function c(a){}e.exports={setUp:a,tearDown:c}}),null);
__d("MercuryPageServerRequests",["CurrentUser","MercuryAPIArgsSource","MercuryAssert","MercuryServerDispatcher","MercuryServerRequests","MercurySingletonProvider","MessagingTag","MessengerServerPayloadTransformer.bs","PagesMessagingPerfTypedLogger","PagesMessengerThreadUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryAPIArgsSource").MERCURY;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return h.getForFBID(a)};c.get=function(){return h.get()};function c(c){__p&&__p();var d;d=a.call(this,c)||this;c={"/pages/messaging/thread_tag/add/":{request_user_id:c,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,batch_function:d.$MercuryPageServerRequests1,handler:function(a,b){return d.__handleUpdate(a,b)}},"/pages/messaging/thread_tag/remove/":{request_user_id:c,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,batch_function:d.$MercuryPageServerRequests1,handler:function(a,b){return d.__handleUpdate(a,b)}},"/pages/messaging/thread_tag/list/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.$MercuryPageServerRequests2(a,b)}},"/pages/messaging/thread_custom_tags/list/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.$MercuryPageServerRequests2(a,b)}},"/pages/messaging/create_note/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.__handleUpdate(a,b)}},"/pages/messaging/owner/list/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.$MercuryPageServerRequests2(a,b)}}};b("MercuryServerDispatcher").registerEndpoints(c);return d}var d=c.prototype;d.$MercuryPageServerRequests2=function(a,c){if(a.graphql_payload){var d=a.graphql_payload.map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,c,a.for_page)});d={ordered_threadlists:a.ordered_threadlists,payload_source:a.payload_source,threads:d};this.__handleUpdate(d,c)}};d.$MercuryPageServerRequests1=function(a,b){var c=a?a.tag_name:b.tag_name;a=a?a.thread_ids:[];b=b?b.thread_ids:[];a=a.concat(b);b={tag_name:c,thread_ids:a};return b};d.addThreadFlag=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){a={thread_ids:[a],tag_name:"flag"};d.__sendRequest("/pages/messaging/thread_tag/add/",a)})};d.createNote=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(d);this.__threadIDMap.getServerIDFromClientID(d,function(b){b={body:a,message_id:c,other_user_fbid:b};e.__sendRequest("/pages/messaging/create_note/",b)})};d.fetchThreadlistInfo=function(c,d,e,f,h,i){__p&&__p();e===void 0&&(e=b("MessagingTag").INBOX);h===void 0&&(h=g);var j={folder:e,offset:c,limit:d,tag_name:null,custom_tags_filter:null,custom_tags:[],enum_tag:"",owner:"",owner_filter:null};if(b("PagesMessengerThreadUtils").isPageSpecficEnumFilter(f)){j.tag_name=f;this.__sendRequest("/pages/messaging/thread_tag/list/",j);return}if(f&&b("PagesMessengerThreadUtils").isCustomTagsFilter(f)){j.custom_tags_filter=f;j.custom_tags=b("PagesMessengerThreadUtils").parseCustomTagsFilter(f);b("PagesMessengerThreadUtils").isCustomTagsWithFlagFilter(f)&&(j.enum_tag="flag");this.__sendRequest("/pages/messaging/thread_custom_tags/list/",j);return}if(f&&b("PagesMessengerThreadUtils").isOwnerFilter(f)){j.owner_filter=f;j.owner=b("PagesMessengerThreadUtils").parseOwnerFilter(f);this.__sendRequest("/pages/messaging/owner/list/",j);return}a.prototype.fetchThreadlistInfo.call(this,c,d,e,f,h,i)};d.removeThreadFlag=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){a={thread_ids:[a],tag_name:"flag"};d.__sendRequest("/pages/messaging/thread_tag/remove/",a)})};d.toString=function(){return"MercuryPageServerRequests"};d.__logMercurySendError=function(c){new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.__getFBID()).setEventName("messages_send_message_js_handle_error").setExceptionMessage(c.error_data.description).setExceptionCode(c.error_data.code).log(),a.prototype.__logMercurySendError.call(this,c)};d.__getForAsyncRequest=function(a){a=a.getData();a=a.request_user_id?a.request_user_id:b("CurrentUser").getID();return c.getForFBID(a)};return c}(b("MercuryServerRequests"));var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryPageMessageActions",["MercuryMessageActions","MercuryPageServerRequests","MercurySingletonMixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.__serverRequests=b("MercuryPageServerRequests").getForFBID(c);return d}var d=c.prototype;d.createNote=function(a,b,c){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:"ma-type:create-page-admin-note",message_id:c,note:a,thread_id:b},"client_create_page_admin_note")),this.__serverRequests.createNote(a.body.text,c,b)};return c}(b("MercuryMessageActions"));Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("MercuryPageOrderedThreadlist",["MercuryOrderedThreadlist","MercuryPageServerRequests","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return g.getForFBID(a)};c.get=function(){return g.get()};function c(b){var c;c=a.call(this,b)||this;c.$MercuryPageOrderedThreadlist1=b;return c}var d=c.prototype;d.getServerRequests=function(){return b("MercuryPageServerRequests").getForFBID(this.$MercuryPageOrderedThreadlist1)};return c}(b("MercuryOrderedThreadlist"));var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECServerSendMessageQueue",["MercuryServerSendMessageQueue","MessengerAttachmentTransformer.bs","MessengerMessageTransformer.bs","XWECMessagingSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getSendURI=function(){return b("XWECMessagingSendController").getURIBuilder().getURI().toString()};d.handleSuccess=function(a,c){__p&&__p();var d=this,e=(a.actions||[]).map(function(a){d.pending_message=null;var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.node){var e=a.graphql_payload.node.story_attachment;e={legacy_attachment_id:a.graphql_payload.node.legacy_attachment_id,story_attachment:e==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(e)};e=b("MessengerAttachmentTransformer.bs").transformAttachment(d.sender_id,{extensible_attachment:e,blob_attachments:[],sticker:null},a.message_id,!0);c=Object.assign(c,{attachments:e})}return c});a.actions=e;this.resumeAfterSuccess(a,c)};return c}(b("MercuryServerSendMessageQueue"));e.exports=a}),null);
__d("MercuryWECServerSendMessageQueueRouter",["MercurySingletonProvider","MercuryWECServerSendMessageQueue"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.queues=new Map(),this.fbid=a}var c=a.prototype;c.enqueue=function(a,c,d,e){var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryWECServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f));f.enqueue(e)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECServerRequests",["MercuryAPIArgsSource","MercuryIDs","MercuryMessageClientState","MercuryPageServerRequests","MercuryServerDispatcher","MercurySingletonProvider","MercuryWECServerSendMessageQueueRouter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryAPIArgsSource").MERCURY;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return h.getForFBID(a)};c.get=function(){return h.get()};function c(c){var d;d=a.call(this,c)||this;d.$MercuryWECServerRequests1=c;c={"/wec/messaging/remove_group_participants/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.__handleUpdate(a,b)}}};b("MercuryServerDispatcher").registerEndpoints(c);return d}var d=c.prototype;d.sendNewMessage=function(a,c){c===void 0&&(c=g);if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var d=b("MercuryIDs").tokenize(a.thread_id);a=babelHelpers["extends"]({},a,{thread_id:null,other_user_fbid:d.value});b("MercuryWECServerSendMessageQueueRouter").getForFBID(this.$MercuryWECServerRequests1).enqueue(a.other_user_fbid,this.__getSendMessageQueueOptions(),c,a)};d.leaveGroup=function(a){a={group_id:a,participant_ids:[this.$MercuryWECServerRequests1]};this.__sendRequest("/wec/messaging/remove_group_participants/",a)};return c}(b("MercuryPageServerRequests"));var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECMessageActions",["MercuryMessageActions","MercurySingletonMixin","MercuryWECServerRequests"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$MercuryWECMessageActions1=c;d.__serverRequests=b("MercuryWECServerRequests").getForFBID(c);return d}var d=c.prototype;d.leaveGroup=function(a){this.__serverRequests.leaveGroup(a)};return c}(b("MercuryMessageActions"));Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("ChatAppointmentUtil",["fbt","DateTime","MercuryShareAttachmentRenderLocations","ServicesDateTimeUtils","getTimezoneAbbreviation"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=Object.freeze({LONG_DATE_FORMAT:"l, M j, Y",SHORT_DATE_FORMAT:"D M j, y",TIME_FORMAT:"g:i A",LONG_DATE_TIME_FORMAT:"l, M j, Y g:ia",SHORT_DATE_TIME_FORMAT:"D M j, g:ia"}),i={getAbbreviationMonthText:function(a){__p&&__p();switch(a.getMonth()){case 1:return g._("JAN");case 2:return g._("FEB");case 3:return g._("MAR");case 4:return g._("APR");case 5:return g._("MAY");case 6:return g._("JUN");case 7:return g._("JUL");case 8:return g._("AUG");case 9:return g._("SEP");case 10:return g._("OCT");case 11:return g._("NOV");case 12:return g._("DEC")}return null},getDateFormat:function(a){return a===b("MercuryShareAttachmentRenderLocations").CHAT||a===b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW?h.SHORT_DATE_FORMAT:h.LONG_DATE_FORMAT},getDateTimeFormat:function(a){return a===b("MercuryShareAttachmentRenderLocations").CHAT||a===b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW?h.SHORT_DATE_TIME_FORMAT:h.LONG_DATE_TIME_FORMAT},maybeAppendTimezone:function(a,c){return b("ServicesDateTimeUtils").isTimezoneDifferentThanLocal(c)?a+" ("+b("getTimezoneAbbreviation")(b("DateTime").now(c))+")":a},validateAppointment:function(a){return Boolean(a.product_item&&a.page)},isEndDayDifferentFromStartDay:function(a,c){var d=new(b("DateTime"))(a.start,c);a=new(b("DateTime"))(a.end,c);return d.getDayOfMonth()!==a.getDayOfMonth()},parseJSON:function(a){if(a===null||a===void 0||a.length===0)return null;try{return JSON.parse(a)}catch(a){return null}},renderDate:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.start,c);return a.format(i.getDateFormat(d))},renderTimeRange:function(a,c,d){if(!a)return null;d=new(b("DateTime"))(a.start,c);a=new(b("DateTime"))(a.end,c);var e=h.TIME_FORMAT,f;d.equals(a)?f=d.format(e):f=d.format(e)+" - "+a.format(e);return this.maybeAppendTimezone(f,c)},renderDateTimeRange:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.start,c);return a.format(i.getDateTimeFormat(d))},renderDateTime:function(a,b){return!a?null:a.format(i.getDateTimeFormat(b))},renderStartDateTime:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.start,c);return this.maybeAppendTimezone(i.renderDateTime(a,d),c)},renderEndDateTime:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.end,c);return this.maybeAppendTimezone(i.renderDateTime(a,d),c)}};e.exports=i}),null);
__d("curryRight",["curry","reverseArgs"],(function(a,b,c,d,e,f){"use strict";function a(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("reverseArgs")(b("curry").apply(void 0,[b("reverseArgs")(a)].concat(d)))}e.exports=a}),null);
__d("PagesMessageSuggestedResponseHandler",["invariant","ActorURI","AsyncRequest","XPagesMessagingSuggestedResponseController","XPagesMessagingSuggestedResponseFeedbackController","isEmpty"],(function(a,b,c,d,e,f,g){__p&&__p();var h;a=function(){"use strict";__p&&__p();function a(a,b){this.$2=a,this.$1=b,this.$3=!1,this.$5=!1}var c=a.prototype;c.requestSuggestedResponseAsync=function(a,c){var d=this;this.$3=!0;var e=b("XPagesMessagingSuggestedResponseController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(e,this.$1)).setData({message:this.$2.body}).setMethod("POST").setHandler(function(b){return d.$6(b.payload,a)}).setErrorHandler(c).send()};c.sendFeedback=function(a){this.hasReceviedSuggestedResponse()||g(0,1526);var c=b("XPagesMessagingSuggestedResponseFeedbackController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(c,this.$1)).setMethod("POST").setData({message_id:this.$4,accepted:a}).send()};c.$6=function(a,b){a.messageFound&&(this.$4=a.messageID),b(this.$2.message_id,a)};c.shouldBeTreatedAsRejected=function(){return!this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse()};c.hasReceviedSuggestedResponse=function(){return!(h||(h=b("isEmpty")))(this.$4)};c.alreadyRequested=function(){return this.$3};c.getMessageID=function(){return this.$2.message_id};c.getHasBeenAccepted=function(){return this.$5};return a}();e.exports=a}),null);
__d("MultiToggleButton.react",["cx","React","ShimButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onClick(c.props.value)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").jsx(b("ShimButton.react"),{"aria-pressed":this.props.isChecked,className:"_2xzo"+(this.props.isChecked?" _2xzq":""),onClick:this.$1,children:this.props.label})};return c}(b("React").Component);e.exports=a}),null);
__d("MultiToggleButtonGroup.react",["cx","MultiToggleButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=b("joinClasses")("_3hf7",this.props.className);return b("React").jsx("div",{className:c,children:this.props.options.map(function(c){return b("React").jsx(b("MultiToggleButton.react"),{label:c.label,value:c.value,isChecked:a.props.selectedOptions.has(c.value),onClick:a.props.onOptionClicked},c.value)})})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesSelectableSimpleListActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a="PAGES_SELECTABLE_SIMPLE_LIST";c=b("keyMirrorRecursive")({ROW:{ALL_DESELECTED:"",ALL_SELECTED:"",SELECTED:""}},a);e.exports=c}),null);
__d("PagesSelectableSimpleListAction",["PagesDispatcher","PagesSelectableSimpleListActionType"],(function(a,b,c,d,e,f){"use strict";a={rowSelected:function(a,c){b("PagesDispatcher").dispatch({type:b("PagesSelectableSimpleListActionType").ROW.SELECTED,rowKey:a,selected:c})},selectAll:function(a,c){b("PagesDispatcher").dispatch({type:b("PagesSelectableSimpleListActionType").ROW.ALL_SELECTED,rowKeys:a,selected:c})},deselectAll:function(){b("PagesDispatcher").dispatch({type:b("PagesSelectableSimpleListActionType").ROW.ALL_DESELECTED})}};e.exports=a}),null);
__d("PagesSelectableSimpleListStore",["FluxStore","PagesDispatcher","PagesSelectableSimpleListActionType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesDispatcher"))||this;c.$PagesSelectableSimpleListStore1=new Map();return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesSelectableSimpleListActionType").ROW.SELECTED:this.$PagesSelectableSimpleListStore2(a.rowKey,a.selected);this.__emitChange();break;case b("PagesSelectableSimpleListActionType").ROW.ALL_SELECTED:this.$PagesSelectableSimpleListStore3(a.rowKeys,a.selected);this.__emitChange();break;case b("PagesSelectableSimpleListActionType").ROW.ALL_DESELECTED:this.$PagesSelectableSimpleListStore1=new Map();this.__emitChange();break}};d.$PagesSelectableSimpleListStore2=function(a,b){b?this.$PagesSelectableSimpleListStore1.set(a,!0):this.$PagesSelectableSimpleListStore1["delete"](a)};d.$PagesSelectableSimpleListStore3=function(a,b){var c=this;a.forEach(function(a){return c.$PagesSelectableSimpleListStore2(a,b)})};d.isRowSelected=function(a){return this.$PagesSelectableSimpleListStore1.has(a)};d.getSelectedCount=function(){return this.$PagesSelectableSimpleListStore1.size};d.getSelectedRowsMap=function(){return this.$PagesSelectableSimpleListStore1};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesSelectableSimpleListCheckboxContainer.react",["FluxContainer","PagesSelectableListCheckbox.react","PagesSelectableSimpleListAction","PagesSelectableSimpleListStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("PagesSelectableSimpleListAction").selectAll(d.props.allRowKeysGetter(),!d.state.checked);var a=d.props.onChange;a&&a(b("PagesSelectableSimpleListStore").getSelectedRowsMap())},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesSelectableSimpleListStore")]};c.calculateState=function(a,c){a=b("PagesSelectableSimpleListStore").getSelectedCount();var d;a===0?d=!1:a===c.rowCount?d=!0:d=null;return{checked:d}};var d=c.prototype;d.render=function(){return b("React").jsx(b("PagesSelectableListCheckbox.react"),{checked:this.state.checked,onChange:this.$1})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesSelectableSimpleListRowContainer.react",["FluxContainer","PagesSelectableSimpleListAction","PagesSelectableSimpleListStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PagesSelectableSimpleListAction").rowSelected(d.props.rowKey,a),d.props.onSelected&&d.props.onSelected(b("PagesSelectableSimpleListStore").getSelectedRowsMap())},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesSelectableSimpleListStore")]};c.calculateState=function(a,c){return{selected:b("PagesSelectableSimpleListStore").isRowSelected(c.rowKey)}};var d=c.prototype;d.render=function(){return this.props.rowRenderer(this.props.rowData.rowIndex,this.state.selected,this.$1)};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesSelectableSimpleList.react",["cx","CenteredContainer.react","LeftRight.react","OnVisible.react","PagesSelectableSimpleListCheckboxContainer.react","PagesSelectableSimpleListRowContainer.react","React","ResponsiveBlock.react","SimpleList.react","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={headerHeight:0},d.$3=function(a,b){d.setState({headerHeight:b})},d.$5=function(a){return d.props.canLoadMoreRows&&a.rowIndex===d.props.rowCount?d.$7():b("React").jsx(b("PagesSelectableSimpleListRowContainer.react"),{onSelected:d.$2,ref:d.props.rowKeyGetter(a.rowIndex),rowData:a,rowKey:d.props.rowKeyGetter(a.rowIndex),rowRenderer:d.props.rowRenderer})},d.$8=function(){d.props.onRequestMoreRows&&!d.props.isLoadingMoreRows&&d.props.onRequestMoreRows()},d.$2=function(a){d.props.onSelectionChange&&d.props.onSelectionChange(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){if(!this.props.showHeader)return null;var a=this.props.allRowKeysGetter?b("React").jsx(b("PagesSelectableSimpleListCheckboxContainer.react"),{allRowKeysGetter:this.props.allRowKeysGetter,onChange:this.$2,rowCount:this.props.rowCount}):null;return b("React").jsxs(b("ResponsiveBlock.react"),{onResize:this.$3,children:[b("React").jsxs(b("LeftRight.react"),{className:"_2x3m",children:[b("React").jsxs("div",{children:[a,b("React").jsx("span",{children:this.props.actionBarLeftComponent})]}),b("React").jsx("div",{children:this.props.actionBarRightComponent})]}),this.props.header]})};d.$4=function(){var a=this.props.height-this.state.headerHeight;if(a<=0)return null;return this.props.replaceContent||!this.props.rowCount?b("React").jsx("div",{style:{height:a},children:this.props.replaceContent}):b("React").jsx(b("SimpleList.react"),{goToRowIndex:this.props.goToRowIndex,height:a,hideScrollShadow:!0,item:this.$5,ref:"simpleList",rowCount:this.$6(),rowHeight:this.props.rowHeight,scrollbarOnHoverOnly:!0})};d.getSimpleList=function(){return this.refs.simpleList};d.$6=function(){return this.props.rowCount+(this.props.canLoadMoreRows?1:0)};d.$7=function(){return b("React").jsx(b("OnVisible.react"),{onVisible:this.$8,style:{height:this.props.rowHeight},children:this.props.loadingIndicator})};d.render=function(){return b("React").jsxs("div",{className:this.props.className,children:[this.$1(),this.$4()]})};return c}(b("React").PureComponent);a.defaultProps={canLoadMoreRows:!1,isLoadingMoreRows:!1,loadingIndicator:b("React").jsx(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,children:b("React").jsx(b("XUISpinner.react"),{size:"large"})}),showHeader:!1};e.exports=a}),null);
__d("BusinessCRMConfigStore",["undux"],(function(a,b,c,d,e,f){"use strict";a=b("undux").createConnectedStore;c={config:null};e.exports=a(c)}),null);
__d("CRMAddAdditionalFieldDialog.react",["cx","fbt","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSSimplePopover.react","FDSText.react","FDSTextInput.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=560,j=90,k=50;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={value:"",showError:!1},c.$1=function(a){c.setState({value:a})},c.$3=function(){var a=c.state.value&&c.state.value.trim();c.$2(a)?c.props.onConfirm(a):c.setState({showError:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$2=function(a){return a!=null&&a.length>0&&a.length<=k};d.render=function(){var a=this.state.value&&this.state.value.trim(),c=this.state.showError?h._("Field Name should be between 1-50 characters long"):null;this.$2(a)&&(c=null);return b("React").jsx(b("FDSModal.react"),{footer:b("React").jsx(b("FDSModalFooter.react"),{primaryButton:b("React").jsx(b("FDSButton.react"),{isDisabled:!!c,label:h._("Add Contact Field"),margin:"_3-9a",onClick:this.$3,use:"primary"}),secondaryButton:b("React").jsx(b("FDSCancelButton.react"),{})}),header:b("React").jsx(b("FDSModalHeader.react"),{title:h._("Create Contact Field")}),isShown:!0,onHide:this.props.onCancel,width:i,children:b("React").jsx(b("FDSSection.react"),{children:b("React").jsxs("div",{className:"_7rcj",children:[b("React").jsx(b("FDSText.react"),{display:"inline",weight:"bold",width:j,children:h._("Field Name")}),b("React").jsx("div",{className:"_3-90",children:b("React").jsx(b("FDSSimplePopover.react"),{content:h._("Contact fields are added to all contacts."),position:"below"})}),b("React").jsx(b("FDSTextInput.react"),{errorMessage:c,label:this.state.value,labelIsHidden:!0,onChange:this.$1,placeholder:h._("Name this contact field"),value:this.state.value})]})})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CRMAdditionalFieldsList.react",["cx","fbt","FDSLink.react","FDSText.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=5;function a(a){__p&&__p();var c=a.rowClassName!=null?a.rowClassName:"_7q3e",d=a.additionalFieldList.map(function(d,e){var f;f=(f=d.custom_field)==null?void 0:f.display_name;d=d.value!=null&&d.value!==""?d.value:"-";if(!a.showAll)if(e===i)return b("React").jsx("div",{className:"_7q3f",children:b("React").jsx(b("FDSLink.react"),{onClick:a.onClickSeeMore,showUnderline:"never",children:h._("See More")})},"0");else if(e>i)return null;return f==null?null:b("React").jsxs("div",{className:c,children:[b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:f}),b("React").jsx(b("FDSText.react"),{display:"block",margin:"_3-8w",size:"body3",children:d})]},f+":"+e)});return b("React").jsx("div",{className:a.className,children:d})}e.exports=a}),null);
__d("CRMCSVFileInput.react",["ix","cx","fbt","DragDropTarget","FDSButton.react","FDSCloseButton.react","FDSProgressBar.react","FDSText.react","FileInput.react","Image.react","Link.react","React","ReactDOM","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=function(a){c.$1=a},c.$4=function(a){return c.props.onUpload(a.target.files,a.target)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;if(this.$1){var c=b("ReactDOM").findDOMNode(this.$1);new(b("DragDropTarget"))(c).setOnFilesDropCallback(function(b){a.props.onUpload(b,c)}).enable()}};d.$3=function(a){if(a===null||a===void 0)return null;var b=a/1024/1024;if(b>1)return b.toFixed(1).toString().concat("MB");b=a/1024;return b.toFixed(1).toString().concat("KB")};d.$5=function(){var a,c=this.props,d=c.fileName;c=c.fileError;return(a=b("React")).jsx("div",{className:"_7ose _7jwq",ref:this.$2,children:a.jsxs("div",{className:"_7jwr",children:[a.jsx("div",{className:"_7jwt",children:a.jsx(b("FDSCloseButton.react"),{onClick:this.props.onClose})}),a.jsxs("div",{className:"_7jws",children:[a.jsx(b("Image.react"),{className:"_3-90",src:g("651651")}),a.jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",children:d})]}),a.jsx("div",{className:"_3-96",children:a.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:c})}),a.jsx(b("FileInput.react"),{accept:".csv,.xls,.xlsx",name:"file",onChange:this.props.onUpload,value:"",children:a.jsx(b("FDSButton.react"),{href:"#",icon:a.jsx(b("Image.react"),{className:"_3-90",src:g("651651")}),label:i._("Choose File"),margin:"_3-90",size:"large",use:"default"})})]})})};d.$6=function(){var a=this.props,c=a.fileName,d=a.fileSize;a=a.isUploading;if(a){return(a=b("React")).jsx("div",{className:"_7jwq _7osf",children:a.jsxs("div",{className:"_7jwr",children:[a.jsxs("div",{className:"_7jws",children:[a.jsx(b("Image.react"),{className:"_3-90",src:g("538041")}),a.jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",children:i._("Uploading \" {filename}\"",[i._param("filename",c)])})]}),a.jsx("div",{children:a.jsx(b("FDSProgressBar.react"),{type:"buffering"})})]})})}return b("React").jsx("div",{className:"_7jwq _7osf",children:b("React").jsxs("div",{className:"_7jwr",children:[b("React").jsx("div",{className:"_7jwt",children:b("React").jsx(b("FDSCloseButton.react"),{onClick:this.props.onClose})}),b("React").jsxs("div",{className:"_7jws",children:[b("React").jsx(b("Image.react"),{className:"_3-90",src:g("651651")}),b("React").jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",children:c})]}),b("React").jsx("div",{children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:this.$3(d)})})]})})};d.render=function(){if(this.props.fileError!=null)return this.$5();return this.props.isUploading||this.props.fileName!==null?this.$6():b("React").jsxs("div",{className:"_7j3x _7jwq",ref:this.$2,children:[b("React").jsx("div",{children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body1",weight:"bold",children:i._("Upload File")})}),b("React").jsx(b("FDSText.react"),{color:"secondary",margin:"_3-8p",size:"body3",children:i._("Choose a CSV, XLS or XLSX file or drag and drop to upload. Maximum file size is 1 MB.")}),this.props.csvTemplate!=null?b("React").jsxs(b("Link.react"),{className:"_8p_2",href:this.props.csvTemplate,children:[b("React").jsx(b("Image.react"),{className:"_3-90",src:g("406900")}),b("React").jsx(b("FDSText.react"),{color:"blueLink",size:"body2",children:i._("Download Template")})]}):null,b("React").jsx(b("FileInput.react"),{accept:".csv,.xls,.xlsx",name:"file",onChange:this.$4,value:"",children:b("React").jsx(b("FDSButton.react"),{href:"#",icon:b("React").jsx(b("Image.react"),{src:g("651653")}),label:i._("Choose File"),margin:"_3-8p",size:"large",use:"primary"})})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CRMCSVImportColumnMatchTable.react",["ix","cx","fbt","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","FDSSimplePopover.react","FDSTable.react","FDSTableColumn.react","FDSTableGenericCell.react","FDSText.react","Image.react","Link.react","React","SUIBusinessThemeContainer.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=340,k=90;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isMatchedTableCollapsed:!1,isUnMatchedTableCollapsed:!1},d.$1=function(){d.setState(function(a){return{isMatchedTableCollapsed:!a.isMatchedTableCollapsed}})},d.$2=function(){d.setState(function(a){return{isUnMatchedTableCollapsed:!a.isUnMatchedTableCollapsed}})},d.$4=function(a){return b("React").jsx(b("FDSTableGenericCell.react"),{align:"left",content:b("React").jsx(b("FDSDropdownSelector.react"),{buttonUse:"default",onChange:d.props.onChangeFieldForMatchedTable,placeholder:i._("Field Options"),value:d.props.selectedFieldsForMatchedTable.get(a.rowIndex),width:200,children:d.props.fieldSelectorOptions}),height:80},"Selector")},d.$6=function(a){return b("React").jsx(b("FDSTableGenericCell.react"),{align:"left",content:b("React").jsx(b("FDSDropdownSelector.react"),{buttonUse:"default",onChange:d.props.onChangeFieldForUnmatchedTable,placeholder:i._("Field Options"),value:d.props.selectedFieldsForUnmatchedTable.get(a.rowIndex),width:200,children:d.props.fieldSelectorOptions}),height:80},"Preview")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(){var a;if(this.props.selectedFieldsForMatchedTable.size===0)return null;a=(a=this.props.csvImportData)==null?void 0:a.matched_data;return b("React").jsxs("div",{className:"_7ndc",children:[b("React").jsxs("div",{className:"_7ndd",children:[b("React").jsx(b("Link.react"),{className:"_7ndi",onClick:this.$1,children:b("React").jsx(b("Image.react"),{src:this.state.isMatchedTableCollapsed?g("496753"):g("504840")})}),b("React").jsx(b("Image.react"),{className:"_7ndj",src:g("393775")}),b("React").jsx(b("FDSText.react"),{color:"primary",size:"header3",weight:"bold",children:i._("{num_of_matched_fields} Matched Fields",[i._param("num_of_matched_fields",a&&Object.entries(a).length)])})]}),this.state.isMatchedTableCollapsed?null:b("React").jsx(b("SUIBusinessThemeContainer.react"),{children:b("React").jsxs(b("FDSTable.react"),{borders:"rows",hasFlexibleColumnWidths:!0,headerProps:{item:this.props.headerItems,height:50},items:a?Object.entries(a):[],maxHeight:j,onRowClick:this.props.onRowClickForMatchedTable,rowHeight:k,children:[b("React").jsx(b("FDSTableColumn.react"),{cell:m,header:l,width:33}),b("React").jsx(b("FDSTableColumn.react"),{cell:this.$4,header:l,width:33}),b("React").jsx(b("FDSTableColumn.react"),{cell:n,header:l,width:34})]})})]})};d.$5=function(){var a;a=(a=this.props.csvImportData)==null?void 0:a.unmatched_data;return b("React").jsxs("div",{className:"_7ndc",children:[b("React").jsxs("div",{className:"_7ndd",children:[b("React").jsx(b("Link.react"),{className:"_7ndi",onClick:this.$2,children:b("React").jsx(b("Image.react"),{src:this.state.isUnMatchedTableCollapsed?g("496753"):g("504840")})}),b("React").jsx(b("Image.react"),{className:"_7ndj",src:g("480790")}),b("React").jsx(b("FDSText.react"),{color:"primary",size:"header3",weight:"bold",children:i._("{num_of_unmatched_fields} Unmatched Fields",[i._param("num_of_unmatched_fields",a&&Object.entries(a).length)])})]}),this.state.isUnMatchedTableCollapsed?null:b("React").jsx(b("SUIBusinessThemeContainer.react"),{children:b("React").jsxs(b("FDSTable.react"),{borders:"rows",hasFlexibleColumnWidths:!0,headerProps:{item:this.props.headerItems,height:50},items:a?Object.entries(a):[],maxHeight:this.props.selectedFieldsForMatchedTable.size===0?j*2:j,onRowClick:this.props.onRowClickForUnmatchedTable,rowHeight:k,children:[b("React").jsx(b("FDSTableColumn.react"),{cell:m,header:l,width:33}),b("React").jsx(b("FDSTableColumn.react"),{cell:this.$6,header:l,width:33}),b("React").jsx(b("FDSTableColumn.react"),{cell:n,header:l,width:34})]})})]})};d.render=function(){return b("React").jsxs(b("React").Fragment,{children:[this.$3(),this.$5()]})};return c}(b("React").PureComponent);var l=function(a){var c,d=a.item.labels[a.columnIndex].tooltip;return(c=b("React")).jsx(b("FDSTableGenericCell.react"),{align:"left",content:c.jsxs(c.Fragment,{children:[c.jsx(b("FDSText.react"),{color:"secondary",display:"truncate",size:"body1",weight:"bold",children:a.item.labels[a.columnIndex].label}),d!=null&&b("React").jsx(b("FDSSimplePopover.react"),{content:d})]}),height:50},"columnHeader")},m=function(a){return b("React").jsx(b("FDSTableGenericCell.react"),{align:"left",content:b("React").jsx(b("FDSText.react"),{display:"truncate",size:"body2",weight:"bold",children:a.item[0]}),height:a.rowHeight})},n=function(a){var c=a.item[1].map(function(a,c){return b("React").jsx(b("FDSText.react"),{display:"truncate",size:"body3",children:a},c)});return b("React").jsx(b("FDSTableGenericCell.react"),{align:"left",content:b("React").jsx("div",{className:"_7kq-",children:c}),height:a.rowHeight})};e.exports=a}),null);
__d("CRMCancelImportDialog.react",["fbt","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx(b("FDSModal.react"),{footer:a.jsx(b("FDSModalFooter.react"),{primaryButton:a.jsx(b("FDSButton.react"),{label:g._("Confirm"),onClick:this.props.onConfirmCancel,use:"primary"}),secondaryButton:a.jsx(b("FDSCancelButton.react"),{})}),header:a.jsx(b("FDSModalHeader.react"),{title:g._("Cancel Upload?")}),isShown:this.props.isShown,label:"Modal Title",onHide:this.props.onHide,children:a.jsx(b("FDSSection.react"),{children:a.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:g._("If you cancel your upload, none of your new contacts will be saved. Do you want to continue?")})})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CRMClientContactSearchViewItem.react",["cx","CRMClientContactsSearchableEntry","Image.react","React","ServicesUINoProfileImage.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=32;function i(a){var c=null;a.entry.getURI()!=null&&a.entry.getURI()!==""?c=b("React").jsx(b("Image.react"),{className:"_8jmw",height:h,src:a.entry.getURI(),width:h}):c=b("React").jsx(b("ServicesUINoProfileImage.react"),{className:"_3-91",letter:a.entry.getTitle()[0],size:"xsmall"});if(a.entry instanceof b("CRMClientContactsSearchableEntry")){a=a.entry.getPlatform();return b("React").jsxs("div",{className:"_7yyd"+(a==="FACEBOOK"?" _5m15":"")+(a==="INSTAGRAM"?" _5m16":""),height:h,width:h,children:[c,b("React").jsx("div",{className:"_5m17",children:b("React").jsx("div",{className:"_5m18"})})]})}return c}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=this.props.entry;return b("React").jsxs("li",{className:"_8jun",onMouseDown:function(b){return a.props.onSelect(c,b)},children:[b("React").jsx(i,{entry:c}),b("React").jsxs("div",{children:[this.props.renderHighlight(c.getTitle()),c.getSubtitle()]})]},c.getUniqueID())};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CRMClientDetailsAboutSectionFacebook.react",["ix","cx","fbt","ErrorBoundary.react","FDSText.react","Image.react","LeftRight.react","Link.react","PageCustomerProfileUnitType","PagesManagerInboxRealtimeClock.react","React","RelayModern","TextWithEntities.react","Timezone","asset","emptyFunction","linkifyEntityRange","nullthrows","TimezoneNamesData","CRMClientDetailsAboutSectionFacebook_details.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;b("Timezone").registerNamesModule(b("TimezoneNamesData"));var k=(d={},d[(f=b("PageCustomerProfileUnitType")).EDUCATION]=g("532669"),d[f.EMPLOYMENT]=g("542610"),d[f.HOMETOWN]=g("528432"),d[f.LIKE_SINCE]=g("529235"),d[f.LOCAL_TIME]=g("508064"),d[f.LOCATION]=g("542398"),d);function a(a){__p&&__p();var c,d;c=(c=a.details.profile_uris)==null?void 0:(c=c[0])==null?void 0:c.uri;d=((d=a.details.page_customer)==null?void 0:d.profile_units)||[];d=d.length>0?d.map(function(c){__p&&__p();if(c.unit_type===b("PageCustomerProfileUnitType").LOCAL_TIME){var d;d=(d=a.details.page_customer)==null?void 0:(d=d.city)==null?void 0:(d=d.location)==null?void 0:d.timezone;if(d==null)return null;d=i._("Local time {formatted time}",[i._param("formatted time",b("React").jsx(b("PagesManagerInboxRealtimeClock.react"),{timezoneID:b("Timezone").getByName(d)}))])}else{var e;d=b("React").jsx(b("TextWithEntities.react"),{interpolator:b("linkifyEntityRange"),ranges:(e=c.text)==null?void 0:e.ranges,text:(e=c.text)==null?void 0:e.text})}e=b("nullthrows")(c.unit_type);return b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsxs("div",{className:"_6tt2",children:[b("React").jsx(b("Image.react"),{src:k[e]}),b("React").jsx("div",{className:"_2pi9",children:d})]})},e)}):b("React").jsx("span",{className:"_6tt2",children:i._("No public information available.")});return b("React").jsxs("div",{className:"_2pif",children:[b("React").jsxs(b("LeftRight.react"),{children:[b("React").jsx(b("FDSText.react"),{color:"placeholder",size:"header3",children:"Facebook"}),a.shouldSuppressProfileLink?null:b("React").jsx(b("Link.react"),{href:c,onClick:b("emptyFunction"),target:"_blank",children:i._("View Profile")})]}),b("React").jsx("div",{className:"_3-8y",children:d})]})}e.exports=c(a,{details:j!==void 0?j:j=b("CRMClientDetailsAboutSectionFacebook_details.graphql")})}),null);
__d("CRMClientDetailsAboutSectionInstagram.react",["ix","cx","fbt","FDSLink.react","FDSText.react","Image.react","LeftRight.react","Link.react","React","RelayModern","asset","emptyFunction","CRMClientDetailsAboutSectionInstagram_details.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;function a(a){var c;c=(c=a.details.profile_uris)==null?void 0:(c=c[0])==null?void 0:c.uri;var d=a.details.ig_profile_info;d=d!=null?b("React").jsxs("span",{children:[b("React").jsxs("div",{className:"_6tt2",children:[b("React").jsx(b("Image.react"),{src:g("687382")}),b("React").jsxs("div",{className:"_2pi9",children:[b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:d.ig_username}),b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:d.ig_name})]})]}),d.ig_bio!==""||d.ig_website!==""?b("React").jsxs("div",{className:"_6tt2",children:[b("React").jsx(b("Image.react"),{src:g("490681")}),b("React").jsxs("div",{className:"_2pi9",children:[b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:d.ig_bio}),d.ig_website!=null?b("React").jsx(b("FDSLink.react"),{href:d.ig_website,onClick:b("emptyFunction"),target:"_blank",children:d.ig_website}):null]})]}):null]}):b("React").jsx("span",{className:"_6tt2",children:i._("No public information available.")});return b("React").jsxs("div",{className:"_2pie",children:[b("React").jsxs(b("LeftRight.react"),{children:[b("React").jsx(b("FDSText.react"),{color:"placeholder",size:"header3",children:i._("Instagram")}),a.shouldSuppressProfileLink?null:b("React").jsx(b("Link.react"),{href:c,onClick:b("emptyFunction"),target:"_blank",children:i._("View Profile")})]}),b("React").jsx("div",{className:"_3-8y",children:d})]})}e.exports=c(a,{details:j!==void 0?j:j=b("CRMClientDetailsAboutSectionInstagram_details.graphql")})}),null);
__d("CRMClientDetailsAboutSection.react",["ix","cx","fbt","CRMClientDetailsAboutSectionFacebook.react","CRMClientDetailsAboutSectionInstagram.react","CRMClientListActions","CRMClientListStore","CRMEventsLogger","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","FluxContainer","Image.react","LineClamp.react","React","RelayModern","asset","cxMargin","keyMirror","CRMClientDetailsAboutSection_contact.graphql","CRMClientDetailsAboutSectionRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;a=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var l=b("keyMirror")({ADDRESS:null,BIRTHDAY:null,EMAIL:null,PHONE:null,IG:null}),m="customer_details_view";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){d.props.onEdit(),b("CRMEventsLogger").log(d.props.pageID,"click_edit_contact","edit_contact_button",m)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{forceRefetch:a.forceRefetch}};var d=c.prototype;d.componentDidUpdate=function(a,b){!b.forceRefetch&&this.state.forceRefetch&&this.refetch()};d.refetch=function(){this.props.relay.refetch({page_contact_id:this.props.contact.id,page_id:this.props.pageID},null,function(){b("CRMClientListActions").unsetForceFetch()},{force:!0})};d.getRow=function(a){__p&&__p();var c,d,e=null,f=null,h=null,j=null;c=(c=this.props.contact)==null?void 0:(c=c.phone)==null?void 0:c.phoneNumber;d=(d=this.props.contact)==null?void 0:d.fallback_phone;var k=i._("Primary");c==null&&(c=d);switch(a){case l.PHONE:e=b("React").jsx(b("Image.react"),{src:g("506679")});c==null?f=i._("Phone Number"):(f=c,j=k);break;case l.EMAIL:e=b("React").jsx(b("Image.react"),{src:g("506660")});c=(d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.email:d:d:d;c==null?f=i._("Email"):(f=c,this.props.isPageEligibleForEmail?j=b("React").jsx(b("FDSText.react"),{color:"placeholder",display:"inline",size:"meta1",children:i._("Primary {concatenate-symbol}{info-source}",[i._param("concatenate-symbol"," "+String.fromCodePoint(183)+" "),i._param("info-source",this.getEmailWithSubscriptionDescription())])}):j=k);break;case l.BIRTHDAY:e=b("React").jsx(b("Image.react"),{src:g("665080")});f=((d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.birthday:d:d:d)||i._("Birthday");break;case l.ADDRESS:e=b("React").jsx(b("Image.react"),{src:g("542398")});f=((c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?c.address:c:c:c)||i._("Address");h=(d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.cityStateLine:d:d:d;(((c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?c.address:c:c:c)||((d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.cityStateLine:d:d:d))&&(j=k);break}return b("React").jsxs("div",{className:"_6tt2",children:[e,b("React").jsxs("div",{className:"_2pi9",children:[b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:f})}),h!==null?b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:h})}):null,this.props.shouldShowMergeContact?b("React").jsx(b("FDSText.react"),{color:"placeholder",display:"inline",size:"meta1",children:j}):null]})]},a+"_row")};d.getSecondaryRows=function(a){__p&&__p();var c=this,d=null;switch(a){case l.PHONE:d=this.props.contact.SecondaryPhoneNumbers.map(function(a,c){var d;return(d=b("React")).jsx("div",{className:"_6tt2",children:d.jsx("div",{className:"_89cw",children:d.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:d.jsx(b("LineClamp.react"),{lines:1,children:a.display_phone_number})})})},c+"SecondaryPhoneNumbers")});break;case l.EMAIL:d=this.props.contact.SecondaryEmails.map(function(a,d){var e;return(e=b("React")).jsx("div",{className:"_6tt2",children:e.jsxs("div",{className:"_89cw",children:[e.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:e.jsx(b("LineClamp.react"),{lines:1,children:a.email_address})}),c.props.isPageEligibleForEmail?b("React").jsx(b("FDSText.react"),{color:"placeholder",display:"block",size:"meta1",children:c.getEmailWithSubscriptionDescription()}):null]})},d+"SecondaryEmails")});break;case l.ADDRESS:d=this.props.contact.SecondaryAddresses.map(function(a,c){var d;d=(d=a.address)!=null?d:"";a=(a=a.address_second_line)!=null?a:"";return b("React").jsx("div",{className:"_6tt2",children:b("React").jsxs("div",{className:"_89cw",children:[d.length?b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:d})}):null,a.length?b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})}):null]})},c+"SecondaryAddresses")});break}return b("React").jsx("div",{children:d},a+"_secondaryRow")};d.getEmailWithSubscriptionRow=function(){__p&&__p();var a,c=null;switch((a=this.props)==null?void 0:(a=a.contact)==null?void 0:a.email_subscription_status){case"SUBSCRIBED":c=b("React").jsxs("div",{className:"_7-aq",children:[b("React").jsx("div",{className:"_3-8_",children:b("React").jsx(b("Image.react"),{src:g("497634")})}),b("React").jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Subscribed")})]});break;case"NONSUBSCRIBER":c=b("React").jsxs("div",{className:"_7-aq",children:[b("React").jsx("div",{className:"_3-8_",children:b("React").jsx(b("Image.react"),{src:g("504587")})}),b("React").jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Preference Unknown")})]});break;case"UNSUBSCRIBED":c=b("React").jsxs("div",{className:"_7-aq",children:[b("React").jsx("div",{className:"_3-8_",children:b("React").jsx(b("Image.react"),{src:g("504587")})}),b("React").jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Unsubscribed")})]});break;case"UNCONFIRMED":c=b("React").jsxs("div",{className:"_7-aq",children:[b("React").jsx("div",{className:"_3-8_",children:b("React").jsx(b("Image.react"),{src:g("513799")})}),b("React").jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Confirm Email Preference")})]});break}return(a=b("React")).jsxs("div",{className:"_6tt2",children:[a.jsx(b("Image.react"),{src:g("506660")})," ",a.jsxs("div",{className:"_7-ar",children:[a.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:a.jsx(b("LineClamp.react"),{lines:1,children:((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.email:a:a:a)||i._("Email")})}),((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.email:a:a:a)?c:null]})]})};d.getEmailWithSubscriptionDescription=function(){__p&&__p();var a,b=null;switch((a=this.props)==null?void 0:(a=a.contact)==null?void 0:a.email_subscription_status){case"SUBSCRIBED":b=i._("Subscribed");break;case"NONSUBSCRIBER":b=i._("Preference Unknown");break;case"UNSUBSCRIBED":b=i._("Unsubscribed");break;case"UNCONFIRMED":b=i._("Confirm Email Preference")}return b};d.getIGRow=function(){var a,c,d,e;if(this.props.contact==null||this.props.contact.ig_profile_info==null)return;e=(e=this)!=null?(e=e.props)!=null?(e=e.contact)!=null?(e=e.ig_profile_info)!=null?e.ig_username:e:e:e:e;d=(d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?(d=d.ig_profile_info)!=null?d.ig_name:d:d:d:d;c=(c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?(c=c.ig_profile_info)!=null?c.ig_bio:c:c:c:c;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.ig_profile_info)!=null?a.ig_website:a:a:a:a;return b("React").jsxs("div",{className:"_7wwy",children:[b("React").jsx(b("Image.react"),{src:g("687386")}),b("React").jsxs("div",{className:"_2pi9",children:[b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:e})}),d!==null?b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:d})}):null,b("React").jsxs("div",{className:"_2pi3",children:[c!==null?b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:c})}):null,a!==null?b("React").jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})}):null]})]})]})};d.render=function(){var a;return(a=b("React")).jsx(b("FDSCard.react"),{children:a.jsxs(b("FDSSection.react"),{children:[a.jsxs("div",{className:"_6tt3",children:[a.jsx(b("FDSText.react"),{size:"header2",children:i._("About")}),a.jsx("div",{className:"_6tt4",children:a.jsx(b("FDSLink.react"),{onClick:this.$1,showUnderline:"never",children:i._("Edit")})})]}),this.props.shouldShowMergeContact?b("React").jsx(b("FDSText.react"),{color:"placeholder",margin:"_3-8z",size:"header3",children:i._("Added Details")}):null,this.getRow(l.PHONE),this.props.shouldShowMergeContact?this.getSecondaryRows(l.PHONE):null,this.props.isPageEligibleForEmail&&!this.props.shouldShowMergeContact?this.getEmailWithSubscriptionRow():this.getRow(l.EMAIL),this.props.shouldShowMergeContact?this.getSecondaryRows(l.EMAIL):null,this.getRow(l.BIRTHDAY),this.getRow(l.ADDRESS),this.props.shouldShowMergeContact?this.getSecondaryRows(l.ADDRESS):null,this.props.shouldShowMergeContact?null:this.getIGRow(),this.props.shouldShowMergeContact&&this.props.contact.fbUserId!=null?b("React").jsx(b("CRMClientDetailsAboutSectionFacebook.react"),{details:this.props.contact,shouldSuppressProfileLink:this.props.shouldShowMergeContact}):null,this.props.shouldShowMergeContact&&((a=this.props.contact.igId)==null?void 0:a.id)!=null?b("React").jsx(b("CRMClientDetailsAboutSectionInstagram.react"),{details:this.props.contact,shouldSuppressProfileLink:this.props.shouldShowMergeContact}):null]})})};return c}(b("React").PureComponent);d=b("FluxContainer").create(c);f=a(d,{contact:j!==void 0?j:j=b("CRMClientDetailsAboutSection_contact.graphql")},k!==void 0?k:k=b("CRMClientDetailsAboutSectionRefetchQuery.graphql"));e.exports=f}),null);
__d("CRMClientDetailsActivityRoot.react",["cx","fbt","ix","Clipboard","CRMClientListActions","CRMClientListStore","CRMEventsLogger","FDSButton.react","FDSCard.react","FDSDropdownMenu.react","FDSSection.react","FDSSpinner.react","FDSText.react","FluxContainer","Image.react","PagesPlatformBookingMessageViewer","React","RelayModern","ServicesAppointmentDialogButtonTexts","ServicesAppointmentDialogRoot.react","ServicesAppointmentManagementDialogEnum","ServicesDateTimeUtils","XUITextInput.react","cxMargin","formatDate","setTimeout","CRMClientDetailsActivityRoot_contact.graphql","CRMClientDetailsActivityRootRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;a=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var l=b("ServicesAppointmentDialogButtonTexts").ACTIONS,m=b("ServicesAppointmentDialogButtonTexts").CANCEL_APPOINTMENT,n=b("ServicesAppointmentDialogButtonTexts").EDIT,o="customer_details_view",p={referrerUIComponent:"crm_client_activity_view",referrerUISurface:"crm"},q=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.onBookAgainClick=function(){b.props.onBookAgainClick(b.props.appointment)},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.render=function(){var a=this,c,d,e;c=(c=this.props.appointment)==null?void 0:(c=c.suggestedTimeRange)==null?void 0:c.start;if(!this.props.appointment||!c)return null;d=!b("ServicesDateTimeUtils").isTimestampInPast(c,(d=this.props.appointment)==null?void 0:(d=d.suggestedTimeRange)==null?void 0:d.end);var f=[{label:n,onClick:function(){a.props.onEditClick(a.props.appointment)},type:"item"},{label:m,onClick:function(){a.props.onCancelClick(a.props.appointment)},type:"item"}];return b("React").jsxs("div",{className:"_2pie _6xec",children:[b("React").jsxs("div",{className:"_6yjf",children:[b("React").jsx(b("FDSText.react"),{display:"block",margin:"_3-94",size:"header3",children:((e=this.props.appointment)==null?void 0:(e=e.productItem)==null?void 0:e.name)||h._("No Service Selected")}),b("React").jsx(b("FDSText.react"),{display:"block",margin:"_3-94",size:"body1",children:(e=this.props.appointment)==null?void 0:e.readableDurationPrice}),b("React").jsxs(b("FDSText.react"),{color:"placeholder",display:"block",size:"body2",children:[b("formatDate")(c,"l, M j, Y")," ",h._("at")," ",b("formatDate")(c,"g:iA")]})]}),b("React").jsx("div",{className:"_6yjg",children:d?b("React").jsx(b("FDSDropdownMenu.react"),{isDisabled:this.props.disabled,items:f,label:l}):b("React").jsx(b("FDSButton.react"),{isDisabled:this.props.disabled,label:h._("Book Again"),onClick:this.onBookAgainClick})})]})};return a}(b("React").PureComponent);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onBookAgainClick=function(a){if(d.state.showBookAgainDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_book_now","book_now_button_activity_item",o);d.setState({showBookAgainDialog:!0,selectedAppointment:a})},d.$1=function(a){d.setState({showEditDialog:a})},d.$2=function(a){d.setState({showBookAgainDialog:a})},d.$3=function(a){d.setState({showCancelDialog:a})},d.onCancelClick=function(a){if(d.state.showCancelDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_appointment_activity_delete","appointment_activity_delete_button",o);d.setState({showCancelDialog:!0,selectedAppointment:a})},d.onEditClick=function(a){if(d.state.showEditDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_appointment_activity_change","appointment_activity_change_button",o);d.setState({showEditDialog:!0,selectedAppointment:a})},d.copyFBAppointmentUrl=function(){d.setState({copiedLink:!0}),b("Clipboard").copy(d.props.bookFBAppointmentUrl||""),b("setTimeout")(function(){d.setState({copiedLink:!1})},2e3)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return!a?{copiedLink:!1,forceActivityRefetch:c.forceActivityRefetch,refetchLoading:!1,selectedAppointment:null,showBookAgainDialog:!1,showCancelDialog:!1,showEditDialog:!1}:{copiedLink:a.copiedLink,forceActivityRefetch:c.forceActivityRefetch,refetchLoading:a.refetchLoading,selectedAppointment:a.selectedAppointment,showBookAgainDialog:a.showBookAgainDialog,showCancelDialog:a.showCancelDialog,showEditDialog:a.showEditDialog}};var d=c.prototype;d.componentDidUpdate=function(){var a=this;if(this.state.forceActivityRefetch){var c;this.setState({refetchLoading:!0});b("CRMClientListActions").unsetActivityForceFetch();this.props.relay.refetch({pageContactID:(c=this.props.contact)==null?void 0:c.id,pageID:this.props.pageID},null,function(){a.setState({refetchLoading:!1})},{force:!0})}};d.onUpdateCompleted=function(a){a&&b("CRMClientListActions").forceActivityRefetch()};d.renderCancelDialog=function(){var a=this,c;return!this.state.showCancelDialog?null:b("React").jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").ADMIN_CANCEL,onToggle:this.$3,onUpdateCompleted:this.onUpdateCompleted,pageContactID:(c=this.state.selectedAppointment)==null?void 0:(c=c.pageContact)==null?void 0:c.id,pageID:this.props.pageID,referrerData:p,requestID:(c=this.state.selectedAppointment)==null?void 0:c.id,shown:this.state.showCancelDialog,userID:(c=this.state.selectedAppointment)==null?void 0:(c=c.user)==null?void 0:c.id,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.renderShowCreateAnotherDialog=function(){var a=this,c;return!this.state.showBookAgainDialog?null:b("React").jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").MANUAL_CREATE,onToggle:this.$2,pageContactID:(c=this.state.selectedAppointment)==null?void 0:(c=c.pageContact)==null?void 0:c.id,onUpdateCompleted:this.onUpdateCompleted,pageID:this.props.pageID,referrerData:p,shown:this.state.showBookAgainDialog,userID:(c=this.state.selectedAppointment)==null?void 0:(c=c.user)==null?void 0:c.id,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.renderShowDetailsDialog=function(){var a=this,c;return!this.state.showEditDialog?null:b("React").jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").EDIT,onToggle:this.$1,onUpdateCompleted:this.onUpdateCompleted,pageContactID:(c=this.state.selectedAppointment)==null?void 0:(c=c.pageContact)==null?void 0:c.id,pageID:this.props.pageID,referrerData:p,requestID:(c=this.state.selectedAppointment)==null?void 0:c.id,shown:this.state.showEditDialog,userID:(c=this.state.selectedAppointment)==null?void 0:(c=c.user)==null?void 0:c.id,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.render=function(){var a=this,c;c=(c=this.props.contact)==null?void 0:(c=c.appointments)==null?void 0:c.nodes;if(!c||!c.length){var d;return(d=b("React")).jsx(d.Fragment,{children:d.jsx(b("FDSCard.react"),{margin:this.props.margin,children:d.jsx(b("FDSSection.react"),{children:d.jsxs("div",{className:"_6-3l",children:[d.jsx(b("Image.react"),{src:i("693524")}),d.jsx(b("FDSText.react"),{color:"secondary",display:"block",margin:"_3-8-",size:"body1",textAlign:"center",children:h._("Follow up with {name} and let them book their next appointment online.",[h._param("name",(d=this.props.contact)==null?void 0:d.first_name)])}),b("React").jsxs("div",{className:"_3-8-",children:[b("React").jsx(b("XUITextInput.react"),{className:"_6-3m",height:"tall",value:this.props.bookFBAppointmentUrl}),b("React").jsx(b("FDSButton.react"),{isDisabled:this.state.copiedLink,label:this.state.copiedLink?h._("Copied!"):h._("Copy Link"),margin:"_3-9a",onClick:this.copyFBAppointmentUrl,use:"primary"})]})]})})})})}return b("React").jsxs("div",{children:[b("React").jsx(b("FDSCard.react"),{margin:this.props.margin,children:b("React").jsxs(b("FDSSection.react"),{children:[this.state.refetchLoading&&b("React").jsx("div",{className:"_6yjh",children:b("React").jsx(b("FDSSpinner.react"),{center:!0})}),b("React").jsx("div",{className:"_6xeo",children:b("React").jsx(b("FDSText.react"),{size:"header2",children:h._("Activity")})}),c&&c.map(function(c,d){return b("React").jsx(q,{appointment:c,disabled:a.state.refetchLoading,onBookAgainClick:a.onBookAgainClick,onCancelClick:a.onCancelClick,onEditClick:a.onEditClick},d)})]})}),this.renderShowCreateAnotherDialog(),this.renderShowDetailsDialog(),this.renderCancelDialog()]})};return c}(b("React").PureComponent);d=b("FluxContainer").create(c);f=a(d,{contact:j!==void 0?j:j=b("CRMClientDetailsActivityRoot_contact.graphql")},k!==void 0?k:k=b("CRMClientDetailsActivityRootRefetchQuery.graphql"));e.exports=f}),null);
__d("CRMClientDetailsAdditionalFields.react",["cx","fbt","BusinessCRMConfigStore","CRMAdditionalFieldsList.react","CRMEditAdditionalFieldsDialog.react","CRMMutationUtils","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","React","RelayModern","CRMClientDetailsAdditionalFields_contact.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("BusinessCRMConfigStore").withStore;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showAllFields:!1,showEditDialog:!1},d.$1=function(){d.setState({showEditDialog:!0})},d.$2=function(){d.setState({showAllFields:!0})},d.$4=function(a){var c;c=(c=d.props.contact)==null?void 0:c.id;c!=null&&b("CRMMutationUtils").editCustomField({pageID:d.props.pageID,fields:a,contactID:c});d.setState({showEditDialog:!1})},d.$5=function(){d.setState({showEditDialog:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(a){a=a.additional_custom_fields.filter(function(a){return a!=null});return a.map(function(a){var b;return{custom_field:{id:(b=a.custom_field)==null?void 0:b.id,display_name:(b=a.custom_field)==null?void 0:b.display_name},value:a.value}})};d.render=function(){var a;if(!((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContacts))return b("React").jsx("div",{});a=this.$3(this.props.contact);return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("FDSCard.react"),{margin:this.props.margin,children:b("React").jsxs(b("FDSSection.react"),{children:[b("React").jsxs("div",{className:"_7q3c",children:[b("React").jsx(b("FDSText.react"),{size:"header2",children:h._("Additional Info")}),b("React").jsx("div",{className:"_7q3d",children:b("React").jsx(b("FDSLink.react"),{onClick:this.$1,showUnderline:"never",children:h._("Edit")})})]}),b("React").jsx(b("CRMAdditionalFieldsList.react"),{additionalFieldList:a,onClickSeeMore:this.$2,showAll:this.state.showAllFields})]})}),this.state.showEditDialog?b("React").jsx(b("CRMEditAdditionalFieldsDialog.react"),{additionalFieldList:a,onHide:this.$5,onSave:this.$4,pageContactID:(a=this.props.contact)==null?void 0:a.id}):null]})};return c}(b("React").PureComponent);e.exports=a(c(d,{contact:i!==void 0?i:i=b("CRMClientDetailsAdditionalFields_contact.graphql")}))}),null);
__d("CRMClientProfilePhoto.react",["React","RelayModern","ServicesUINoProfileImage.react","ServicesUIProfileImage.react","CRMClientProfilePhoto_profilePhoto.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props.size;a=(a=this.props.profilePhoto)==null?void 0:(a=a.profilePhotoURIs)==null?void 0:(a=a[0])==null?void 0:a.uri;if(a==null){var d;d=((d=this)!=null?(d=d.props)!=null?(d=d.profilePhoto)!=null?d.firstName:d:d:d)||"-";return b("React").jsx(b("ServicesUINoProfileImage.react"),{letter:d[0],size:c})}return b("React").jsx(b("ServicesUIProfileImage.react"),{size:c,src:a})};return c}(b("React").PureComponent);e.exports=a(c,{profilePhoto:g!==void 0?g:g=b("CRMClientProfilePhoto_profilePhoto.graphql")})}),null);
__d("CRMClientDetailsHeader.react",["ix","cx","fbt","BUIProgressBar.react","CRMBlockIGUserConfirmationDialog.react","CRMClientListActions","CRMClientListStore","CRMClientProfilePhoto.react","CRMEventsLogger","CRMMutationUtils","FBConfirmDialog.react","FBModal.react","FDSButton.react","FDSDropdownMenu.react","FDSLink.react","FluxContainer","IGMessageConnectionStatusStore","IGMessageDataDispatcher","IGMessageInboxStore","IGMessageServerActions","Image.react","Layout.react","LineClamp.react","PagesPlatformBookingMessageViewer","React","RelayModern","ServicesAppointmentDialogRoot.react","ServicesAppointmentManagementDialogEnum","ServicesMessengerSidebarActions","XUIGrayText.react","asset","cxMargin","nullthrows","CRMClientDetailsHeader_contact.graphql","CRMClientDetailsHeaderRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;a=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var l=b("Layout.react").Column,m=b("Layout.react").FillColumn,n=300,o="customer_details_view";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{deletingOrBanning:a?a.deletingOrBanning:!1,forceRefetch:c.forceRefetch,showBookNowDialog:a?a.showBookNowDialog:!1,showDeleteOrBanConfirmDialog:a?a.showDeleteOrBanConfirmDialog:!1,showBlockIGUserDialog:a?a.showBlockIGUserDialog:!1}};function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.showDeleteOrBanConfirmDialog=function(){var a;if(d.state.showDeleteOrBanConfirmDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_delete_customer","delete_customer_button",o,(a=d.props.contact)==null?void 0:a.id);d.setState({showDeleteOrBanConfirmDialog:!0})};d.onDeleteOrBanConfirmDialogCancel=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_delete_customer_cancel_button","delete_customer_button_cancel_button",o,(a=d.props.contact)==null?void 0:a.id);d.setState({showDeleteOrBanConfirmDialog:!1})};d.deleteContact=function(){var a;if(d.state.deletingOrBanning)return;d.setState({deletingOrBanning:!0,showDeleteOrBanConfirmDialog:!1});b("CRMEventsLogger").log(d.props.pageID,"click_delete_customer_confirm_button","delete_customer_button_confirm_button",o,(a=d.props.contact)==null?void 0:a.id);b("CRMMutationUtils").deleteContact(d.props.contact.id,function(a,b){d.props.onDelete()})};d.banContact=function(){var a;if(d.state.deletingOrBanning)return;d.setState({deletingOrBanning:!0,showDeleteOrBanConfirmDialog:!1});b("CRMEventsLogger").log(d.props.pageID,"click_block_customer_confirm_button","ban_customer_button",o,d.props.contact.id);a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.user)!=null?a.id:a:a:a:a;a!==null&&a!==void 0&&b("CRMMutationUtils").banContact([a],function(a,c){d.props.onDelete(),b("CRMClientListActions").forceRefetch()})};d.toggleBookNowDialog=function(a){if(a&&!d.state.showBookNowDialog){var c;b("CRMEventsLogger").log(d.props.pageID,"click_book_now","book_now_button_details_header",o,(c=d.props.contact)==null?void 0:c.id)}d.setState({showBookNowDialog:a})};d.onBookNowDialogCompleted=function(a){a&&(b("CRMClientListActions").forceRefetch(),b("CRMClientListActions").forceActivityRefetch(),d.openMessenger())};d.onCancelBlockIGUser=function(){var a;d.setState({showBlockIGUserDialog:!1});b("CRMEventsLogger").log(d.props.pageID,"click_block_ig_customer_cancel_button","block_customer_cancel_button",o,(a=d.props.contact)==null?void 0:a.id)};d.onConfirmBlockIGUser=function(){var a,c;d.setState({showBlockIGUserDialog:!1});var e=b("IGMessageServerActions").getForFBID(d.props.pageID);c=(c=babelHelpers.assertThisInitialized(d))!=null?(c=c.props)!=null?(c=c.contact)!=null?c.igUserId:c:c:c;a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igThreadId:a:a:a;c!=null&&a!=null&&(e.blockUser(a,c),d.props.onDelete());b("CRMEventsLogger").log(d.props.pageID,"click_block_ig_customer_confirm_button","block_customer_confirm_button",o,(e=d.props.contact)==null?void 0:e.id)};d.$3=function(){var a;if(d.state.showBlockIGUserDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_block_ig_customer_button","block_customer_button",o,(a=d.props.contact)==null?void 0:a.id);d.setState({showBlockIGUserDialog:!0})};d.$4=function(){var a;window.open("https://help.instagram.com/568100683269916/?ref=reportincrm","_blank");b("CRMEventsLogger").log(d.props.pageID,"click_report_ig_customer_button","report_customer_button",o,(a=d.props.contact)==null?void 0:a.id)};d.openMessenger=function(){var a;a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.user)!=null?a.id:a:a:a:a;if(a!=null){var c;b("CRMEventsLogger").log(d.props.pageID,"click_open_messages","messages_icon",o,(c=d.props.contact)==null?void 0:c.id);b("ServicesMessengerSidebarActions").openSidebar(a)}};d.openIGDirectSidebar=function(){var a;a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igThreadId:a:a:a;a!=null&&b("ServicesMessengerSidebarActions").openSidebar(null,a,"INSTAGRAM_DIRECT");b("CRMEventsLogger").log(d.props.pageID,"click_open_ig_direct","ig_direct_icon",o,(a=d.props.contact)==null?void 0:a.id)};d.onClickIGProfileButton=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_go_to_ig_profile","ig_profile_icon",o,(a=d.props.contact)==null?void 0:a.id)};b("IGMessageDataDispatcher").explicitlyRegisterStores([b("IGMessageInboxStore"),b("IGMessageConnectionStatusStore")]);return d}var d=c.prototype;d.componentDidUpdate=function(a,b){!b.forceRefetch&&this.state.forceRefetch&&this.refetch()};d.refetch=function(){this.props.relay.refetch({page_contact_id:this.props.contact.id,page_id:this.props.pageID},null,function(){b("CRMClientListActions").unsetForceFetch()},{force:!0})};d.getDescription=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.description:a:a:a;return b("React").jsx(b("XUIGrayText.react"),{display:"block",size:"header4",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getClientName=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.name:a:a:a;return b("React").jsx(b("XUIGrayText.react"),{className:"_6t2t",display:"block",shade:"medium",size:"header4",weight:"bold",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getBookNowButton=function(){var a=this;return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("482554")}),label:i._("Book Now"),onClick:function(){a.toggleBookNowDialog(!0)},use:"primary"})};d.getCTAButton=function(){if(this.props.isServiceBusiness)return this.getBookNowButton();if(this.isFBUser())return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("1183236")}),label:i._("Send Message"),onClick:this.openMessenger,use:"primary"});else if(this.isIGUser())return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("1183231")}),label:i._("Send Message"),onClick:this.openIGDirectSidebar,use:"primary"});else return null};d.getBookNowDialog=function(){var a=this,c;return!this.props.isServiceBusiness||!this.state.showBookNowDialog?null:b("React").jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").MANUAL_CREATE,onToggle:this.toggleBookNowDialog,onUpdateCompleted:this.onBookNowDialogCompleted,pageContactID:((c=this.props.contact)==null?void 0:c.id)||void 0,pageID:this.props.pageID,referrerData:{referrerUIComponent:"crm_client_detail_view_cta",referrerUISurface:"crm"},shown:this.state.showBookNowDialog,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.getDeleteOrBanConfirmationDialog=function(){__p&&__p();if(!this.state.showDeleteOrBanConfirmDialog)return null;if(this.isFBUser()){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.name:a:a:a)||"";var c=this.props.contact.is_banned_by_page,d=i._("Ban {name}?",[i._param("name",a)]),e=i._("Are you sure you want to ban {name} from this Page? People who are banned can't post, comment or take other actions on your Page. They won't be notified.",[i._param("name",a)]),f=i._("Ban From Page");c===!0&&(d=i._("Remove ban from Page?"),e=i._("Are you sure you want to remove {name} 's ban from this Page? They will be able to post, comment and take other actions on your Page.",[i._param("name",a)]),f=i._("Remove Ban From Page"));return b("React").jsx(b("FBConfirmDialog.react"),{cancelButtonText:i._("Cancel"),confirmButtonText:f,content:e,onCancel:this.onDeleteOrBanConfirmDialogCancel,onConfirm:this.banContact,onToggle:this.onDeleteOrBanConfirmDialogCancel,shown:!0,title:d})}return b("React").jsx(b("FBConfirmDialog.react"),{content:i._("Are you sure you want to delete this contact? Deleting this contact will also delete all of their appointments."),onCancel:this.onDeleteOrBanConfirmDialogCancel,onConfirm:this.deleteContact,onToggle:this.onDeleteOrBanConfirmDialogCancel,shown:!0,title:i._("Delete Contact")})};d.getBlockIGUserConfirmationDialog=function(){var a;if(!this.state.showBlockIGUserDialog)return null;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.igProfileInfo)!=null?a.username:a:a:a:a;return b("React").jsx(b("CRMBlockIGUserConfirmationDialog.react"),{isInbox:!1,onCancel:this.onCancelBlockIGUser,onConfirm:this.onConfirmBlockIGUser,shown:this.state.showBlockIGUserDialog,username:b("nullthrows")(a)})};d.$1=function(){var a=i._("Block"),b=i._("Report"),c=this.props.contact.is_banned_by_page===!0?i._("Remove ban"):i._("Ban"),d=i._("Delete");this.isIGUser()?a=[this.$2(a,this.$3),this.$2(b,this.$4)]:this.isFBUser()?a=[this.$2(c,this.showDeleteOrBanConfirmDialog)]:a=[this.$2(d,this.showDeleteOrBanConfirmDialog)];return a};d.$2=function(a,b){return{type:"item",label:a,onClick:b}};d.getMessengerButton=function(){return!this.props.isServiceBusiness||!this.hasButtonType("MESSAGE")||!this.isFBUser()?null:b("React").jsx(l,{className:"_3-9a _6t1z _6t1-",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("501143")}),label:i._("Open Messages"),labelIsHidden:!0,onClick:this.openMessenger})})};d.getFBProfileButton=function(){var a=this,c;c=(c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?(c=c.user)!=null?c.url:c:c:c:c;return this.props.shouldSuppressProfileLinks||c==null?null:b("React").jsx(l,{className:"_3-9a _6t1z _6t1-",children:b("React").jsx(b("FDSLink.react"),{href:c,onClick:function(){var c;b("CRMEventsLogger").log(a.props.pageID,"click_go_to_fb_profile","fb_profile_icon",o,(c=a.props.contact)==null?void 0:c.id)},target:"_blank",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("490808")}),label:i._("Facebook Profile"),labelIsHidden:!0})})})};d.getIGDirectButton=function(){return!this.props.isServiceBusiness||!this.hasButtonType("MESSAGE_IG_DIRECT")?null:b("React").jsx(l,{className:"_3-9a _6t1z _6t1-",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("898436")}),label:i._("Instagram Direct Message"),labelIsHidden:!0,onClick:this.openIGDirectSidebar})})};d.hasIGDirectButton=function(){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.contactCTAs:a:a:a)||[];a=a.find(function(a){return a.ctaType==="MESSAGE_IG_DIRECT"});return a!=null};d.getIGProfileButton=function(){var a;if(this.props.shouldSuppressProfileLinks)return null;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.profile_uris:a:a:a;a=a&&a.find(function(a){return a.platform==="INSTAGRAM"});a=a&&a.uri;return a==null?null:b("React").jsx(l,{className:"_3-9a _6t1z _6t1-",children:b("React").jsx(b("FDSLink.react"),{href:a,onClick:this.onClickIGProfileButton,target:"_blank",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("692652")}),label:i._("Instagram Profile"),labelIsHidden:!0})})})};d.isFBUser=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.user)!=null?a.id:a:a:a:a;return a!=null};d.isIGUser=function(){var a;return((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igUserId:a:a:a)!=null&&((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igThreadId:a:a:a)!=null};d.hasButtonType=function(a){__p&&__p();var b;b=((b=this)!=null?(b=b.props)!=null?(b=b.contact)!=null?b.contactCTAs:b:b:b)||[];b=b.find(function(b){return b.ctaType===a});if(b==null){var c;c=((c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?c.moreActions:c:c:c)||[];b=c.find(function(b){return b.ctaType===a})}return b!=null};d.getMoreActionsMenu=function(){return b("React").jsx(b("FDSDropdownMenu.react"),{items:this.$1(),label:"More Items",useEllipsisIcon:!0})};d.getDeletingOrBanningOverlay=function(){if(this.state.deletingOrBanning){if(this.isFBUser()){var a=this.props.contact.is_banned_by_page===!0?i._("Removing Ban..."):i._("Banning Contact...");return b("React").jsx(b("FBModal.react"),{shown:!0,children:b("React").jsx(b("BUIProgressBar.react"),{className:"_6t2u",isBuffering:!0,message:a,padding:!1,width:n})})}return b("React").jsx(b("FBModal.react"),{shown:!0,children:b("React").jsx(b("BUIProgressBar.react"),{className:"_6t2u",isBuffering:!0,message:i._("Deleting Contact..."),padding:!1,width:n})})}return null};d.render=function(){var a;return(a=b("React")).jsxs("div",{children:[this.getDeletingOrBanningOverlay(),this.getDeleteOrBanConfirmationDialog(),this.getBlockIGUserConfirmationDialog(),a.jsxs(b("Layout.react"),{className:"_6t2v",children:[a.jsx(l,{className:"_3-9a",children:a.jsx(b("CRMClientProfilePhoto.react"),{profilePhoto:this.props.contact,size:"large"})}),a.jsxs(m,{className:"_3-9c _6t1z",children:[this.getClientName(),this.getDescription()]}),a.jsxs(l,{className:"_3-9a _6t1z _6t1-",children:[this.getBookNowDialog(),this.getCTAButton()]}),this.getMessengerButton(),this.getFBProfileButton(),this.getIGDirectButton(),this.getIGProfileButton(),a.jsx(l,{className:"_3-9a _6t1z",children:a.jsx("div",{className:"_6t1- _3-91",children:this.getMoreActionsMenu()})})]})]})};return c}(b("React").PureComponent);d=b("FluxContainer").create(c);f=a(d,{contact:j!==void 0?j:j=b("CRMClientDetailsHeader_contact.graphql")},k!==void 0?k:k=b("CRMClientDetailsHeaderRefetchQuery.graphql"));e.exports=f}),null);
__d("CRMClientDetailsLabelsSection.react",["cx","fbt","BusinessCRMConfigStore","CustomLabelUtils","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","PagesManagerCustomLabelsActions","PagesManagerInboxContextCardLabelsTypeahead.react","PagesManagerInboxLabel.react","PagesManagerInboxLabelsDialog.react","QE2Logger","React","RelayModern","cxMargin","emptyFunction","immutable","CRMClientDetailsLabelsSection_page.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("BusinessCRMConfigStore").withStore;var j=(c=b("CustomLabelUtils")).MAX_LABEL_NAME_LENGTH,k=c.onAddLabel,l=c.onCreateLabel,m=c.onDeleteLabel,n=c.onRemoveLabel,o=c.onUpdateLabel,p=b("PagesManagerCustomLabelsActions").PagesManagerCustomLabelsActions;d=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var q="CRMClientDetailsLabelsSection_contactLabels",r="CRMClientDetailsLabelsSection_page_labels";f=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={shouldShowManageLabelsDialog:!1},d.onRemoveLabel=function(a){var b=d.getContactLabels().map(function(a){return a&&a.id});if(b.indexOf(a.id)===-1)return;n(a.id,a.name,(b=d.props.page)==null?void 0:(a=b.contact)==null?void 0:a.id,q)},d.onAddLabel=function(a){k(a.id,a.name,(a=d.props.page)==null?void 0:(a=a.contact)==null?void 0:a.id,d.props.pageID,q,r)},d.onCreateAndAddLabel=function(a){k(null,a,(a=d.props.page)==null?void 0:(a=a.contact)==null?void 0:a.id,d.props.pageID,q,r,null,{onSuccess:function(a){p.setLabel(a)},onFailure:b("emptyFunction")})},d.$1=function(a,c){m(a,d.props.pageID,r,{onSuccess:function(){p.deleteLabel(c)},onFailure:b("emptyFunction")})},d.$2=function(a,c){l(a,c,d.props.pageID,r,{onSuccess:function(a){p.setLabel(a)},onFailure:b("emptyFunction")})},d.onLabelsDialogToggle=function(a){return d.setState({shouldShowManageLabelsDialog:a})},d.onShowManageLabelsClick=function(){return d.setState({shouldShowManageLabelsDialog:!0})},d.getLabel=function(a){return a==null||a.id==null||a.name==null||a.label_color==null?null:b("React").jsx("div",{className:"_653d",children:b("React").jsx(b("PagesManagerInboxLabel.react"),{color:a.label_color,id:a.id,name:a.name,onRemove:d.onRemoveLabel,pageID:d.props.pageID,searchOnClick:!1})},a.id)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(a){o(a.id,a.color,{onSuccess:function(a){p.setLabel(a)},onFailure:b("emptyFunction")})};d.getContactLabels=function(){var a;a=((a=this.props.page)==null?void 0:(a=a.contact)==null?void 0:(a=a.contactLabels)==null?void 0:a.edges)||[];return!a||a.length===0?[]:a.map(function(a){return a&&a.node||null}).filter(function(a){return a!=null})};d.getLabels=function(){var a=this.getContactLabels();return!a||a.length===0?b("React").jsx("div",{className:"_3-8y",children:b("React").jsx("span",{className:"_kd_",children:h._("Labels help you describe and organize your contacts. Only people who manage your Page can see labels.")})}):b("React").jsx("div",{className:"_3-8y",children:a.map(this.getLabel)})};d.showManageLabelsDialog=function(){return!this.state.shouldShowManageLabelsDialog?null:b("React").jsx(b("PagesManagerInboxLabelsDialog.react"),{labels:this.formatLabelData(),labelsConnectionName:"CRMClientDetailsLabelsSection_page_labels",maxLength:j,onCreateLabel:this.$2,onDeleteLabel:this.$1,onRemoveLabelFromThread:this.onRemoveLabel,onToggle:this.onLabelsDialogToggle,onUpdateLabel:this.$3,pageID:this.props.pageID,shouldShowAutoLabel:!1,shown:this.state.shouldShowManageLabelsDialog})};d.formatLabelData=function(){var a;a=((a=this.props.page)==null?void 0:(a=a.labels)==null?void 0:a.edges)||[];return this.convertLabelDataToMap(a)};d.convertLabelDataToMap=function(a){a=a.map(function(a){return[a.node.name,{id:a.node.id,color:a.node.label_color,name:a.node.name}]});return b("immutable").Map(a||[])};d.getTypeaheadLabels=function(){var a=this.formatLabelData().toArray(),b=this.getContactLabels();return b.length===0?a:a.filter(function(a){return!b.some(function(b){return b?a.id===b.id:!0})})};d.getLabelsTypeahead=function(){return b("React").jsx(b("PagesManagerInboxContextCardLabelsTypeahead.react"),{labels:this.getTypeaheadLabels(),maxLength:j,onAddLabel:this.onAddLabel,onCreateLabel:this.onCreateAndAddLabel,pageLabelNum:this.formatLabelData().toArray().length})};d.render=function(){var a;if(((a=this.props.page)==null?void 0:(a=a.contact)==null?void 0:a.user)==null){b("QE2Logger").logExposureForPage("crm_labels",this.props.pageID);if(!((a=this.props.store.get("config"))==null?void 0:a.shouldShowLabelsForOfflineContacts))return null}return b("React").jsx(b("FDSCard.react"),{margin:this.props.margin,children:b("React").jsxs(b("FDSSection.react"),{children:[b("React").jsxs("div",{className:"_6vs9",children:[b("React").jsx(b("FDSText.react"),{size:"header2",children:h._("Labels")}),b("React").jsx("div",{className:"_6vsa",children:b("React").jsx(b("FDSLink.react"),{onClick:this.onShowManageLabelsClick,showUnderline:"never",children:h._("Manage Labels")})})]}),this.getLabels(),this.getLabelsTypeahead(),this.showManageLabelsDialog()]})})};return c}(b("React").PureComponent);g=d(f,{page:i!==void 0?i:i=b("CRMClientDetailsLabelsSection_page.graphql")});e.exports=a(g)}),null);
__d("CRMClientDetailsNote.react",["cx","fbt","ActionList.react","CRMEventsLogger","ExpandableText.react","FBConfirmDialog.react","FDSButton.react","FDSText.react","Link.react","React","RelayModern","SUIBusinessTheme","SUITextArea.react","Timestamp.react","cxMargin","formatDate","nullthrows","CRMClientDetailsNote_note.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var j="customer_details_view";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isDeleted:!1,isEditing:!1,noteText:"",showDeleteConfirmation:!1},d.onCancelClick=function(){d.setState({isEditing:!1})},d.updateNote=function(a){d.setState({noteText:a})},d.onSaveNoteClick=function(){var a;if(d.state.noteText===((a=d.props.note.body)==null?void 0:a.text)||d.props.note.id==null||d.state.noteText==null)return;d.props.onEdit(d.props.note.id,d.state.noteText);d.setState({isEditing:!1})},d.onDeleteClick=function(){if(d.state.showDeleteConfirmation)return;b("CRMEventsLogger").log(d.props.pageID,"click_delete_note","delete_note_button",j);d.setState({showDeleteConfirmation:!0})},d.onEditing=function(a){if(d.state.isEditing)return;d.setState({isEditing:!0,noteText:(a=d.props.note.body)==null?void 0:a.text},function(){d.$1&&d.$1.focusInput()})},d.onDeleteCancel=function(){d.setState({showDeleteConfirmation:!1})},d.onDeleteConfirm=function(){d.setState({isDeleted:!0,showDeleteConfirmation:!1}),d.props.onDelete(b("nullthrows")(d.props.note.id))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getNoteItem=function(){var a;return!this.state.isEditing?null:b("React").jsxs("div",{className:"_3-8y",children:[b("React").jsx(b("SUITextArea.react"),{maxLength:1e3,onChange:this.updateNote,shouldAutoGrow:!0,theme:b("SUIBusinessTheme"),value:this.state.noteText}),b("React").jsxs("div",{className:"_6xpo",children:[b("React").jsx(b("FDSButton.react"),{label:h._("Cancel"),margin:"_3-8_",onClick:this.onCancelClick,size:"large",width:64}),b("React").jsx(b("FDSButton.react"),{label:h._("Delete"),margin:"_3-8_",onClick:this.onDeleteClick,size:"large",width:64}),b("React").jsx(b("FDSButton.react"),{isDisabled:this.state.noteText===((a=this.props.note.body)==null?void 0:a.text),label:h._("Save"),onClick:this.onSaveNoteClick,size:"large",use:"primary",width:64})]})]})};d.getNoteActionlist=function(){if(this.state.isEditing)return null;var a=this.props.note;return b("React").jsxs(b("ActionList.react"),{className:"_6xq7",children:[b("React").jsx(b("Timestamp.react"),{text:b("formatDate")(a.timestamp,"D M j, Y g:ia"),time:a.timestamp}),b("React").jsx(b("Link.react"),{onClick:this.onEditing,children:h._("Edit")}),b("React").jsx(b("Link.react"),{onClick:this.onDeleteClick,children:h._("Delete")})]})};d.getNoteText=function(){var a;if(this.state.isEditing)return null;a=(a=this.props.note.body)==null?void 0:a.text;return b("React").jsx(b("ExpandableText.react"),{TextRenderer:this.getNoteTextRenderer,cutoff:100,noMargin:!0,text:a!==null&&a!==void 0&&a!==""?a:""})};d.getDeleteConfirmation=function(){return!this.state.showDeleteConfirmation?null:b("React").jsx(b("FBConfirmDialog.react"),{cancelButtonText:h._("Cancel"),confirmButtonText:h._("Delete"),content:h._("This note will be permanently deleted."),onCancel:this.onDeleteCancel,onConfirm:this.onDeleteConfirm,onToggle:this.onDeleteCancel,shown:!0,title:h._("Delete Note?")})};d.getNoteTextRenderer=function(a){return b("React").jsx(b("FDSText.react"),{overflowWrap:"break-word",size:"body1",children:a.children})};d.render=function(){return this.state.isDeleted?null:b("React").jsxs("div",{className:"_6xq6",children:[this.getNoteActionlist(),this.getNoteText(),this.getDeleteConfirmation(),this.getNoteItem()]})};return c}(b("React").PureComponent);d=a(c,{note:i!==void 0?i:i=b("CRMClientDetailsNote_note.graphql")});e.exports=d}),null);
__d("CRMClientDetailsNotesSection.react",["ix","cx","fbt","CRMClientDetailsAddNoteMutation","CRMClientDetailsNote.react","CRMClientDetailsUpdateNoteMutation","CRMEventsLogger","FDSButton.react","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","Image.react","PagesManagerInboxDeleteNoteMutation","React","RelayModern","SUIBusinessTheme","SUITextArea.react","XUISpinner.react","asset","cxMargin","emptyFunction","nullthrows","CRMClientDetailsNotesSection_contact.graphql","CRMClientDetailsNotesSectionContactQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;a=b("RelayModern").createPaginationContainer;b("RelayModern").graphql;var l="customer_details_view";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoading:!1,newNoteText:"",showNewNoteForm:!1},d.onDeleteNote=function(a){var c;c=(c=d.props.contact)==null?void 0:(c=c.notes)==null?void 0:c.edges;var e=c?c.length:1;b("PagesManagerInboxDeleteNoteMutation").commit({noteID:a},{onSuccess:function(){d.props.relay.refetchConnection(e>1?e-1:e,b("emptyFunction"))},onFailure:b("emptyFunction")})},d.onEditNote=function(a,c){var e;e=(e=d.props.contact)==null?void 0:(e=e.notes)==null?void 0:e.edges;var f=e?e.length:1;e=b("nullthrows")((e=d.props.contact)==null?void 0:e.id);if(e===null)return;b("CRMClientDetailsUpdateNoteMutation").commit({body:c,noteId:a},{onSuccess:function(){d.props.relay.refetchConnection(f-1,b("emptyFunction"))},onFailure:b("emptyFunction")})},d.onSaveNoteClick=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_save_note","save_note_button",l);if(d.state.newNoteText==null)return;b("CRMClientDetailsAddNoteMutation").commit({body:d.state.newNoteText,pageContactID:b("nullthrows")((a=d.props.contact)==null?void 0:a.id)});d.clearNote()},d.onAddNoteButtonClick=function(){if(d.state.showNewNoteForm)return;b("CRMEventsLogger").log(d.props.pageID,"click_add_note","add_note_button",l);d.setState({showNewNoteForm:!0},function(){d.$1&&d.$1.focusInput()})},d.updateNote=function(a){d.setState({newNoteText:a})},d.clearNote=function(){d.setState({showNewNoteForm:!1,newNoteText:""})},d.onLoadMoreNotesClick=function(){if(!d.props.relay.hasMore()||d.props.relay.isLoading())return;d.setState({isLoading:!0});d.props.relay.loadMore(10,function(){return d.setState({isLoading:!1})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.hasNotes=function(){var a;a=(a=(a=this.props.contact)==null?void 0:(a=a.notes)==null?void 0:a.edges)!=null?a:[];return a.length>0};d.getNewNoteForm=function(){var a=this,c;return!this.state.showNewNoteForm?null:b("React").jsxs("div",{className:"_3-8y"+(this.hasNotes()?" _6xpn":""),children:[b("React").jsx(b("SUITextArea.react"),{maxLength:1e3,onChange:this.updateNote,placeholder:i._("Write a note..."),ref:function(b){return a.$1=b},rows:2,shouldAutoGrow:!0,theme:b("SUIBusinessTheme"),value:this.state.newNoteText}),b("React").jsxs("div",{className:"_6xpo _3-8y",children:[b("React").jsx(b("FDSButton.react"),{label:i._("Cancel"),margin:"_3-8_",onClick:this.clearNote,size:"large",width:64}),b("React").jsx(b("FDSButton.react"),{isDisabled:((c=this.state.newNoteText)!=null?c:"").replace(/\s/g,"")==="",label:i._("Save"),onClick:this.onSaveNoteClick,size:"large",use:"primary",width:64})]})]})};d.getNotes=function(){var a=this,c;c=(c=this.props.contact)==null?void 0:(c=c.notes)==null?void 0:c.edges;if(c==null||c.length===0)return b("React").jsx("div",{className:"_3-8y",children:b("React").jsx("span",{className:"_dk_",children:i._("Notes help you remember important details about your contacts. Only people who manage your Page can see notes.")})});c=c.map(function(c){return c.node?b("React").jsx(b("CRMClientDetailsNote.react"),{note:c.node,onDelete:a.onDeleteNote,onEdit:a.onEditNote,pageID:a.props.pageID},c.node.id):null});return b("React").jsx("div",{className:"_3-8y",children:c})};d.getSeeMoreSection=function(){if(!this.props.relay.hasMore())return null;return this.state.isLoading?b("React").jsx("div",{className:"_6xpq",children:b("React").jsx(b("XUISpinner.react"),{})}):b("React").jsx("div",{className:"_6xpq",children:b("React").jsxs(b("FDSLink.react"),{onClick:this.onLoadMoreNotesClick,showUnderline:"never",children:[b("React").jsx(b("Image.react"),{className:"_3-8_",src:g("598189")}),i._("See More")]})})};d.render=function(){var a;return(a=b("React")).jsx(b("FDSCard.react"),{margin:this.props.margin,children:a.jsxs(b("FDSSection.react"),{children:[a.jsxs("div",{className:"_6wsb",children:[a.jsx(b("FDSText.react"),{size:"header2",children:i._("Notes")}),a.jsx("div",{className:"_6xpr",children:a.jsx(b("FDSLink.react"),{onClick:this.onAddNoteButtonClick,showUnderline:"never",children:i._("Add Note")})})]}),this.getNewNoteForm(),this.getNotes(),this.getSeeMoreSection()]})})};return c}(b("React").PureComponent);d=a(c,{contact:j!==void 0?j:j=b("CRMClientDetailsNotesSection_contact.graphql")},{direction:"forward",getConnectionFromProps:function(a){return a==null?void 0:(a=a.contact)==null?void 0:a.notes},getFragmentVariables:function(a,b){return babelHelpers["extends"]({},a,{count:b})},getVariables:function(a,b){var c=b.count;b=b.cursor;return{cursor:b,count:c,page_contact_id:a.contact.id,page_id:a.pageID}},query:k!==void 0?k:k=b("CRMClientDetailsNotesSectionContactQuery.graphql")});e.exports=d}),null);
__d("CRMClientDetailsView.react",["ix","cx","fbt","ActorURI","AsyncRequest","BusinessCRMConfigStore","CenteredContainer.react","CRMClientDetailsAboutSection.react","CRMClientDetailsActivityRoot.react","CRMClientDetailsAdditionalFields.react","CRMClientDetailsHeader.react","CRMClientDetailsLabelsSection.react","CRMClientDetailsNotesSection.react","CRMClientListActions","CRMEventsLogger","FDSText.react","Image.react","Layout.react","Link.react","QuickPerformanceLogger","React","ScrollableArea.react","ServicesMessengerSidebarActions","XCRMManualContactCreationDialogController","asset","cxMargin","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("BusinessCRMConfigStore").withStore;var j=b("Layout.react").Column,k="customer_details_view";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.editClient=function(){b("CRMEventsLogger").log(d.props.pageID,"click_edit_customer","edit_customer_button",k);var a=b("XCRMManualContactCreationDialogController").getURIBuilder().setFBID("page_id",d.props.pageID).setFBID("contact_id",d.props.contactID).getURI();a=b("ActorURI").create(a,d.props.pageID);new(b("AsyncRequest"))(a).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("QuickPerformanceLogger").markerEnd(36503556,2)};d.goBackToList=function(){b("ServicesMessengerSidebarActions").closeMessengerSidebar(),b("CRMClientListActions").backToClientList()};d.render=function(){var a,c=this.props.relayResponse.page;return c==null?null:b("React").jsx(b("ScrollableArea.react"),{height:this.props.height,children:b("React").jsx(b("CenteredContainer.react"),{children:b("React").jsxs("div",{className:"_3-8y",children:[b("React").jsxs(b("Link.react"),{className:"_6t2q",onClick:this.goBackToList,children:[b("React").jsx(b("Image.react"),{src:g("503177")}),b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body3",weight:"bold",children:i._("Contacts")})]}),b("React").jsx(b("CRMClientDetailsHeader.react"),{contact:b("nullthrows")(c.contact),isServiceBusiness:(a=(a=this.props.store.get("config"))==null?void 0:a.isServiceBusiness)!=null?a:!1,onDelete:this.goBackToList,pageID:this.props.pageID,shouldSuppressProfileLinks:(a=(a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)!=null?a:!1}),b("React").jsxs(b("Layout.react"),{className:"_6tsw",children:[b("React").jsxs(j,{className:"_6tsx",children:[b("React").jsx(b("CRMClientDetailsAboutSection.react"),{contact:b("nullthrows")(c.contact),isPageEligibleForEmail:(a=c==null?void 0:(a=c.servicesVerticalInfo)==null?void 0:a.isPageEligibleForEmail)!=null?a:!1,onEdit:this.editClient,pageID:this.props.pageID,shouldShowMergeContact:(a=(a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)!=null?a:!1}),b("React").jsx(b("CRMClientDetailsLabelsSection.react"),{margin:"_3-8y",page:c,pageID:this.props.pageID}),b("React").jsx(b("CRMClientDetailsNotesSection.react"),{contact:b("nullthrows")(c.contact),margin:"_3-8o",pageID:this.props.pageID})]}),b("React").jsxs(j,{className:"_3-9b _6xfw",children:[b("React").jsx(b("CRMClientDetailsActivityRoot.react"),{bookFBAppointmentUrl:(a=c.servicesVerticalInfo)==null?void 0:a.bookFBAppointmentUrl,contact:b("nullthrows")(c.contact),pageID:this.props.pageID}),b("React").jsx(b("CRMClientDetailsAdditionalFields.react"),{contact:b("nullthrows")(c.contact),margin:"_3-8o",pageID:this.props.pageID})]})]})]})})})};return c}(b("React").PureComponent);e.exports=a(c)}),null);
__d("CRMClientDetailsRoot.react",["cx","fbt","CRMClientDetailsView.react","CRMClientListStore","FluxContainer","PagesReactDispatcher","QuickPerformanceLogger","React","RelayAPIConfig","RelayFBEnvironment","RelayModern","ServicesUISpinner.react","cxMargin","CRMClientDetailsRootQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var k=i!==void 0?i:i=b("CRMClientDetailsRootQuery.graphql");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderQueryResponse=function(a){var c=a.error;a=a.props;if(c)return d.getError();else if(a)return b("React").jsx(b("CRMClientDetailsView.react"),{contactID:d.state.contactID,height:d.props.height,pageID:d.props.pageID,relayResponse:a});return d.getLoading()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{contactID:a.contactID}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),b("RelayAPIConfig").DO_NOT_USE_setActorID(this.props.pageID),b("QuickPerformanceLogger").markerStart(36503556)};d.getError=function(){return b("React").jsx("div",{className:"_6sk4",children:h._("Something went wrong. Please try again later.")})};d.getLoading=function(){return b("React").jsx("div",{className:"_3-8y",children:b("React").jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"})})};d.render=function(){return!this.state.contactID?null:b("React").jsx(j,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:k,render:this.renderQueryResponse,variables:{page_contact_id:this.state.contactID,page_id:this.props.pageID}})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("CRMClientRow.react",["ix","cx","fbt","invariant","BusinessCRMConfigStore","CRMClientListActions","CRMClientListItemActionsEnum","CRMClientListStore","CRMClientProfilePhoto.react","CRMEventsLogger","FDSButton.react","FDSCheckboxInput.react","FluxContainer","Image.react","Layout.react","LineClamp.react","Link.react","PagesReactDispatcher","React","RelayModern","ServicesMessengerSidebarActions","XUIGrayText.react","asset","cxMargin","nullthrows","CRMClientRow_contact.graphql"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;a=b("BusinessCRMConfigStore").withStore;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var l=b("Layout.react").Column,m=b("Layout.react").FillColumn,n=2;function o(a){return b("React").jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",size:"header4",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a.title})})}function p(a){return a.value===null?b("React").jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",shade:"medium",size:"header4",weight:"bold",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:"-"})}):a.value}d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.openIGDirectSidebar=function(){var a=d.props.contact.igThreadId;a!=null&&b("ServicesMessengerSidebarActions").openSidebar(null,a,"INSTAGRAM_DIRECT")},d.openMessengerSidebar=function(){var a;a=(a=d.props.contact.user)==null?void 0:a.id;a!=null&&b("ServicesMessengerSidebarActions").openSidebar(a)},d.goToClientDetails=function(){var a,c=d.props.contact;c=b("nullthrows")(c.id);(a=b("CRMClientListActions")).showClientDetails(c);a.clearBulkEditClient();a.clearUnselectedBulkEditClient();a.selectAllBulkEditClient(!1)},d.onCheckBoxChange=function(){var a;a={contactID:b("nullthrows")(d.props.contact.id),fbUserID:(a=d.props.contact.user)==null?void 0:a.id,igUserID:(a=d.props.contact.igUserID)==null?void 0:a.id,pageCustomerID:(a=d.props.contact.pageCustomerId)==null?void 0:a.id};d.state.contactsToBulkEdit.has(b("nullthrows")(d.props.contact.id))?(b("CRMClientListActions").removeBulkEditClient(b("nullthrows")(d.props.contact.id)),b("CRMClientListActions").addUnselectedBulkEditClient(a),b("CRMEventsLogger").log(d.props.pageID,"uncheck_contact_list_row","contact_list_row_checkbox","contact_list")):((d.state.mergeContactError||d.state.mergedContactID!==null)&&b("CRMClientListActions").dismissMergeToast(),b("CRMClientListActions").addBulkEditClient(a),b("CRMClientListActions").removeUnselectedBulkEditClient(b("nullthrows")(d.props.contact.id)))},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{contactsToBulkEdit:a.contactsToBulkEdit,unSelectedContactsToBulkEdit:a.unSelectedContactsToBulkEdit,isAllSelected:a.isAllSelected,mergedContactID:a.mergedContactID,mergeContactError:a.mergeContactError}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.getDescription=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.description:a:a:a;return b("React").jsx(b("XUIGrayText.react"),{className:"_6rdm",display:"block",size:"header4",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getClientName=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.name:a:a:a;return b("React").jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",shade:"medium",size:"header4",weight:"bold",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getColumnValue=function(a){return b("React").jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",shade:"medium",size:"header4",weight:"bold",children:b("React").jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getBirthdayValue=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.birthday:a:a:a;return a!=null?this.getColumnValue(a):null};d.getContactValue=function(){var a;a=((a=this.props.contact)==null?void 0:a.phoneNumber)===null?this.props.contact.fallback_phone_number:(a=this.props.contact)==null?void 0:(a=a.phoneNumber)==null?void 0:a.displayNumber;return a!=null?this.getColumnValue(a):null};d.getPlatformsValue=function(){var a,c;a=((a=this.props.contact)==null?void 0:a.user)!=null;c=((c=this.props.contact)==null?void 0:(c=c.igProfileInfo)==null?void 0:c.username)!=null;return!c&&!a?null:b("React").jsxs("div",{children:[a?b("React").jsx(b("Image.react"),{className:"_7ynr",src:"/images/pages/crm/indicator-fb-2x.png"}):null,c?b("React").jsx(b("Image.react"),{className:"_7ynr",src:"/images/pages/crm/indicator-ig-2x.png"}):null]})};d.getNotes=function(){var a;a=((a=this.props.contact)==null?void 0:(a=a.notes)==null?void 0:a.edges)||[];a=a.length>0?(a=a[0].node)==null?void 0:(a=a.body)==null?void 0:a.text:null;return a!=null?this.getColumnValue(a):null};d.onActionButtonChange=function(a){this.props.handleClickActionButton&&this.props.handleClickActionButton(a,this.props.contact)};d.getButton=function(){__p&&__p();var a=this,c,d=this.props.store;d=d.get("config");if(d==null)return b("React").jsx("div",{style:{minHeight:"1px",minWidth:"150px"}});d=d.isServiceBusiness;if(d)return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("482554")}),label:i._("Book Now"),onClick:function(){a.onActionButtonChange(b("CRMClientListItemActionsEnum").BOOK_APPOINTMENT)},use:"primary",width:150});d=((d=this.props.contact)==null?void 0:d.user)!=null;c=((c=this.props.contact)==null?void 0:(c=c.igProfileInfo)==null?void 0:c.username)!=null;if(!c&&!d)return b("React").jsx("div",{style:{minHeight:"1px",minWidth:"150px"}});else if(c)return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("1183231")}),label:i._("Send Message"),onClick:this.openIGDirectSidebar,use:"primary",width:150});return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("1183236")}),label:i._("Send Message"),onClick:this.openMessengerSidebar,use:"primary",width:150})};d.getLink=function(){var a;return b("React").jsx(b("Link.react"),{className:((a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)?"_82u3":"_6sig",label:"contact details link",onClick:this.goToClientDetails})};d.getLabels=function(){__p&&__p();var a;a=((a=this.props.contact)==null?void 0:(a=a.labels)==null?void 0:a.edges)||[];if(!a||a.length===0)return null;a=a.map(function(a){return a&&a.node||null}).filter(function(a){return a!=null});var c=null,d=a.slice();if(a.length>n){a=a.length-n;c=b("React").jsx("div",{className:"_6six",children:i._("+{x_more_labels_count} more",[i._param("x_more_labels_count",a)])});d.splice(n)}return b("React").jsxs("div",{className:"_6siv _3-8y",children:[d.map(function(a){if(a==null||a.id==null||a.name==null||a.label_color==null)return null;var c=null;a.label_color!=null&&(c="#"+a.label_color.substring(2));c!==null||j(0,6368);return b("React").jsxs("div",{className:"_6six",children:[b("React").jsx("div",{className:"_6si-",style:{backgroundColor:c}}),b("React").jsx("span",{className:"_6si_",children:a.name})]},a.id)}),c]})};d.render=function(){if(!this.state.contactsToBulkEdit.has(b("nullthrows")(this.props.contact.id))&&this.state.isAllSelected&&!this.state.unSelectedContactsToBulkEdit.has(b("nullthrows")(this.props.contact.id))){var a;a={contactID:b("nullthrows")(this.props.contact.id),fbUserID:(a=this.props.contact.user)==null?void 0:a.id,igUserID:(a=this.props.contact.igUserID)==null?void 0:a.id,pageCustomerID:(a=this.props.contact.pageCustomerId)==null?void 0:a.id};b("CRMClientListActions").addBulkEditClient(a);b("CRMEventsLogger").log(this.props.pageID,"check_contact_list_row","contact_list_row_checkbox","contact_list")}a=this.state.contactsToBulkEdit.has(b("nullthrows")(this.props.contact.id));var c=a?"_6rbx _888r":"_6rbx";return b("React").jsxs(b("Layout.react"),{className:c,children:[b("React").jsx(l,{className:"_3-9a",children:((c=this.props.store.get("config"))==null?void 0:c.shouldShowMergeContact)&&b("React").jsx("div",{className:"_82ds",children:b("React").jsx(b("FDSCheckboxInput.react"),{label:"",onChange:this.onCheckBoxChange,value:a})})}),b("React").jsx(l,{className:"_3-9a",children:b("React").jsx(b("CRMClientProfilePhoto.react"),{profilePhoto:this.props.contact})}),b("React").jsxs(m,{className:"_3-9c _6rby",children:[this.getClientName(),this.getDescription(),this.getLabels(),this.getLink()]}),((c=this.props.store.get("config"))==null?void 0:c.shouldShowPlatformIconsInList)?b("React").jsxs(l,{className:"_3-9a _6rby _6-3j",children:[b("React").jsx(o,{title:i._("Platform(s)")}),b("React").jsx(p,{value:this.getPlatformsValue()})]}):null,b("React").jsxs(l,{className:"_3-9a _6rby _6-3j",children:[b("React").jsx(o,{title:i._("Contact")}),b("React").jsx(p,{value:this.getContactValue()})]}),b("React").jsxs(l,{className:"_3-9a _6rby _6rbz",children:[b("React").jsx(o,{title:i._("Birthday")}),b("React").jsx(p,{value:this.getBirthdayValue()})]}),b("React").jsxs(l,{className:"_3-9a _6rby _6rb-",children:[b("React").jsx(o,{title:i._("Notes")}),b("React").jsx(p,{value:this.getNotes()})]}),b("React").jsx(l,{className:"_3-8s _6-3k _6rby",children:this.getButton()})]})};return c}(b("React").PureComponent);f=c(b("FluxContainer").create(d),{contact:k!==void 0?k:k=b("CRMClientRow_contact.graphql")});e.exports=a(f)}),null);
__d("CRMClientList.react",["cx","CRMClientListActions","CRMClientListItemActionsEnum","CRMClientListStore","CRMClientRow.react","CRMEventsLogger","FBMorePager.react","FluxContainer","PagesPlatformBookingMessageViewer","PagesReactDispatcher","QuickPerformanceLogger","React","RelayModern","ServicesAppointmentDialogRoot.react","ServicesAppointmentManagementDialogEnum","XUISpinner.react","nullthrows","CRMClientList_clientList.graphql","CRMClientListPaginationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;a=b("RelayModern").createPaginationContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.loadMoreContacts=function(){var a=b("nullthrows")(d.props.relay);if(!a.hasMore()||a.isLoading())return;a.loadMore(d.props.pageSize,function(){})},d.handleClickActionButton=function(a,c){switch(a){case b("CRMClientListItemActionsEnum").BOOK_APPOINTMENT:b("CRMEventsLogger").log(d.props.pageID,"click_book_now","book_now_button_contact_list_item","customer_list_view");d.toggleBookNowDialog(!0,c);break}},d.toggleBookNowDialog=function(a,b){d.setState({showBookNowDialog:a,selectedContact:b})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{forceRefetch:c.forceRefetch,selectedContact:a?a.selectedContact:null,showBookNowDialog:a?a.showBookNowDialog:!1}};var d=c.prototype;d.componentDidMount=function(){b("QuickPerformanceLogger").markerEnd(36503555,2),b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),this.setTotalContactCount()};d.componentDidUpdate=function(a){(a==null?void 0:(a=a.clientList)==null?void 0:a.contactCount)!==((a=this.props)==null?void 0:(a=a.clientList)==null?void 0:a.contactCount)&&this.setTotalContactCount()};d.UNSAFE_componentWillUpdate=function(a,b){(this.props.searchTerm!==a.searchTerm||!this.state.forceRefetch&&b.forceRefetch)&&this.refetch()};d.setTotalContactCount=function(){var a;a=this==null?void 0:(a=this.props)==null?void 0:(a=a.clientList)==null?void 0:a.contactCount;b("CRMClientListActions").setTotalContactCount((a=a)!=null?a:0)};d.getBookNowDialog=function(){var a=this,c;return!this.state.showBookNowDialog?null:b("React").jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").MANUAL_CREATE,onToggle:this.toggleBookNowDialog,onUpdateCompleted:b("CRMClientListActions").forceRefetch,pageContactID:((c=this.state.selectedContact)==null?void 0:c.id)||void 0,pageID:this.props.pageID,referrerData:{referrerUIComponent:"crm_client_list_view_cta",referrerUISurface:"crm"},shown:this.state.showBookNowDialog,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.getContacts=function(){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.clientList)!=null?(a=a.contacts)!=null?a.edges:a:a:a:a)||[];var b=[];a.forEach(function(a){a.node&&b.push(a.node)});return b};d.getPager=function(){var a=b("nullthrows")(this.props.relay);return!a.hasMore()?null:b("React").jsx(b("FBMorePager.react"),{onMore:this.loadMoreContacts,children:b("React").jsx("div",{className:"_6s19 _2pi4",children:b("React").jsx(b("XUISpinner.react"),{size:"large"})})})};d.refetch=function(){var a,c=b("nullthrows")(this.props.relay);a=((a=this)!=null?(a=a.props)!=null?(a=a.clientList)!=null?(a=a.contacts)!=null?a.edges:a:a:a:a)||[];c.refetchConnection(a.length+1,function(){b("CRMClientListActions").unsetForceFetch()},{seatchTerm:this.props.searchTerm})};d.render=function(){var a=this,c=this.getContacts();return!c||c.length===0?null:b("React").jsxs("div",{children:[c.map(function(c){return b("React").jsx(b("CRMClientRow.react"),{contact:c,handleClickActionButton:a.handleClickActionButton,pageID:a.props.pageID},c.id)}),this.getBookNowDialog(),this.getPager()]})};return c}(b("React").PureComponent);d=b("FluxContainer").create(c);f=a(d,{clientList:h!==void 0?h:h=b("CRMClientList_clientList.graphql")},{direction:"forward",getConnectionFromProps:function(a){return(a=a)!=null?(a=a.clientList)!=null?a.contacts:a:a},getFragmentVariables:function(a,b){return babelHelpers["extends"]({},a,{first:b})},getVariables:function(a,b){var c=b.count;b=b.cursor;return{count:c,cursor:b,search_term:a.searchTerm,creation_time_range:a.creationTimeRange,platforms:a.platforms,activities:a.activities,phone_status:a.phoneStatus,email_status:a.emailStatus,with_address:a.withAddress,with_birthday:a.withBirthday,label_filter_ids:a.labelFilterIDs,page_id:a.pageID}},query:i!==void 0?i:i=b("CRMClientListPaginationQuery.graphql")});e.exports=f}),null);
__d("CRMClientListAlertDialog.react",["fbt","FDSButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c;return(c=b("React")).jsx(b("FDSModal.react"),{footer:c.jsx(b("FDSModalFooter.react"),{primaryButton:c.jsx(b("FDSButton.react"),{label:g._("OK"),onClick:a.onHide,use:"primary"})}),header:c.jsx(b("FDSModalHeader.react"),{title:a.title}),isShown:a.shown,onHide:a.onHide,children:c.jsx(b("FDSSection.react"),{children:a.alertText})})}e.exports=a}),null);
__d("CRMClientListBulkAction.react",["ix","cx","fbt","CRMClientListActions","CRMClientListAlertDialog.react","CRMClientListStore","CRMEventsLogger","FDSButton.react","FDSCheckboxInput.react","FDSText.react","FluxContainer","Image.react","JSResource","React","ServicesUISpinner.react","Tooltip.react","lazyLoadComponent","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=(a=b("lazyLoadComponent"))((c=b("JSResource"))("CRMExportContactsDialog.react").__setRef("CRMClientListBulkAction.react")),k=a(c("CRMAddLabelDialogRoot.react").__setRef("CRMClientListBulkAction.react")),l=a(c("CRMMergeContactConflictDialogRoot.react").__setRef("CRMClientListBulkAction.react")),m=a(c("CRMEditContactsDialogRoot.react").__setRef("CRMClientListBulkAction.react"));d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("CRMClientListActions").selectAllBulkEditClient(!1),b("CRMClientListActions").clearBulkEditClient(),b("CRMClientListActions").clearUnselectedBulkEditClient(),b("CRMEventsLogger").log(d.props.pageID,"clear_contact_list_selection","contact_list_row_checkbox","contact_list")},d.$3=function(){d.$2(!1)},d.$5=function(){d.$4(!1)},d.$10=function(a){a===void 0&&(a=!1),d.$6(!1),a&&b("CRMClientListActions").clearListSelection()},d.$11=function(){d.$7(!1),b("CRMClientListActions").clearListSelection()},d.$12=function(){d.$8(!1),b("CRMClientListActions").clearListSelection()},d.$13=function(){d.$9(!1),b("CRMClientListActions").clearListSelection()},d.$15=function(){d.$14(!1)},d.$17=function(){__p&&__p();b("CRMEventsLogger").log(d.props.pageID,"click","merge_contact_button","contact_list");if(d.props.contactsToBulkEdit.size>5){d.$4(!0);return}if(d.state.isMergingContact){d.$14(!0);return}var a=d.$16();if(a.hasSamePlatformUsers){d.$2(!0);return}d.$6(!0,a.uniqueFBuserID,a.uniqueInstagramUserID,a.pageCustomerID)},d.$18=function(){b("CRMEventsLogger").log(d.props.pageID,"click","export_contact_button","contact_list"),d.$7(!0)},d.$19=function(){b("CRMEventsLogger").log(d.props.pageID,"click","edit_fields_contact_button","contact_list"),d.$8(!0)},d.$20=function(){b("CRMEventsLogger").log(d.props.pageID,"click","add_label_contact_button","contact_list"),d.$9(!0)},d.$21=function(){b("CRMEventsLogger").log(d.props.pageID,"select_all_contact_list","contact_list_select_all_checkbox","contact_list"),b("CRMClientListActions").clearBulkEditClient(),b("CRMClientListActions").clearUnselectedBulkEditClient(),b("CRMClientListActions").selectAllBulkEditClient(!0)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{showUnableToMergeAlert:a?a.showUnableToMergeAlert:!1,showMergeConflictDialog:a?a.showMergeConflictDialog:!1,showExceedMergeLimitAlert:a?a.showExceedMergeLimitAlert:!1,showMergeInProgressAlert:a?a.showMergeInProgressAlert:!1,uniqueFBuserID:a?a.uniqueFBuserID:null,uniqueInstagramUserID:a?a.uniqueInstagramUserID:null,pageCustomerID:a?a.pageCustomerID:null,showExportContactsDialog:a?a.showExportContactsDialog:!1,showEditContactsDialog:a?a.showEditContactsDialog:!1,showAddLabelDialog:a?a.showAddLabelDialog:!1,isMergingContact:c.isMergingContact,isDoingBulkAction:c.isDoingBulkAction,inputData:c.inputData,searchTerm:c.searchTerm}};var d=c.prototype;d.$2=function(a){this.setState({showUnableToMergeAlert:a})};d.$4=function(a){this.setState({showExceedMergeLimitAlert:a})};d.$6=function(a,b,c,d){this.setState({showMergeConflictDialog:a,uniqueInstagramUserID:c,uniqueFBuserID:b,pageCustomerID:d})};d.$7=function(a){this.setState({showExportContactsDialog:a})};d.$8=function(a){this.setState({showEditContactsDialog:a})};d.$9=function(a){this.setState({showAddLabelDialog:a})};d.$14=function(a){this.setState({showMergeInProgressAlert:a})};d.$16=function(){__p&&__p();var a=null,b=null,c=null,d=null,e=!1;for(var f=this.props.contactsToBulkEdit.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i.fbUserID,k=i.igUserID;i=i.pageCustomerID;if(a!=null&&j!=null&&a!==j){e=!0;break}else j!=null&&(a=j,c=i);if(b!=null&&k!=null&&b!==k){e=!0;break}else k!=null&&(b=k,d=i)}return{uniqueFBuserID:a,uniqueInstagramUserID:b,hasSamePlatformUsers:e,pageCustomerID:(j=c)!=null?j:d}};d.render=function(){var a=[];this.props.contactsToBulkEdit.forEach(function(b,c){c=b.contactID;c!=null&&a.push(c)});var c=Array.from(this.props.unSelectedContactsToBulkEdit.keys()).filter(function(a){return a!=null}),d=this.props.contactsToBulkEdit.size>0,e=this.props.isAllSelected?this.props.totalContactCount-this.props.unSelectedContactsToBulkEdit.size:this.props.contactsToBulkEdit.size,f=this.state.isMergingContact||this.state.isDoingBulkAction;return b("React").jsxs("div",{className:"_82q0",children:[d?b("React").jsxs("div",{className:"_869a",children:[b("React").jsx("div",{className:"_82nj",children:b("React").jsx(b("Tooltip.react"),{tooltip:i._("Select or deselect all contacts"),children:b("React").jsx(b("FDSCheckboxInput.react"),{label:"select or deselect",labelIsHidden:!0,onChange:this.$1,value:"indeterminate"})})}),b("React").jsx("div",{className:"_2pij",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("503645")}),isDisabled:f,label:"Add Label",onClick:this.$20})}),b("React").jsx("div",{className:"_2pij",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("1003828")}),isDisabled:f,label:i._("Download Contacts"),onClick:this.$18})}),b("React").jsx("div",{className:"_2pij",children:b("React").jsx(b("Tooltip.react"),{tooltip:i._("You can merge up to 5 contacts, including 1 each from Facebook and Instragam."),children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("831479")}),isDisabled:this.props.contactsToBulkEdit.size<2||f,label:i._("Merge Contacts"),onClick:this.$17})})}),b("React").jsx("div",{className:"_2pij",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("492955")}),isDisabled:f,label:i._("Edit"),onClick:this.$19})}),b("React").jsx("div",{className:"_4m37 _2pic",children:b("React").jsx(b("FDSText.react"),{color:"secondary",children:i._({"*":"{number} Contacts Selected"},[i._param("number",e,[0,e])])})})]}):b("React").jsxs("div",{className:"_869a",children:[b("React").jsx("div",{className:"_82nj",children:b("React").jsx(b("Tooltip.react"),{tooltip:i._("Select or deselect all contacts"),children:b("React").jsx(b("FDSCheckboxInput.react"),{label:"select or deselect",labelIsHidden:!0,onChange:this.$21,value:!1})})}),b("React").jsx("div",{className:"_4m37 _2pic",children:b("React").jsx(b("FDSText.react"),{color:"secondary",children:i._({"*":"Contacts ({number})"},[i._param("number",this.props.totalContactCount,[0,this.props.totalContactCount])])})})]}),this.state.showUnableToMergeAlert&&b("React").jsx(b("CRMClientListAlertDialog.react"),{alertText:i._("You can't merge two or more contacts from Facebook or Instagram into a single contact. Please select only one contact from each source and try again."),onHide:this.$3,shown:this.state.showUnableToMergeAlert,title:i._("These Contacts Can't Be Merged")}),this.state.showExceedMergeLimitAlert&&b("React").jsx(b("CRMClientListAlertDialog.react"),{alertText:i._("You can only merge up to 5 contacts at one time, including 1 each from Facebook and Instragam. Please select up to 5 contacts and try again."),onHide:this.$5,shown:this.state.showExceedMergeLimitAlert,title:i._("You\u2019ve Exceeded the Merge Limit")}),this.state.showMergeInProgressAlert&&b("React").jsx(b("CRMClientListAlertDialog.react"),{alertText:i._("You can't merge additional contacts until the merge in progress is complete. Please wait for the previous merge to complete and try again."),onHide:this.$15,shown:this.state.showMergeInProgressAlert,title:i._("Contacts Not Merged")}),this.state.showMergeConflictDialog&&b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:b("React").jsx(l,{onHide:this.$10,pageCustomerID:this.state.pageCustomerID,pageID:this.props.pageID,selectedContactIDs:a,shown:this.state.showMergeConflictDialog,uniqueFBUserID:this.state.uniqueFBuserID,uniqueInstagramUserID:this.state.uniqueInstagramUserID})}),this.state.showExportContactsDialog&&b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:b("React").jsx(j,{inputData:this.state.inputData,isAllSelected:this.props.isAllSelected,onHide:this.$11,pageID:this.props.pageID,searchTerm:this.state.searchTerm,selectedContactIDs:a,shown:this.state.showExportContactsDialog,unSelectedContactIDs:c})}),this.state.showEditContactsDialog&&b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:b("React").jsx(m,{inputData:this.state.inputData,isAllSelected:this.props.isAllSelected,onHide:this.$12,pageID:this.props.pageID,searchTerm:this.state.searchTerm,selectedContactIDs:a,shown:this.state.showEditContactsDialog,unSelectedContactIDs:c})}),this.state.showAddLabelDialog&&b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:b("React").jsx(k,{inputData:this.state.inputData,isAllSelected:this.props.isAllSelected,onHide:this.$13,pageID:this.props.pageID,searchTerm:this.state.searchTerm,selectedContactIDs:a,shown:this.state.showAddLabelDialog,unSelectedContactIDs:c})})]})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(d)}),null);
__d("CRMClientListRoot.react",["cx","fbt","CRMClientList.react","CRMClientListActions","CRMClientListStore","FluxContainer","PagesReactDispatcher","QuickPerformanceLogger","React","RelayAPIConfig","RelayFBEnvironment","RelayModern","ScrollableArea.react","ServicesMessengerSidebarActions","ServicesUISpinner.react","Timezone","CRMPageContactsFilterOptionTypes","CRMClientListRootClientListQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var k=10,l=b("Timezone").getEnvironmentTimezoneID()||b("Timezone").PST8PDT,m=b("CRMPageContactsFilterOptionTypes").ACTIVITY,n=b("CRMPageContactsFilterOptionTypes").ADDRESS,o=b("CRMPageContactsFilterOptionTypes").BIRTHDAY,p=b("CRMPageContactsFilterOptionTypes").WITH_ADDRESS,q=b("CRMPageContactsFilterOptionTypes").WITH_BIRTHDAY,r=b("CRMPageContactsFilterOptionTypes").PHONE,s=b("CRMPageContactsFilterOptionTypes").EMAIL,t=i!==void 0?i:i=b("CRMClientListRootClientListQuery.graphql");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{searchTerm:a.searchTerm,labelFilterIDs:a.labelFilterIDs,selectedDateRange:a.selectedDateRange,selectedPlatforms:a.selectedPlatforms,selectedOtherFilters:a.selectedOtherFilters,showSearchResults:a.showSearchResults,forceRefetch:a.forceRefetch}};function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.renderQueryResponse=function(a){__p&&__p();var c=a.error;a=a.props;if(c)return d.getError();else if(a){b("CRMClientListActions").updateIsLoading(!1);return d.getClientList(a)}b("CRMClientListActions").updateIsLoading(!0);return d.getLoading()};b("RelayAPIConfig").DO_NOT_USE_setActorID(d.props.pageID);return d}var d=c.prototype;d.componentDidMount=function(){b("QuickPerformanceLogger").markerStart(36503555),b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),b("ServicesMessengerSidebarActions").closeMessengerSidebar()};d.getError=function(){return b("React").jsx("div",{className:"_6rdl",children:h._("Something went wrong. Please try again later.")})};d.getLoading=function(){return b("React").jsx("div",{className:"_8d52",children:b("React").jsx(b("ServicesUISpinner.react"),{centered:!1,size:"large"})})};d.getPhoneSelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(r))!=null?a:[];var b=null;a.length>0&&(b=a[0]);return b};d.getEmailSelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(s))!=null?a:[];var b=null;a.length>0&&(b=a[0]);return b};d.getAddressSelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(n))!=null?a:[];var b=null;a.length>0&&(b=a[0]);a=null;b!=null&&(a=b===p);return a};d.getBirthdaySelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(o))!=null?a:[];var b=null;a.length>0&&(b=a[0]);a=null;b!=null&&(a=b===q);return a};d.getInputData=function(){var a,c=[this.state.selectedDateRange.start.toInstant(l),this.state.selectedDateRange.end.toInstant(l)];a=(a=this.state.selectedOtherFilters.get(m))!=null?a:[];var d=this.state.labelFilterIDs.map(function(a){return a.id});c={creationTimeRange:c,platforms:this.state.selectedPlatforms,activities:a,phoneStatus:this.getPhoneSelectedValue(),emailStatus:this.getEmailSelectedValue(),withAddress:this.getAddressSelectedValue(),withBirthday:this.getBirthdaySelectedValue(),labelFilterIDs:d};b("CRMClientListActions").updateInputData(c);return c};d.getClientList=function(a){var c=this.getInputData();return b("React").jsx("div",{className:"_6rdl",children:b("React").jsx(b("CRMClientList.react"),{activities:c.activities,clientList:a.page,creationTimeRange:c.creationTimeRange,labelFilterIDs:c.labelFilterIDs,emailStatus:c.emailStatus,forceRefetch:this.state.forceRefetch,pageID:this.props.pageID,pageSize:k,phoneStatus:c.phoneStatus,platforms:c.platforms,searchTerm:this.state.showSearchResults?this.state.searchTerm:null,withAddress:c.withAddress,withBirthday:c.withBirthday})})};d.render=function(){var a=this.getInputData();return b("React").jsx(b("ScrollableArea.react"),{height:this.props.height,children:b("React").jsx(j,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:t,render:this.renderQueryResponse,variables:{count:k,search_term:this.state.showSearchResults?this.state.searchTerm:null,page_id:this.props.pageID,creation_time_range:a.creationTimeRange,platforms:a.platforms,activities:a.activities,phone_status:a.phoneStatus,email_status:a.emailStatus,with_address:a.withAddress,with_birthday:a.withBirthday,label_filter_ids:a.labelFilterIDs}})})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("CRMClientTypeaheadSearchResultsRenderer.react",["ix","cx","fbt","CRMClientContactSearchViewItem.react","CRMClientContactsSearchableEntry","CRMClientListStore","FDSSpinner.react","FDSText.react","Image.react","Link.react","PageCustomLabelsTypeaheadViewItem.react","PagesManagerInboxCustomLabelSearchableEntry","PagesManagerStore","React","ScrollableArea.react","SearchableEntry","TextSearchUtil","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=a;d.props.queryString&&(c=b("TextSearchUtil").getTokens(a.toString(),d.props.queryString.toString()).map(function(a,c){return a.isHighlighted?b("React").jsx("span",{className:"_8i3e",children:a.text},c):a.text}));return b("React").jsx("span",{children:c})},d.$2=function(a){d.props.onSelect(new(b("SearchableEntry"))({uniqueID:"0",title:"See all Results"}),a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=[],d=[];this.props.entries.map(function(e){e instanceof b("PagesManagerInboxCustomLabelSearchableEntry")?c.push(b("React").jsx(b("PageCustomLabelsTypeaheadViewItem.react"),{entry:e,onSelect:a.props.onSelect,renderHighlight:a.$1},e.getUniqueID())):e instanceof b("CRMClientContactsSearchableEntry")&&d.push(b("React").jsx(b("CRMClientContactSearchViewItem.react"),{entry:e,onSelect:a.props.onSelect,renderHighlight:a.$1},e.getUniqueID()))});var e=d.length===0&&b("CRMClientListStore").getState().isLoadingContactSearch,f=c.length>0?b("React").jsx("div",{className:"_8i3f","data-testid":"labelsSection_header",children:i._("LABELS")}):null;e=e||d.length>0?b("React").jsxs("div",{children:[b("React").jsx("div",{className:"_8i3f","data-testid":"contactsSection_header",children:i._("CONTACTS")}),e&&b("React").jsx("div",{className:"_3-9b _3-96",children:b("React").jsx(b("FDSSpinner.react"),{})})]}):null;var h=b("PagesManagerStore").getLayoutHeight()-b("PagesManagerStore").getListNavigationHeight();return b("React").jsx(b("ScrollableArea.react"),{maxHeight:h,children:b("React").jsxs("div",{className:"_8i3d",children:[b("React").jsxs(b("Link.react"),{className:"_8jun",onClick:this.$2,children:[b("React").jsx("div",{className:"_8jx3",children:b("React").jsx(b("Image.react"),{src:g("483480")})}),b("React").jsx(b("FDSText.react"),{color:"blueLink",weight:"bold",children:i._("See all results for {queryString}",[i._param("queryString",this.props.queryString.length>5?this.props.queryString.substr(0,3)+"...":this.props.queryString)])})]}),b("React").jsx("span",{className:"_8i3g"}),e,d,b("React").jsx("span",{className:"_7zla"}),f,c]})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CRMClientTypeahead.react",["ix","cx","fbt","CompositeSearchSource","CRMClientContactsRelaySearchSource.react","CRMClientContactsSearchableEntry","CRMClientListActions","CRMClientListStore","CRMClientTypeaheadSearchResultsRenderer.react","FluxContainer","Image.react","Link.react","PageManagerInboxCustomLabelSearchSource","PagesManagerInboxCustomLabelSearchableEntry","PagesManagerInboxSearchTokenRenderer.react","PagesReactDispatcher","React","XUITokenizer.react","asset","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();var c=a.labelFilterIDs.map(function(a){return new(b("PagesManagerInboxCustomLabelSearchableEntry"))(a)});return{searchTerm:a.searchTerm,isTypeAheadActive:a.isTypeAheadActive,showSearchResults:a.showSearchResults,activeSearchLabels:c}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.$2=function(a){b("CRMClientListActions").updateSearchTerm(a.target.value)};d.$3=function(a){__p&&__p();if(a instanceof b("PagesManagerInboxCustomLabelSearchableEntry"))b("CRMClientListActions").addCustomLabel(a.getData());else if(a instanceof b("CRMClientContactsSearchableEntry")){var c,d=b("nullthrows")(a.getUniqueID());(c=b("CRMClientListActions")).showClientDetails(d);c.clearBulkEditClient();c.clearUnselectedBulkEditClient();c.clearTypeaheadSearch();c.selectAllBulkEditClient(!1)}else a.getUniqueID()==="0"&&b("CRMClientListActions").showSearchResults(!0)};d.$4=function(a){a instanceof b("PagesManagerInboxCustomLabelSearchableEntry")&&b("CRMClientListActions").removeCustomLabel(a.getData())};d.$5=function(){b("CRMClientListActions").clearTypeaheadSearch()};d.render=function(){var a=this,c=new(b("CompositeSearchSource"))([b("PageManagerInboxCustomLabelSearchSource").getInstance(this.props.labels),new(b("CRMClientContactsRelaySearchSource.react"))(this.props.pageID,5)]),d=b("CRMClientTypeaheadSearchResultsRenderer.react");d={useLayer:!0,ViewRenderer:d,TokenRenderer:b("PagesManagerInboxSearchTokenRenderer.react"),maxEntries:200};return b("React").jsxs("div",{children:[b("React").jsxs("div",{className:"_8j3u",children:[this.state.isTypeAheadActive?b("React").jsx(b("Link.react"),{className:"_8j3v",onClick:this.$5,children:b("React").jsx(b("Image.react"),{src:g("499680")})}):b("React").jsx("div",{className:"_8j3v",children:b("React").jsx(b("Image.react"),{src:g("492644")})}),this.state.showSearchResults?b("React").jsx("div",{className:"_3-99",children:this.state.searchTerm}):b("React").jsx(b("XUITokenizer.react"),{className:"_8f-a",context:this.$1,entries:this.state.activeSearchLabels,focusedOnInit:!0,hideViewWithEntries:!1,onAddEntryAttempt:this.$3,onChange:this.$2,onEnterWithoutSelection:this.$2,onQueryStringChange:this.$2,onRemoveEntryAttempt:this.$4,placeholder:i._("Search people and labels"),presenter:d,searchSource:c,showEntriesOnFocus:!0,tokenClassName:"_8f-b"})]}),b("React").jsx("div",{ref:function(b){return a.$1=b}})]})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("CRMClientTypeaheadRoot.react",["CRMClientTypeahead.react","FluxContainer","PagesManagerCustomLabelsStore","PagesReactDispatcher","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerCustomLabelsStore")]};c.calculateState=function(a){a=b("PagesManagerCustomLabelsStore").getLabels().toArray();return{labels:a}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.render=function(){return b("React").jsx(b("CRMClientTypeahead.react"),{labels:this.state.labels,pageID:this.props.pageID})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("CRMClientsViewHeader.react",["ix","cx","fbt","regeneratorRuntime","ActorURI","AsyncRequest","BasicFBNux","BusinessCRMConfigStore","CRMClientListActions","CRMClientListBulkAction.react","CRMClientListStore","CRMClientTypeaheadRoot.react","CRMEventsLogger","CRMPageContactsDateRangeFilter.react","CRMPageContactsFilterMappingFunction","CRMPageContactsFilterTokenizer.react","CRMPageContactsOtherFilter.react","CRMPageContactsPlatformFilter.react","FDSButton.react","FDSText.react","FluxContainer","Image.react","PagesReactDispatcher","React","RelayFBEnvironment","RelayModern","SUIBusinessTheme","SUISearchInput.react","XCRMManualContactCreationDialogController","XUIAmbientNUX.react","asset","cxMargin","CRMClientsViewHeaderSavedFilterQuery.graphql","CRMClientsViewHeaderEmailSubscriptionGKQuery.graphql","CRMClientsViewHeaderLikesPageFilterGKQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l;a=b("BusinessCRMConfigStore").withStore;var m=b("CRMPageContactsFilterMappingFunction").getOptionType,n=b("RelayModern").fetchQuery;b("RelayModern").graphql;var o=6874,p="customer_list_view",q=j!==void 0?j:j=b("CRMClientsViewHeaderSavedFilterQuery.graphql"),r=k!==void 0?k:k=b("CRMClientsViewHeaderEmailSubscriptionGKQuery.graphql"),s=l!==void 0?l:l=b("CRMClientsViewHeaderLikesPageFilterGKQuery.graphql");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){d.$1=a},d.$3=function(){return d.$1},d.$4=function(){d.setState({hasShown:!0}),b("BasicFBNux").onDismiss(o)},d.addClient=function(){b("CRMEventsLogger").log(d.props.pageID,"click_manual_entry","manual_entry_button",p);var a=b("XCRMManualContactCreationDialogController").getURIBuilder().setFBID("page_id",d.props.pageID).getURI();a=b("ActorURI").create(a,d.props.pageID);new(b("AsyncRequest"))(a).send()},d.importContacts=function(){b("CRMEventsLogger").log(d.props.pageID,"click_import_from_csv_button","import_contact_from_csv_button",p),b("CRMClientListActions").importContacts()},d.searchFocused=function(){b("CRMEventsLogger").log(d.props.pageID,"click_search_input","seach_input",p)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{searchTerm:c.searchTerm,hasShown:a==null?!1:a.hasShown,contactsToBulkEdit:c.contactsToBulkEdit,unSelectedContactsToBulkEdit:c.unSelectedContactsToBulkEdit,totalContactCount:c.totalContactCount,isAllSelected:c.isAllSelected,selectedDateRange:c.selectedDateRange,selectedPlatforms:c.selectedPlatforms,selectedOtherFilters:c.selectedOtherFilters,savedFilters:c.savedFilters,isLoading:c.isLoading,shouldShowEmailSubscription:a==null?!1:a.shouldShowEmailSubscription,shouldShowLikesPageFilter:a==null?!1:a.shouldShowLikesPageFilter}};var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a;b("CRMClientListActions").clearSelectedDateRange();b("CRMClientListActions").clearSelectedPlatform();b("CRMClientListActions").clearSelectedOtherFilters();b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores());this.getSavedFilters();this.canSeeEmailSubscription();this.canSeeLikesPageFilter();b("BasicFBNux").onView(o);((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContactNux)&&this.state.hasShown===!1&&b("CRMEventsLogger").log(this.props.pageID,"csv_import_nux_impression","import_contact_from_csv_button",p)};d.getAddNewClientButton=function(){var a;return b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("482650")}),label:i._("Add New Contact"),onClick:this.addClient,size:((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)?"large":"medium",use:"primary"})};d.getImportContactButton=function(){var a;return((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContacts)?b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("514769")}),label:i._("Upload Contacts"),margin:"_3-9a",onClick:this.importContacts,ref:this.$2,size:((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)?"large":"medium",use:"default"}),((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContactNux)?b("React").jsx(b("XUIAmbientNUX.react"),{contextRef:this.$3,onCloseButtonClick:this.$4,position:"below",shown:!this.state.hasShown,width:"auto",children:i._("Now you can upload your list of contacts from a spreadsheet.")},"csvImportNux"):null," "]}):null};d.searchChanged=function(a){b("CRMClientListActions").clearListSelection(),b("CRMClientListActions").updateSearchTerm(a),b("CRMClientListActions").showSearchResults(!0)};d.getSearchInput=function(){var a;return b("React").jsx(b("SUISearchInput.react"),{hasTooltip:!1,margin:"_3-9a",onChange:this.searchChanged,onFocus:this.searchFocused,placeholder:i._("Search for contact"),theme:b("SUIBusinessTheme"),value:(a=this.state.searchTerm)!=null?a:"",width:"20%"})};d.getAppliedFilters=function(){__p&&__p();var a=[];for(var b=this.state.selectedOtherFilters.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a.push.apply(a,e)}return a};d.$5=function(a){var b=new Map();a.forEach(function(a){var c,d=m(a);c=(c=b.get(d))!=null?c:[];c.push(a);b.set(d,c)});return b};d.getSavedFilters=function(){__p&&__p();var a=this,c,d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(n(b("RelayFBEnvironment"),q,{actor_id:this.props.pageID}));case 2:c=g.sent,d=[],e=[],c.saved_filter_query.map(function(a){d.push(a.saved_filter),e.push(a.customized_name)}),f=[],d.forEach(function(b){f.push(a.$5(b))}),e.reverse(),f.reverse(),e.forEach(function(a,c){b("CRMClientListActions").updateSavedFilters(f[c],a)});case 11:case"end":return g.stop()}},null,this)};d.canSeeEmailSubscription=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(n(b("RelayFBEnvironment"),r,{page_id:this.props.pageID}));case 2:a=c.sent,this.setState({shouldShowEmailSubscription:a.page.gk_check.passes_gk});case 4:case"end":return c.stop()}},null,this)};d.canSeeLikesPageFilter=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(n(b("RelayFBEnvironment"),s,{page_id:this.props.pageID}));case 2:a=c.sent,this.setState({shouldShowLikesPageFilter:a.page.gk_check.passes_gk});case 4:case"end":return c.stop()}},null,this)};d.render=function(){var a,c=this.getAppliedFilters();return b("React").jsxs("div",{children:[b("React").jsxs("div",{className:"_6p26",children:[((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)?b("React").jsx(b("CRMClientTypeaheadRoot.react"),{pageID:this.props.pageID}):this.getSearchInput(),((a=this.props.store.get("config"))==null?void 0:a.shouldShowFilters)?[b("React").jsx(b("CRMPageContactsPlatformFilter.react"),{pageID:this.props.pageID,selectedPlatforms:this.state.selectedPlatforms,useLargeButton:!!((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)},"platFormFilter"),b("React").jsx(b("CRMPageContactsDateRangeFilter.react"),{pageID:this.props.pageID,selectedDateRange:this.state.selectedDateRange,useLargeButton:!!((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)},"dateRangeFilter"),b("React").jsx(b("CRMPageContactsOtherFilter.react"),{appliedFilters:c,isServiceBusiness:!!((a=this.props.store.get("config"))==null?void 0:a.isServiceBusiness),pageID:this.props.pageID,savedFilters:this.state.savedFilters,shouldShowEmailSubscription:this.state.shouldShowEmailSubscription,shouldShowLikesPageFilter:this.state.shouldShowLikesPageFilter,useLargeButton:!!((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)},"otherFilter")]:null,b("React").jsxs("div",{className:"_8ba4",children:[this.getImportContactButton(),this.getAddNewClientButton()]})]}),c.length>0?b("React").jsx("div",{children:b("React").jsx(b("CRMPageContactsFilterTokenizer.react"),{filters:this.state.selectedOtherFilters,pageID:this.props.pageID})}):null,((a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)&&!this.state.isLoading?this.state.totalContactCount!==0?b("React").jsx(b("CRMClientListBulkAction.react"),{contactsToBulkEdit:this.state.contactsToBulkEdit,isAllSelected:this.state.isAllSelected,pageID:this.props.pageID,totalContactCount:this.state.totalContactCount,unSelectedContactsToBulkEdit:this.state.unSelectedContactsToBulkEdit}):b("React").jsxs("div",{className:"_8end",children:[b("React").jsx("div",{className:"_8ene",children:b("React").jsx("div",{className:"_8enf",children:b("React").jsx(b("Image.react"),{src:g("1089017")})})}),b("React").jsx("div",{children:b("React").jsx(b("FDSText.react"),{size:"header4",weight:"bold",children:"No Results Found"})}),b("React").jsx("div",{children:b("React").jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:"There are no contacts matching your search criteria."})})]}):null]})};return c}(b("React").PureComponent);e.exports=a(b("FluxContainer").create(c))}),null);
__d("CRMConsentToTOSDialog.react",["fbt","CRMConsentToTOSDialogBody.react","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={reachBodyBottom:!1},c.$1=function(){c.setState({reachBodyBottom:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx(b("FDSModal.react"),{footer:a.jsx(b("FDSModalFooter.react"),{primaryButton:a.jsx(b("FDSButton.react"),{isDisabled:!this.state.reachBodyBottom,label:g._("Confirm"),onClick:this.props.onConfirm,use:"primary"}),secondaryButton:a.jsx(b("FDSCancelButton.react"),{})}),header:a.jsx(b("FDSModalHeader.react"),{title:g._("Review Terms of Service")}),isShown:this.props.isShown,label:"Modal Title",onHide:this.props.onHide,width:560,children:a.jsx(b("FDSSection.react"),{children:a.jsx(b("CRMConsentToTOSDialogBody.react"),{onEndReached:this.$1})})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CRMClientsMainView.react",["cx","fbt","CRMClientDetailsRoot.react","CRMClientListActions","CRMClientListRoot.react","CRMClientListStore","CRMClientsViewHeader.react","CRMContactImportRoot.react","CRMEventsLogger","CRMPageContactsBulkActionType","FDSGuidanceToast.react","FDSGuidanceToastButton.react","FDSGuidanceToastCloseButton.react","FDSGuidanceToastProgressBar.react","FluxContainer","PagesReactDispatcher","React","RelayFBEnvironment","RelayModern","ResponsiveBlock.react","goURI","nullthrows","CRMClientsMainViewQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var k=1e3,l=3,m=i!==void 0?i:i=b("CRMClientsMainViewQuery.graphql");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){var a=d.state.progress+l;a<=95&&b("CRMClientListActions").updateProgress(l)},d.$3=function(){window.clearInterval(d.$1),b("CRMClientListActions").dismissToast()},d.$5=function(){window.clearInterval(d.$1),d.$1=void 0,b("CRMClientListActions").dismissBulkActionToast()},d.$6=function(){b("CRMEventsLogger").log(d.props.pageID,"click","merge_contact_success_toast_view_button","contact_list"),b("CRMClientListActions").showClientDetails(b("nullthrows")(d.state.mergedContactID)),b("CRMClientListActions").dismissMergeToast()},d.$7=function(a,b){d.setState({headerHeight:b})},d.$8=function(a){var c=a.error;a=a.props;if(c)return b("React").jsx("div",{});else if(a){c=a.node.has_consent_to_crm_tos;return b("React").jsx(b("CRMContactImportRoot.react"),{hasConsent:c,height:d.props.height,isEligibleForSMS:((c=(c=a.node.services_vertical_info)==null?void 0:c.is_eligible_for_appointment_calendar)!=null?c:!1)&&((c=(c=a.node.services_vertical_info)==null?void 0:c.is_page_eligible_for_sms)!=null?c:!1),pageID:d.props.pageID,pageName:a.node.display_name})}return b("React").jsx("div",{})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a,c){c=b("CRMClientListStore").getState();return{isCreatingContactsFromCSV:c.isCreatingContactsFromCSV,isContactCreationComplete:c.isContactCreationComplete,uploadedFileName:c.uploadedFileName,progress:c.progress,headerHeight:a?a.headerHeight:0,showDetailsView:b("CRMClientListStore").getShowDetailsView(),showContactImportView:b("CRMClientListStore").getShowContactImportView(),isMergingContact:c.isMergingContact,mergedContactID:c.mergedContactID,mergeContactError:c.mergeContactError,isDoingBulkAction:c.isDoingBulkAction,isBulkActionComplete:c.isBulkActionComplete,exportContactsUrl:c.exportContactsUrl,bulkActionType:c.bulkActionType}};var d=c.prototype;d.componentDidMount=function(){b("CRMClientListActions").backToClientList(),b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),this.props.contactID!=null&&b("CRMClientListActions").showClientDetails(this.props.contactID)};d.componentDidUpdate=function(){(this.state.isCreatingContactsFromCSV||this.state.isDoingBulkAction)&&this.$1==null&&(this.$1=window.setInterval(this.$2,k))};d.$4=function(){b("CRMClientListActions").dismissMergeToast()};d.render=function(){return this.state.showContactImportView?b("React").jsx("div",{className:"_6o-e",children:b("React").jsx(j,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:m,render:this.$8,variables:{page_id:this.props.pageID}})}):b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{className:"_6o-e",children:this.state.showDetailsView?b("React").jsx(b("CRMClientDetailsRoot.react"),{height:this.props.height,pageID:this.props.pageID}):b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("ResponsiveBlock.react"),{onResize:this.$7,children:b("React").jsx(b("CRMClientsViewHeader.react"),{pageID:this.props.pageID})}),b("React").jsx(b("CRMClientListRoot.react"),{height:this.props.height!=null?this.props.height-this.state.headerHeight:null,pageID:this.props.pageID})]})}),b("React").jsxs("div",{className:"_7o8_",children:[this.state.isCreatingContactsFromCSV||this.state.isContactCreationComplete?b("React").jsx(n,{fileName:this.state.uploadedFileName,isComplete:this.state.isContactCreationComplete,onClose:this.$3,progress:this.state.progress}):null,this.state.isMergingContact||this.state.mergedContactID!=null||this.state.mergeContactError?b("React").jsx(o,{hasError:this.state.mergeContactError,isComplete:this.state.mergedContactID!=null,onClose:this.$4,onView:this.$6}):null,this.state.isDoingBulkAction||this.state.isBulkActionComplete?b("React").jsx(p,{actionType:this.state.bulkActionType,isComplete:this.state.isBulkActionComplete,onClose:this.$5,pageID:this.props.pageID,progress:this.state.progress,url:this.state.exportContactsUrl}):null]})]})};return c}(b("React").PureComponent);function n(a){var c=a.progress,d=a.isComplete,e=a.fileName;a=a.onClose;return b("React").jsx("div",{className:"_7o90",children:b("React").jsx(b("FDSGuidanceToast.react"),{closeButton:b("React").jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:a}),content:d?h._("Your contacts will finish uploading within the next few minutes. Please refresh the page to see uploaded contacts."):h._("'Uploading' {file_name}",[h._param("file_name",e)]),progressBar:b("React").jsx(b("FDSGuidanceToastProgressBar.react"),{progress:d?100:c}),type:d?"success":"progress"})})}function o(a){var c=a.isComplete,d=a.hasError,e=a.onClose;a=a.onView;if(d){b("CRMEventsLogger").log(this.props.pageID,"merge_page_contact_error","merge_contact_error_toast","contact_list");return(d=b("React")).jsx("div",{className:"_7o90",children:d.jsx(b("FDSGuidanceToast.react"),{callToActionButton:d.jsx(b("FDSGuidanceToastButton.react"),{label:h._("OK"),onClick:e}),closeButton:d.jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:e}),content:h._("There was an issue merging these contacts. Please refresh the page and try again."),type:"error"})})}return b("React").jsx("div",{className:"_7o90",children:b("React").jsx(b("FDSGuidanceToast.react"),{callToActionButton:c?b("React").jsx(b("FDSGuidanceToastButton.react"),{label:h._("View"),onClick:a}):void 0,closeButton:b("React").jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:e}),content:c?h._("Your contacts have been merged. Select \"view\" to see your merged contact."):h._("'Merging contacts'"),progressBar:b("React").jsx(b("FDSGuidanceToastProgressBar.react"),{}),type:c?"success":"buffering"})})}function p(a){__p&&__p();var c=a.progress,d=a.isComplete,e=a.url,f=a.actionType,g=a.onClose,i=a.pageID;a="";var j="",k="",l=function(){return void 0},m=function(){return void 0};switch(f){case b("CRMPageContactsBulkActionType").EXPORT:a=h._("Download");j=h._("Your file is ready. Please select Download to continue.");k=h._("We're preparing your file. We'll notify you when it's ready to be downloaded.");l=function(){b("CRMEventsLogger").log(i,"click","export_contact_toast_download_button","contact_list"),b("goURI")(e)};m=function(){b("CRMEventsLogger").log(i,"click","export_contact_toast_dismiss_button","contact_list"),g()};break;case b("CRMPageContactsBulkActionType").EDIT:a=h._("View");j=h._("Your contacts have been updated. Select \"view\" to refresh this list.");k=h._("Saving changes to selected contacts");l=function(){b("CRMEventsLogger").log(i,"click","edit_fields_contact_toast_view_button","contact_list"),b("CRMClientListActions").forceRefetch(),g()};m=function(){b("CRMEventsLogger").log(i,"click","edit_fields_contact_toast_dismiss_button","contact_list"),g()};break;case b("CRMPageContactsBulkActionType").ADD_LABEL:a="View";j='Your contacts have been updated. Select "View" to see updated information.';k="Updating contacts";l=function(){b("CRMEventsLogger").log(i,"click","add_label_contact_toast_view_button","contact_list"),b("CRMClientListActions").forceRefetch(),g()};m=function(){b("CRMEventsLogger").log(i,"click","add_label_contact_toast_dismiss_button","contact_list"),g()};break;default:break}return b("React").jsx("div",{className:"_7o90",children:b("React").jsx(b("FDSGuidanceToast.react"),{callToActionButton:d?b("React").jsx(b("FDSGuidanceToastButton.react"),{label:a,onClick:l}):void 0,closeButton:b("React").jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:m}),content:d?j:k,progressBar:b("React").jsx(b("FDSGuidanceToastProgressBar.react"),{progress:d?100:c}),type:d?"success":"progress"})})}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);